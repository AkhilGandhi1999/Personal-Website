var ti=Object.defineProperty;var ei=(L,t,o)=>t in L?ti(L,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):L[t]=o;var ee=(L,t,o)=>(ei(L,typeof t!="symbol"?t+"":t,o),o),Ne=(L,t,o)=>{if(!t.has(L))throw TypeError("Cannot "+o)};var n=(L,t,o)=>(Ne(L,t,"read from private field"),o?o.call(L):t.get(L)),j=(L,t,o)=>{if(t.has(L))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(L):t.set(L,o)},st=(L,t,o,e)=>(Ne(L,t,"write to private field"),e?e.call(L,o):t.set(L,o),o),ge=(L,t,o,e)=>({set _(d){st(L,t,d,o)},get _(){return n(L,t,e)}}),Y=(L,t,o)=>(Ne(L,t,"access private method"),o);import{s as safe_not_equal,S as create_slot,f as element,a as space,g as claim_element,h as children,d as detach,c as claim_space,j as attr,i as insert_hydration,M as append_hydration,N as listen,U as update_slot_base,V as get_all_dirty_from_scope,W as get_slot_changes,w as run_all,T as null_to_empty,y as add_render_callback,Y as bubble,a4 as get_svelte_dataset,a5 as onDestroy,t as tick,q as binding_callbacks,n as noop,Q as svg_element,l as text,R as claim_svg_element,m as claim_text,p as set_data,_ as set_input_value}from"../chunks/scheduler.8332e04c.js";import{S as SvelteComponent,i as init,a as transition_in,g as group_outros,t as transition_out,c as check_outros,h as create_in_transition,j as create_out_transition,b as create_component,d as claim_component,m as mount_component,e as destroy_component}from"../chunks/index.d6058768.js";import{C as Chip}from"../chunks/Chip.cc982218.js";import{C as CommonPage}from"../chunks/CommonPage.a36c22bb.js";import{g as getAugmentedNamespace}from"../chunks/_commonjsHelpers.edff4021.js";import{R as RESUME,A as Assets}from"../chunks/params.783f2546.js";const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function commonjsRequire(L){throw new Error('Could not dynamically require "'+L+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(L){pdfExports=L}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,o){module.exports=t.pdfjsLib=o()})(globalThis,()=>(()=>{var __webpack_modules__=[,(L,t)=>{var vt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ht,t.bytesToString=W,t.createValidAbsoluteUrl=wt,t.getModificationDate=Pt,t.getUuid=$t,t.getVerbosityLevel=K,t.info=rt,t.isArrayBuffer=ft,t.isArrayEqual=Tt,t.isNodeJS=void 0,t.normalizeUnicode=Gt,t.objectFromMap=dt,t.objectSize=ot,t.setVerbosityLevel=M,t.shadow=St,t.string32=et,t.stringToBytes=tt,t.stringToPDFString=gt,t.stringToUTF8String=nt,t.unreachable=G,t.utf8StringToString=it,t.warn=lt;const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=o;const e=[1,0,0,1,0,0];t.IDENTITY_MATRIX=e;const d=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=d;const E=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=E;const T=1.35;t.LINE_FACTOR=T;const V=.35;t.LINE_DESCENT_FACTOR=V;const _=V/T;t.BASELINE_FACTOR=_;const m={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=m;const g={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=g;const N="pdfjs_internal_editor_";t.AnnotationEditorPrefix=N;const B={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=B;const I={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=I;const P={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=P;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=b;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=p;const A={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=A;const x={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=x;const F={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=F;const k={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=k;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=h;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=f;const O={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=O;const y={O:"PageOpen",C:"PageClose"};t.PageActionEventType=y;const l={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=l;const D={NONE:0,BINARY:1};t.CMapCompressionType=D;const w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=w;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=z;let $=l.WARNINGS;function M(ct){Number.isInteger(ct)&&($=ct)}function K(){return $}function rt(ct){$>=l.INFOS&&console.log(`Info: ${ct}`)}function lt(ct){$>=l.WARNINGS&&console.log(`Warning: ${ct}`)}function G(ct){throw new Error(ct)}function ht(ct,J){ct||G(J)}function pt(ct){switch(ct==null?void 0:ct.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wt(ct,J=null,q=null){if(!ct)return null;try{if(q&&typeof ct=="string"){if(q.addDefaultProtocol&&ct.startsWith("www.")){const yt=ct.match(/\./g);(yt==null?void 0:yt.length)>=2&&(ct=`http://${ct}`)}if(q.tryConvertEncoding)try{ct=nt(ct)}catch{}}const mt=J?new URL(ct,J):new URL(ct);if(pt(mt))return mt}catch{}return null}function St(ct,J,q,mt=!1){return Object.defineProperty(ct,J,{value:q,enumerable:!mt,configurable:!0,writable:!1}),q}const C=function(){function J(q,mt){this.constructor===J&&G("Cannot initialize BaseException."),this.message=q,this.name=mt}return J.prototype=new Error,J.constructor=J,J}();t.BaseException=C;class i extends C{constructor(J,q){super(J,"PasswordException"),this.code=q}}t.PasswordException=i;class a extends C{constructor(J,q){super(J,"UnknownErrorException"),this.details=q}}t.UnknownErrorException=a;class r extends C{constructor(J){super(J,"InvalidPDFException")}}t.InvalidPDFException=r;class c extends C{constructor(J){super(J,"MissingPDFException")}}t.MissingPDFException=c;class u extends C{constructor(J,q){super(J,"UnexpectedResponseException"),this.status=q}}t.UnexpectedResponseException=u;class v extends C{constructor(J){super(J,"FormatError")}}t.FormatError=v;class R extends C{constructor(J){super(J,"AbortException")}}t.AbortException=R;function W(ct){(typeof ct!="object"||(ct==null?void 0:ct.length)===void 0)&&G("Invalid argument for bytesToString");const J=ct.length,q=8192;if(J<q)return String.fromCharCode.apply(null,ct);const mt=[];for(let yt=0;yt<J;yt+=q){const Zt=Math.min(yt+q,J),te=ct.subarray(yt,Zt);mt.push(String.fromCharCode.apply(null,te))}return mt.join("")}function tt(ct){typeof ct!="string"&&G("Invalid argument for stringToBytes");const J=ct.length,q=new Uint8Array(J);for(let mt=0;mt<J;++mt)q[mt]=ct.charCodeAt(mt)&255;return q}function et(ct){return String.fromCharCode(ct>>24&255,ct>>16&255,ct>>8&255,ct&255)}function ot(ct){return Object.keys(ct).length}function dt(ct){const J=Object.create(null);for(const[q,mt]of ct)J[q]=mt;return J}function At(){const ct=new Uint8Array(4);return ct[0]=1,new Uint32Array(ct.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class Ft{static get isLittleEndian(){return St(this,"isLittleEndian",At())}static get isEvalSupported(){return St(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?St(this,"platform",{isWin:!1,isMac:!1}):St(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var J,q;return St(this,"isCSSRoundSupported",(q=(J=globalThis.CSS)==null?void 0:J.supports)==null?void 0:q.call(J,"width: round(1.5px, 1px)"))}}t.FeatureTest=Ft;const Ut=[...Array(256).keys()].map(ct=>ct.toString(16).padStart(2,"0"));class Et{static makeHexColor(J,q,mt){return`#${Ut[J]}${Ut[q]}${Ut[mt]}`}static scaleMinMax(J,q){let mt;J[0]?(J[0]<0&&(mt=q[0],q[0]=q[1],q[1]=mt),q[0]*=J[0],q[1]*=J[0],J[3]<0&&(mt=q[2],q[2]=q[3],q[3]=mt),q[2]*=J[3],q[3]*=J[3]):(mt=q[0],q[0]=q[2],q[2]=mt,mt=q[1],q[1]=q[3],q[3]=mt,J[1]<0&&(mt=q[2],q[2]=q[3],q[3]=mt),q[2]*=J[1],q[3]*=J[1],J[2]<0&&(mt=q[0],q[0]=q[1],q[1]=mt),q[0]*=J[2],q[1]*=J[2]),q[0]+=J[4],q[1]+=J[4],q[2]+=J[5],q[3]+=J[5]}static transform(J,q){return[J[0]*q[0]+J[2]*q[1],J[1]*q[0]+J[3]*q[1],J[0]*q[2]+J[2]*q[3],J[1]*q[2]+J[3]*q[3],J[0]*q[4]+J[2]*q[5]+J[4],J[1]*q[4]+J[3]*q[5]+J[5]]}static applyTransform(J,q){const mt=J[0]*q[0]+J[1]*q[2]+q[4],yt=J[0]*q[1]+J[1]*q[3]+q[5];return[mt,yt]}static applyInverseTransform(J,q){const mt=q[0]*q[3]-q[1]*q[2],yt=(J[0]*q[3]-J[1]*q[2]+q[2]*q[5]-q[4]*q[3])/mt,Zt=(-J[0]*q[1]+J[1]*q[0]+q[4]*q[1]-q[5]*q[0])/mt;return[yt,Zt]}static getAxialAlignedBoundingBox(J,q){const mt=this.applyTransform(J,q),yt=this.applyTransform(J.slice(2,4),q),Zt=this.applyTransform([J[0],J[3]],q),te=this.applyTransform([J[2],J[1]],q);return[Math.min(mt[0],yt[0],Zt[0],te[0]),Math.min(mt[1],yt[1],Zt[1],te[1]),Math.max(mt[0],yt[0],Zt[0],te[0]),Math.max(mt[1],yt[1],Zt[1],te[1])]}static inverseTransform(J){const q=J[0]*J[3]-J[1]*J[2];return[J[3]/q,-J[1]/q,-J[2]/q,J[0]/q,(J[2]*J[5]-J[4]*J[3])/q,(J[4]*J[1]-J[5]*J[0])/q]}static singularValueDecompose2dScale(J){const q=[J[0],J[2],J[1],J[3]],mt=J[0]*q[0]+J[1]*q[2],yt=J[0]*q[1]+J[1]*q[3],Zt=J[2]*q[0]+J[3]*q[2],te=J[2]*q[1]+J[3]*q[3],Z=(mt+te)/2,Ct=Math.sqrt((mt+te)**2-4*(mt*te-Zt*yt))/2,Lt=Z+Ct||1,kt=Z-Ct||1;return[Math.sqrt(Lt),Math.sqrt(kt)]}static normalizeRect(J){const q=J.slice(0);return J[0]>J[2]&&(q[0]=J[2],q[2]=J[0]),J[1]>J[3]&&(q[1]=J[3],q[3]=J[1]),q}static intersect(J,q){const mt=Math.max(Math.min(J[0],J[2]),Math.min(q[0],q[2])),yt=Math.min(Math.max(J[0],J[2]),Math.max(q[0],q[2]));if(mt>yt)return null;const Zt=Math.max(Math.min(J[1],J[3]),Math.min(q[1],q[3])),te=Math.min(Math.max(J[1],J[3]),Math.max(q[1],q[3]));return Zt>te?null:[mt,Zt,yt,te]}static bezierBoundingBox(J,q,mt,yt,Zt,te,Z,Ct){const Lt=[],kt=[[],[]];let Ot,Bt,Jt,bt,Yt,Nt,U,s;for(let Q=0;Q<2;++Q){if(Q===0?(Bt=6*J-12*mt+6*Zt,Ot=-3*J+9*mt-9*Zt+3*Z,Jt=3*mt-3*J):(Bt=6*q-12*yt+6*te,Ot=-3*q+9*yt-9*te+3*Ct,Jt=3*yt-3*q),Math.abs(Ot)<1e-12){if(Math.abs(Bt)<1e-12)continue;bt=-Jt/Bt,0<bt&&bt<1&&Lt.push(bt);continue}U=Bt*Bt-4*Jt*Ot,s=Math.sqrt(U),!(U<0)&&(Yt=(-Bt+s)/(2*Ot),0<Yt&&Yt<1&&Lt.push(Yt),Nt=(-Bt-s)/(2*Ot),0<Nt&&Nt<1&&Lt.push(Nt))}let S=Lt.length,H;const X=S;for(;S--;)bt=Lt[S],H=1-bt,kt[0][S]=H*H*H*J+3*H*H*bt*mt+3*H*bt*bt*Zt+bt*bt*bt*Z,kt[1][S]=H*H*H*q+3*H*H*bt*yt+3*H*bt*bt*te+bt*bt*bt*Ct;return kt[0][X]=J,kt[1][X]=q,kt[0][X+1]=Z,kt[1][X+1]=Ct,kt[0].length=kt[1].length=X+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}t.Util=Et;const It=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(ct){if(ct[0]>="ï"){let q;if(ct[0]==="þ"&&ct[1]==="ÿ"?q="utf-16be":ct[0]==="ÿ"&&ct[1]==="þ"?q="utf-16le":ct[0]==="ï"&&ct[1]==="»"&&ct[2]==="¿"&&(q="utf-8"),q)try{const mt=new TextDecoder(q,{fatal:!0}),yt=tt(ct);return mt.decode(yt)}catch(mt){lt(`stringToPDFString: "${mt}".`)}}const J=[];for(let q=0,mt=ct.length;q<mt;q++){const yt=It[ct.charCodeAt(q)];J.push(yt?String.fromCharCode(yt):ct.charAt(q))}return J.join("")}function nt(ct){return decodeURIComponent(escape(ct))}function it(ct){return unescape(encodeURIComponent(ct))}function ft(ct){return typeof ct=="object"&&(ct==null?void 0:ct.byteLength)!==void 0}function Tt(ct,J){if(ct.length!==J.length)return!1;for(let q=0,mt=ct.length;q<mt;q++)if(ct[q]!==J[q])return!1;return!0}function Pt(ct=new Date){return[ct.getUTCFullYear().toString(),(ct.getUTCMonth()+1).toString().padStart(2,"0"),ct.getUTCDate().toString().padStart(2,"0"),ct.getUTCHours().toString().padStart(2,"0"),ct.getUTCMinutes().toString().padStart(2,"0"),ct.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ht{constructor(){j(this,vt,!1);this.promise=new Promise((J,q)=>{this.resolve=mt=>{st(this,vt,!0),J(mt)},this.reject=mt=>{st(this,vt,!0),q(mt)}})}get settled(){return n(this,vt)}}vt=new WeakMap,t.PromiseCapability=Ht;let Vt=null,jt=null;function Gt(ct){return Vt||(Vt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jt=new Map([["ﬅ","ſt"]])),ct.replaceAll(Vt,(J,q,mt)=>q?q.normalize("NFKC"):jt.get(mt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ct=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ct);else for(let J=0;J<32;J++)ct[J]=Math.floor(Math.random()*255);return W(ct)}const zt="pdfjs_internal_id_";t.AnnotationPrefix=zt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var L,o,e,d,he,T,we,_,m,g,N,B,I,P,b,p,Ee,x,F,Be,h,f;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:D}=l,w=y.url?getUrlProp(y.url):null,z=y.data?getDataProp(y.data):null,$=y.httpHeaders||null,M=y.withCredentials===!0,K=y.password??null,rt=y.range instanceof PDFDataRangeTransport?y.range:null,lt=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let G=y.worker instanceof PDFWorker?y.worker:null;const ht=y.verbosity,pt=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,wt=typeof y.cMapUrl=="string"?y.cMapUrl:null,St=y.cMapPacked!==!1,C=y.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,a=y.StandardFontDataFactory||DefaultStandardFontDataFactory,r=y.stopAtErrors!==!0,c=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,u=y.isEvalSupported!==!1,v=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,R=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,W=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,tt=y.fontExtraProperties===!0,et=y.enableXfa===!0,ot=y.ownerDocument||globalThis.document,dt=y.disableRange===!0,At=y.disableStream===!0,ut=y.disableAutoFetch===!0,Ft=y.pdfBug===!0,Ut=rt?rt.length:y.length??NaN,Et=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!W,It=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:C===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&wt&&i&&(0,_display_utils.isValidFetchUrl)(wt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),gt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),nt=y.filterFactory||new DefaultFilterFactory({docId:D,ownerDocument:ot}),it=null;(0,_util.setVerbosityLevel)(ht);const ft={canvasFactory:gt,filterFactory:nt};if(It||(ft.cMapReaderFactory=new C({baseUrl:wt,isCompressed:St}),ft.standardFontDataFactory=new a({baseUrl:i})),!G){const Ht={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};G=Ht.port?PDFWorker.fromPort(Ht):new PDFWorker(Ht),l._worker=G}const Tt={docId:D,apiVersion:"3.11.174",data:z,password:K,disableAutoFetch:ut,rangeChunkSize:lt,length:Ut,docBaseUrl:pt,enableXfa:et,evaluatorOptions:{maxImageSize:c,disableFontFace:W,ignoreErrors:r,isEvalSupported:u,isOffscreenCanvasSupported:v,canvasMaxAreaInBytes:R,fontExtraProperties:tt,useSystemFonts:Et,cMapUrl:It?wt:null,standardFontDataUrl:It?i:null}},Pt={ignoreErrors:r,isEvalSupported:u,disableFontFace:W,fontExtraProperties:tt,enableXfa:et,ownerDocument:ot,disableAutoFetch:ut,pdfBug:Ft,styleElement:it};return G.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const Ht=_fetchDocument(G,Tt),Vt=new Promise(function(jt){let Gt;rt?Gt=new _transport_stream.PDFDataTransportStream({length:Ut,initialData:rt.initialData,progressiveDone:rt.progressiveDone,contentDispositionFilename:rt.contentDispositionFilename,disableRange:dt,disableStream:At},rt):z||(Gt=(zt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(zt):(0,_display_utils.isValidFetchUrl)(zt.url)?new _displayFetch_stream.PDFFetchStream(zt):new _displayNetwork.PDFNetworkStream(zt))({url:w,length:Ut,httpHeaders:$,withCredentials:M,rangeChunkSize:lt,disableRange:dt,disableStream:At})),jt(Gt)});return Promise.all([Ht,Vt]).then(function([jt,Gt]){if(l.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(D,jt,G.port),zt=new WorkerTransport($t,l,Gt,Pt,ft);l._transport=zt,$t.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(y,l){if(y.destroyed)throw new Error("Worker was destroyed");const D=await y.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return D}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(t,L)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,D,w;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((D=this._transport)==null?void 0:D.destroy())}catch(z){throw(w=this._worker)!=null&&w.port&&delete this._worker._pendingDestroy,z}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;L=new WeakMap,j(PDFDocumentLoadingTask,L,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,D,w=!1,z=null){this.length=l,this.initialData=D,this.progressiveDone=w,this.contentDispositionFilename=z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,D){for(const w of this._rangeListeners)w(l,D)}onDataProgress(l,D){this._readyCapability.promise.then(()=>{for(const w of this._progressListeners)w(l,D)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,D){this._pdfInfo=l,this._transport=D,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(w=>{if(!w)return w;const z=[];for(const $ in w)z.push(...w[$]);return z}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,D,w,z=!1){j(this,d);j(this,T);j(this,o,null);j(this,e,!1);this._pageIndex=l,this._pageInfo=D,this._transport=w,this._stats=z?new _display_utils.StatTimer:null,this._pdfBug=z,this.commonObjs=w.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:D=this.rotate,offsetX:w=0,offsetY:z=0,dontFlip:$=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:D,offsetX:w,offsetY:z,dontFlip:$})}getAnnotations({intent:l="display"}={}){const D=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,D.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:D,intent:w="display",annotationMode:z=_util.AnnotationMode.ENABLE,transform:$=null,background:M=null,optionalContentConfigPromise:K=null,annotationCanvasMap:rt=null,pageColors:lt=null,printAnnotationStorage:G=null}){var a,r;(a=this._stats)==null||a.time("Overall");const ht=this._transport.getRenderingIntent(w,z,G);st(this,e,!1),Y(this,T,we).call(this),K||(K=this._transport.getOptionalContentConfig());let pt=this._intentStates.get(ht.cacheKey);pt||(pt=Object.create(null),this._intentStates.set(ht.cacheKey,pt)),pt.streamReaderCancelTimeout&&(clearTimeout(pt.streamReaderCancelTimeout),pt.streamReaderCancelTimeout=null);const wt=!!(ht.renderingIntent&_util.RenderingIntentFlag.PRINT);pt.displayReadyCapability||(pt.displayReadyCapability=new _util.PromiseCapability,pt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(r=this._stats)==null||r.time("Page Request"),this._pumpOperatorList(ht));const St=c=>{var u,v;pt.renderTasks.delete(C),(this._maybeCleanupAfterRender||wt)&&st(this,e,!0),Y(this,d,he).call(this,!wt),c?(C.capability.reject(c),this._abortOperatorList({intentState:pt,reason:c instanceof Error?c:new Error(c)})):C.capability.resolve(),(u=this._stats)==null||u.timeEnd("Rendering"),(v=this._stats)==null||v.timeEnd("Overall")},C=new InternalRenderTask({callback:St,params:{canvasContext:l,viewport:D,transform:$,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:pt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!wt,pdfBug:this._pdfBug,pageColors:lt});(pt.renderTasks||(pt.renderTasks=new Set)).add(C);const i=C.task;return Promise.all([pt.displayReadyCapability.promise,K]).then(([c,u])=>{var v;if(this.destroyed){St();return}(v=this._stats)==null||v.time("Rendering"),C.initializeGraphics({transparency:c,optionalContentConfig:u}),C.operatorListChanged()}).catch(St),i}getOperatorList({intent:l="display",annotationMode:D=_util.AnnotationMode.ENABLE,printAnnotationStorage:w=null}={}){var rt;function z(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(K))}const $=this._transport.getRenderingIntent(l,D,w,!0);let M=this._intentStates.get($.cacheKey);M||(M=Object.create(null),this._intentStates.set($.cacheKey,M));let K;return M.opListReadCapability||(K=Object.create(null),K.operatorListChanged=z,M.opListReadCapability=new _util.PromiseCapability,(M.renderTasks||(M.renderTasks=new Set)).add(K),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList($)),M.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:D===!0},{highWaterMark:100,size(z){return z.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(w=>_xfa_text.XfaText.textContent(w));const D=this.streamTextContent(l);return new Promise(function(w,z){function $(){M.read().then(function({value:rt,done:lt}){if(lt){w(K);return}Object.assign(K.styles,rt.styles),K.items.push(...rt.items),$()},z)}const M=D.getReader(),K={items:[],styles:Object.create(null)};$()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const w of D.renderTasks)l.push(w.completed),w.cancel();return this.objs.clear(),st(this,e,!1),Y(this,T,we).call(this),Promise.all(l)}cleanup(l=!1){st(this,e,!0);const D=Y(this,d,he).call(this,!1);return l&&D&&this._stats&&(this._stats=new _display_utils.StatTimer),D}_startRenderPage(l,D){var z,$;const w=this._intentStates.get(D);w&&((z=this._stats)==null||z.timeEnd("Page Request"),($=w.displayReadyCapability)==null||$.resolve(l))}_renderPageChunk(l,D){for(let w=0,z=l.length;w<z;w++)D.operatorList.fnArray.push(l.fnArray[w]),D.operatorList.argsArray.push(l.argsArray[w]);D.operatorList.lastChunk=l.lastChunk,D.operatorList.separateAnnots=l.separateAnnots;for(const w of D.renderTasks)w.operatorListChanged();l.lastChunk&&Y(this,d,he).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:D,annotationStorageSerializable:w}){const{map:z,transfers:$}=w,K=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:D,annotationStorage:z},$).getReader(),rt=this._intentStates.get(D);rt.streamReader=K;const lt=()=>{K.read().then(({value:G,done:ht})=>{if(ht){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(G,rt),lt())},G=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const ht of rt.renderTasks)ht.operatorListChanged();Y(this,d,he).call(this,!0)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject(G);else if(rt.opListReadCapability)rt.opListReadCapability.reject(G);else throw G}})};lt()}_abortOperatorList({intentState:l,reason:D,force:w=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!w){if(l.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let z=RENDERING_CANCELLED_TIMEOUT;D.extraDelay>0&&D.extraDelay<1e3&&(z+=D.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:D,force:!0})},z);return}}if(l.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[z,$]of this._intentStates)if($===l){this._intentStates.delete(z);break}this.cleanup()}}}get stats(){return this._stats}}o=new WeakMap,e=new WeakMap,d=new WeakSet,he=function(l=!1){if(Y(this,T,we).call(this),!n(this,e)||this.destroyed)return!1;if(l)return st(this,o,setTimeout(()=>{st(this,o,null),Y(this,d,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:D,operatorList:w}of this._intentStates.values())if(D.size>0||!w.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),st(this,e,!1),!0},T=new WeakSet,we=function(){n(this,o)&&(clearTimeout(n(this,o)),st(this,o,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){j(this,_,new Set);j(this,m,Promise.resolve())}postMessage(l,D){const w={data:structuredClone(l,D?{transfer:D}:null)};n(this,m).then(()=>{for(const z of n(this,_))z.call(this,w)})}addEventListener(l,D){n(this,_).add(D)}removeEventListener(l,D){n(this,_).delete(D)}terminate(){n(this,_).clear()}}_=new WeakMap,m=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(g=document==null?void 0:document.currentScript)==null?void 0:g.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,l){let D;try{if(D=new URL(y),!D.origin||D.origin==="null")return!1}catch{return!1}const w=new URL(l,D);return D.origin===w.origin},PDFWorkerUtil.createCDNWrapper=function(y){const l=`importScripts("${y}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class{constructor({name:y=null,port:l=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){var w;if(this.name=y,this.destroyed=!1,this.verbosity=D,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((w=n(_PDFWorker,N))!=null&&w.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(n(_PDFWorker,N)||st(_PDFWorker,N,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const l=new Worker(y),D=new _message_handler.MessageHandler("main","worker",l),w=()=>{l.removeEventListener("error",z),D.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},z=()=>{this._webWorker||w()};l.addEventListener("error",z),D.on("test",M=>{if(l.removeEventListener("error",z),this.destroyed){w();return}M?(this._messageHandler=D,this._port=l,this._webWorker=l,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),l.terminate())}),D.on("ready",M=>{if(l.removeEventListener("error",z),this.destroyed){w();return}try{$()}catch{this._setupFakeWorker()}});const $=()=>{const M=new Uint8Array;D.send("test",M,[M.buffer])};$();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const D=`fake${PDFWorkerUtil.fakeWorkerId++}`,w=new _message_handler.MessageHandler(D+"_worker",D,l);y.setup(w,l);const z=new _message_handler.MessageHandler(D,D+"_worker",l);this._messageHandler=z,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=n(_PDFWorker,N))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var D;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(D=n(this,N))==null?void 0:D.get(y.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;N=new WeakMap,j(PDFWorker,N,void 0),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,D,w,z,$){j(this,p);j(this,B,new Map);j(this,I,new Map);j(this,P,new Map);j(this,b,null);this.messageHandler=l,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:z.ownerDocument,styleElement:z.styleElement}),this._params=z,this.canvasFactory=$.canvasFactory,this.filterFactory=$.filterFactory,this.cMapReaderFactory=$.cMapReaderFactory,this.standardFontDataFactory=$.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=w,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,D=_util.AnnotationMode.ENABLE,w=null,z=!1){let $=_util.RenderingIntentFlag.DISPLAY,M=_annotation_storage.SerializableEmpty;switch(l){case"any":$=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":$=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(D){case _util.AnnotationMode.DISABLE:$+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:$+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:$+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=($&_util.RenderingIntentFlag.PRINT&&w instanceof _annotation_storage.PrintAnnotationStorage?w:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return z&&($+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:$,cacheKey:`${$}_${M.hash}`,annotationStorageSerializable:M}}destroy(){var w;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(w=n(this,b))==null||w.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const z of n(this,I).values())l.push(z._destroy());n(this,I).clear(),n(this,P).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return l.push(D),Promise.all(l).then(()=>{var z;this.commonObjs.clear(),this.fontLoader.clear(),n(this,B).clear(),this.filterFactory.destroy(),(z=this._networkStream)==null||z.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:D}=this;l.on("GetReader",(w,z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=$=>{this._lastProgress={loaded:$.loaded,total:$.total}},z.onPull=()=>{this._fullReader.read().then(function({value:$,done:M}){if(M){z.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array($),1,[$])}).catch($=>{z.error($)})},z.onCancel=$=>{this._fullReader.cancel($),z.ready.catch(M=>{if(!this.destroyed)throw M})}}),l.on("ReaderHeadersReady",w=>{const z=new _util.PromiseCapability,$=this._fullReader;return $.headersReady.then(()=>{var M;(!$.isStreamingSupported||!$.isRangeSupported)&&(this._lastProgress&&((M=D.onProgress)==null||M.call(D,this._lastProgress)),$.onProgress=K=>{var rt;(rt=D.onProgress)==null||rt.call(D,{loaded:K.loaded,total:K.total})}),z.resolve({isStreamingSupported:$.isStreamingSupported,isRangeSupported:$.isRangeSupported,contentLength:$.contentLength})},z.reject),z.promise}),l.on("GetRangeReader",(w,z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const $=this._networkStream.getRangeReader(w.begin,w.end);if(!$){z.close();return}z.onPull=()=>{$.read().then(function({value:M,done:K}){if(K){z.close();return}(0,_util.assert)(M instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{z.error(M)})},z.onCancel=M=>{$.cancel(M),z.ready.catch(K=>{if(!this.destroyed)throw K})}}),l.on("GetDoc",({pdfInfo:w})=>{this._numPages=w.numPages,this._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(w,this))}),l.on("DocException",function(w){let z;switch(w.name){case"PasswordException":z=new _util.PasswordException(w.message,w.code);break;case"InvalidPDFException":z=new _util.InvalidPDFException(w.message);break;case"MissingPDFException":z=new _util.MissingPDFException(w.message);break;case"UnexpectedResponseException":z=new _util.UnexpectedResponseException(w.message,w.status);break;case"UnknownErrorException":z=new _util.UnknownErrorException(w.message,w.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(z)}),l.on("PasswordRequest",w=>{if(st(this,b,new _util.PromiseCapability),D.onPassword){const z=$=>{$ instanceof Error?n(this,b).reject($):n(this,b).resolve({password:$})};try{D.onPassword(z,w.code)}catch($){n(this,b).reject($)}}else n(this,b).reject(new _util.PasswordException(w.message,w.code));return n(this,b).promise}),l.on("DataLoaded",w=>{var z;(z=D.onProgress)==null||z.call(D,{loaded:w.length,total:w.length}),this.downloadInfoCapability.resolve(w)}),l.on("StartRenderPage",w=>{if(this.destroyed)return;n(this,I).get(w.pageIndex)._startRenderPage(w.transparency,w.cacheKey)}),l.on("commonobj",([w,z,$])=>{var M;if(!this.destroyed&&!this.commonObjs.has(w))switch(z){case"Font":const K=this._params;if("error"in $){const G=$.error;(0,_util.warn)(`Error during font loading: ${G}`),this.commonObjs.resolve(w,G);break}const rt=K.pdfBug&&((M=globalThis.FontInspector)!=null&&M.enabled)?(G,ht)=>globalThis.FontInspector.fontAdded(G,ht):null,lt=new _font_loader.FontFaceObject($,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,inspectFont:rt});this.fontLoader.bind(lt).catch(G=>l.sendWithPromise("FontFallback",{id:w})).finally(()=>{!K.fontExtraProperties&&lt.data&&(lt.data=null),this.commonObjs.resolve(w,lt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(w,$);break;default:throw new Error(`Got unknown common object type ${z}`)}}),l.on("obj",([w,z,$,M])=>{var rt;if(this.destroyed)return;const K=n(this,I).get(z);if(!K.objs.has(w))switch($){case"Image":if(K.objs.resolve(w,M),M){let lt;if(M.bitmap){const{width:G,height:ht}=M;lt=G*ht*4}else lt=((rt=M.data)==null?void 0:rt.length)||0;lt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(K._maybeCleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(w,M);break;default:throw new Error(`Got unknown object type ${$}`)}}),l.on("DocProgress",w=>{var z;this.destroyed||(z=D.onProgress)==null||z.call(D,{loaded:w.loaded,total:w.total})}),l.on("FetchBuiltInCMap",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(w):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(w):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var w;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:D}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((w=this._fullReader)==null?void 0:w.filename)??null},D).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=l-1,w=n(this,P).get(D);if(w)return w;const z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then($=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(D,$,this,this._params.pdfBug);return n(this,I).set(D,M),M});return n(this,P).set(D,z),z}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:D})}getFieldObjects(){return Y(this,p,Ee).call(this,"GetFieldObjects")}hasJSActions(){return Y(this,p,Ee).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Y(this,p,Ee).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",D=n(this,B).get(l);if(D)return D;const w=this.messageHandler.sendWithPromise(l,null).then(z=>{var $,M;return{info:z[0],metadata:z[1]?new _metadata.Metadata(z[1]):null,contentDispositionFilename:(($=this._fullReader)==null?void 0:$.filename)??null,contentLength:((M=this._fullReader)==null?void 0:M.contentLength)??null}});return n(this,B).set(l,w),w}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const D of n(this,I).values())if(!D.cleanup())throw new Error(`startCleanup: Page ${D.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),n(this,B).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:D}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:D})}}B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakSet,Ee=function(l,D=null){const w=n(this,B).get(l);if(w)return w;const z=this.messageHandler.sendWithPromise(l,D);return n(this,B).set(l,z),z};class PDFObjects{constructor(){j(this,F);j(this,x,Object.create(null))}get(l,D=null){if(D){const z=Y(this,F,Be).call(this,l);return z.capability.promise.then(()=>D(z.data)),null}const w=n(this,x)[l];if(!(w!=null&&w.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return w.data}has(l){const D=n(this,x)[l];return(D==null?void 0:D.capability.settled)||!1}resolve(l,D=null){const w=Y(this,F,Be).call(this,l);w.data=D,w.capability.resolve()}clear(){var l;for(const D in n(this,x)){const{data:w}=n(this,x)[D];(l=w==null?void 0:w.bitmap)==null||l.close()}st(this,x,Object.create(null))}}x=new WeakMap,F=new WeakSet,Be=function(l){var D;return(D=n(this,x))[l]||(D[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){j(this,h,null);st(this,h,l),this.onContinue=null}get promise(){return n(this,h).capability.promise}cancel(l=0){n(this,h).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=n(this,h).operatorList;if(!l)return!1;const{annotationCanvasMap:D}=n(this,h);return l.form||l.canvas&&(D==null?void 0:D.size)>0}}h=new WeakMap,exports.RenderTask=RenderTask;const O=class{constructor({callback:l,params:D,objs:w,commonObjs:z,annotationCanvasMap:$,operatorList:M,pageIndex:K,canvasFactory:rt,filterFactory:lt,useRequestAnimationFrame:G=!1,pdfBug:ht=!1,pageColors:pt=null}){this.callback=l,this.params=D,this.objs=w,this.commonObjs=z,this.annotationCanvasMap=$,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=K,this.canvasFactory=rt,this.filterFactory=lt,this._pdfBug=ht,this.pageColors=pt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=G===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:D}){var K,rt;if(this.cancelled)return;if(this._canvas){if(n(O,f).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n(O,f).add(this._canvas)}this._pdfBug&&((K=globalThis.StepperManager)!=null&&K.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:w,viewport:z,transform:$,background:M}=this.params;this.gfx=new _canvas.CanvasGraphics(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:$,viewport:z,transparency:l,background:M}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(l=null,D=0){var w;this.running=!1,this.cancelled=!0,(w=this.gfx)==null||w.endDrawing(),n(O,f).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,D))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n(O,f).delete(this._canvas),this.callback())))}};let InternalRenderTask=O;f=new WeakMap,j(InternalRenderTask,f,new WeakSet);const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(L,t,o)=>{var m,g,N,vn,I;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=o(1),d=o(4),E=o(8);const T=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=T;class V{constructor(){j(this,N);j(this,m,!1);j(this,g,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(b,p){const A=n(this,g).get(b);return A===void 0?p:Object.assign(p,A)}getRawValue(b){return n(this,g).get(b)}remove(b){if(n(this,g).delete(b),n(this,g).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of n(this,g).values())if(p instanceof d.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(b,p){const A=n(this,g).get(b);let x=!1;if(A!==void 0)for(const[F,k]of Object.entries(p))A[F]!==k&&(x=!0,A[F]=k);else x=!0,n(this,g).set(b,p);x&&Y(this,N,vn).call(this),p instanceof d.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(b){return n(this,g).has(b)}getAll(){return n(this,g).size>0?(0,e.objectFromMap)(n(this,g)):null}setAll(b){for(const[p,A]of Object.entries(b))this.setValue(p,A)}get size(){return n(this,g).size}resetModified(){n(this,m)&&(st(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _(this)}get serializable(){if(n(this,g).size===0)return T;const b=new Map,p=new E.MurmurHash3_64,A=[],x=Object.create(null);let F=!1;for(const[k,h]of n(this,g)){const f=h instanceof d.AnnotationEditor?h.serialize(!1,x):h;f&&(b.set(k,f),p.update(`${k}:${JSON.stringify(f)}`),F||(F=!!f.bitmap))}if(F)for(const k of b.values())k.bitmap&&A.push(k.bitmap);return b.size>0?{map:b,hash:p.hexdigest(),transfers:A}:T}}m=new WeakMap,g=new WeakMap,N=new WeakSet,vn=function(){n(this,m)||(st(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=V;class _ extends V{constructor(p){super();j(this,I,void 0);const{map:A,hash:x,transfers:F}=p.serializable,k=structuredClone(A,F?{transfer:F}:null);st(this,I,{map:k,hash:x,transfers:F})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return n(this,I)}}I=new WeakMap,t.PrintAnnotationStorage=_},(L,t,o)=>{var _,m,g,N,B,I,P,b,p,A,x,F,k,h,f,Ue,y,He,D,je,z,We,M,yn,rt,Sn,G,wn,pt,ze,St,En;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=o(5),d=o(1),E=o(6);const i=class{constructor(r){j(this,f);j(this,y);j(this,z);j(this,M);j(this,rt);j(this,G);j(this,pt);j(this,St);j(this,_,"");j(this,m,!1);j(this,g,null);j(this,N,null);j(this,B,null);j(this,I,!1);j(this,P,null);j(this,b,this.focusin.bind(this));j(this,p,this.focusout.bind(this));j(this,A,!1);j(this,x,!1);j(this,F,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);j(this,k,!1);j(this,h,i._zIndex++);this.constructor===i&&(0,d.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=r.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:u,pageHeight:v,pageX:R,pageY:W}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,v],this.pageTranslation=[R,W];const[tt,et]=this.parentDimensions;this.x=r.x/tt,this.y=r.y/et,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,d.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(r){const c=new V({id:r.parent.getNextId(),parent:r.parent,uiManager:r._uiManager});c.annotationElementId=r.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(r,c=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(v=>[v,r.get(v)]))),c!=null&&c.strings)for(const v of c.strings)i._l10nPromise.set(v,r.get(v));if(i._borderLineWidth!==-1)return;const u=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}static updateDefaultParams(r,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(r){return!1}static paste(r,c){(0,d.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return n(this,k)}set _isDraggable(r){var c;st(this,k,r),(c=this.div)==null||c.classList.toggle("draggable",r)}center(){const[r,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(r*2),this.y+=this.width*r/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(r*2),this.y-=this.width*r/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=n(this,h)}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){this._focusEventsAllowed&&(n(this,A)?st(this,A,!1):this.parent.setSelected(this))}focusout(r){var u;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=r.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(r.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(r,c,u,v){const[R,W]=this.parentDimensions;[u,v]=this.screenToPageTranslation(u,v),this.x=(r+u)/R,this.y=(c+v)/W,this.fixAndSetPosition()}translate(r,c){Y(this,f,Ue).call(this,this.parentDimensions,r,c)}translateInPage(r,c){Y(this,f,Ue).call(this,this.pageDimensions,r,c),this.div.scrollIntoView({block:"nearest"})}drag(r,c){const[u,v]=this.parentDimensions;if(this.x+=r/u,this.y+=c/v,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:dt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,dt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:R,y:W}=this;const[tt,et]=Y(this,y,He).call(this);R+=tt,W+=et,this.div.style.left=`${(100*R).toFixed(2)}%`,this.div.style.top=`${(100*W).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[r,c]=this.pageDimensions;let{x:u,y:v,width:R,height:W}=this;switch(R*=r,W*=c,u*=r,v*=c,this.rotation){case 0:u=Math.max(0,Math.min(r-R,u)),v=Math.max(0,Math.min(c-W,v));break;case 90:u=Math.max(0,Math.min(r-W,u)),v=Math.min(c,Math.max(R,v));break;case 180:u=Math.min(r,Math.max(R,u)),v=Math.min(c,Math.max(W,v));break;case 270:u=Math.min(r,Math.max(W,u)),v=Math.max(0,Math.min(c-R,v));break}this.x=u/=r,this.y=v/=c;const[tt,et]=Y(this,y,He).call(this);u+=tt,v+=et;const{style:ot}=this.div;ot.left=`${(100*u).toFixed(2)}%`,ot.top=`${(100*v).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(r,c){var u;return Y(u=i,D,je).call(u,r,c,this.parentRotation)}pageTranslationToScreen(r,c){var u;return Y(u=i,D,je).call(u,r,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:r,pageDimensions:[c,u]}=this,v=c*r,R=u*r;return d.FeatureTest.isCSSRoundSupported?[Math.round(v),Math.round(R)]:[v,R]}setDims(r,c){var R;const[u,v]=this.parentDimensions;this.div.style.width=`${(100*r/u).toFixed(2)}%`,n(this,I)||(this.div.style.height=`${(100*c/v).toFixed(2)}%`),(R=n(this,g))==null||R.classList.toggle("small",r<i.SMALL_EDITOR_SIZE||c<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:r}=this.div,{height:c,width:u}=r,v=u.endsWith("%"),R=!n(this,I)&&c.endsWith("%");if(v&&R)return;const[W,tt]=this.parentDimensions;v||(r.width=`${(100*parseFloat(u)/W).toFixed(2)}%`),!n(this,I)&&!R&&(r.height=`${(100*parseFloat(c)/tt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(n(this,g))return;const r=st(this,g,document.createElement("button"));r.className="altText";const c=await i._l10nPromise.get("editor_alt_text_button_label");r.textContent=c,r.setAttribute("aria-label",c),r.tabIndex="0",r.addEventListener("contextmenu",E.noContextMenu),r.addEventListener("pointerdown",u=>u.stopPropagation()),r.addEventListener("click",u=>{u.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),r.addEventListener("keydown",u=>{u.target===r&&u.key==="Enter"&&(u.preventDefault(),this._uiManager.editAltText(this))}),Y(this,pt,ze).call(this),this.div.append(r),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(r.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:n(this,_),decorative:n(this,m)}}set altTextData({altText:r,decorative:c}){n(this,_)===r&&n(this,m)===c||(st(this,_,r),st(this,m,c),Y(this,pt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",n(this,b)),this.div.addEventListener("focusout",n(this,p));const[r,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/r).toFixed(2)}%`,this.div.style.maxHeight=`${(100*r/c).toFixed(2)}%`);const[u,v]=this.getInitialTranslation();return this.translate(u,v),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(r){const{isMac:c}=d.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&c){r.preventDefault();return}st(this,A,!0),Y(this,St,En).call(this,r)}moveInDOM(){var r;(r=this.parent)==null||r.moveEditorInDOM(this)}_setParentAndPosition(r,c,u){r.changeParent(this),this.x=c,this.y=u,this.fixAndSetPosition()}getRect(r,c){const u=this.parentScale,[v,R]=this.pageDimensions,[W,tt]=this.pageTranslation,et=r/u,ot=c/u,dt=this.x*v,At=this.y*R,ut=this.width*v,Ft=this.height*R;switch(this.rotation){case 0:return[dt+et+W,R-At-ot-Ft+tt,dt+et+ut+W,R-At-ot+tt];case 90:return[dt+ot+W,R-At+et+tt,dt+ot+Ft+W,R-At+et+ut+tt];case 180:return[dt-et-ut+W,R-At+ot+tt,dt-et+W,R-At+ot+Ft+tt];case 270:return[dt-ot-Ft+W,R-At-et-ut+tt,dt-ot+W,R-At-et+tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,c){const[u,v,R,W]=r,tt=R-u,et=W-v;switch(this.rotation){case 0:return[u,c-W,tt,et];case 90:return[u,c-v,et,tt];case 180:return[R,c-v,tt,et];case 270:return[R,c-W,et,tt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){st(this,F,!0)}disableEditMode(){st(this,F,!1)}isInEditMode(){return n(this,F)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var r,c;(r=this.div)==null||r.addEventListener("focusin",n(this,b)),(c=this.div)==null||c.addEventListener("focusout",n(this,p))}serialize(r=!1,c=null){(0,d.unreachable)("An editor must be serializable")}static deserialize(r,c,u){const v=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:u});v.rotation=r.rotation;const[R,W]=v.pageDimensions,[tt,et,ot,dt]=v.getRectInCurrentCoords(r.rect,W);return v.x=tt/R,v.y=et/W,v.width=ot/R,v.height=dt/W,v}remove(){var r;this.div.removeEventListener("focusin",n(this,b)),this.div.removeEventListener("focusout",n(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(r=n(this,g))==null||r.remove(),st(this,g,null),st(this,N,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Y(this,M,yn).call(this),n(this,P).classList.remove("hidden"))}select(){var r;this.makeResizable(),(r=this.div)==null||r.classList.add("selectedEditor")}unselect(){var r,c,u;(r=n(this,P))==null||r.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(u=this.div)!=null&&u.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(r,c){}disableEditing(){n(this,g)&&(n(this,g).hidden=!0)}enableEditing(){n(this,g)&&(n(this,g).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return n(this,x)}set isEditing(r){st(this,x,r),this.parent&&(r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(r,c){st(this,I,!0);const u=r/c,{style:v}=this.div;v.aspectRatio=u,v.height="auto"}static get MIN_SIZE(){return 16}};let T=i;_=new WeakMap,m=new WeakMap,g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,x=new WeakMap,F=new WeakMap,k=new WeakMap,h=new WeakMap,f=new WeakSet,Ue=function([r,c],u,v){[u,v]=this.screenToPageTranslation(u,v),this.x+=u/r,this.y+=v/c,this.fixAndSetPosition()},y=new WeakSet,He=function(){const[r,c]=this.parentDimensions,{_borderLineWidth:u}=i,v=u/r,R=u/c;switch(this.rotation){case 90:return[-v,R];case 180:return[v,R];case 270:return[v,-R];default:return[-v,-R]}},D=new WeakSet,je=function(r,c,u){switch(u){case 90:return[c,-r];case 180:return[-r,-c];case 270:return[-c,r];default:return[r,c]}},z=new WeakSet,We=function(r){switch(r){case 90:{const[c,u]=this.pageDimensions;return[0,-c/u,u/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,u]=this.pageDimensions;return[0,c/u,-u/c,0]}default:return[1,0,0,1]}},M=new WeakSet,yn=function(){if(n(this,P))return;st(this,P,document.createElement("div")),n(this,P).classList.add("resizers");const r=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||r.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of r){const u=document.createElement("div");n(this,P).append(u),u.classList.add("resizer",c),u.addEventListener("pointerdown",Y(this,rt,Sn).bind(this,c)),u.addEventListener("contextmenu",E.noContextMenu)}this.div.prepend(n(this,P))},rt=new WeakSet,Sn=function(r,c){c.preventDefault();const{isMac:u}=d.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&u)return;const v=Y(this,G,wn).bind(this,r),R=this._isDraggable;this._isDraggable=!1;const W={passive:!0,capture:!0};window.addEventListener("pointermove",v,W);const tt=this.x,et=this.y,ot=this.width,dt=this.height,At=this.parent.div.style.cursor,ut=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const Ft=()=>{this._isDraggable=R,window.removeEventListener("pointerup",Ft),window.removeEventListener("blur",Ft),window.removeEventListener("pointermove",v,W),this.parent.div.style.cursor=At,this.div.style.cursor=ut;const Ut=this.x,Et=this.y,It=this.width,gt=this.height;Ut===tt&&Et===et&&It===ot&&gt===dt||this.addCommands({cmd:()=>{this.width=It,this.height=gt,this.x=Ut,this.y=Et;const[nt,it]=this.parentDimensions;this.setDims(nt*It,it*gt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=dt,this.x=tt,this.y=et;const[nt,it]=this.parentDimensions;this.setDims(nt*ot,it*dt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ft),window.addEventListener("blur",Ft)},G=new WeakSet,wn=function(r,c){const[u,v]=this.parentDimensions,R=this.x,W=this.y,tt=this.width,et=this.height,ot=i.MIN_SIZE/u,dt=i.MIN_SIZE/v,At=mt=>Math.round(mt*1e4)/1e4,ut=Y(this,z,We).call(this,this.rotation),Ft=(mt,yt)=>[ut[0]*mt+ut[2]*yt,ut[1]*mt+ut[3]*yt],Ut=Y(this,z,We).call(this,360-this.rotation),Et=(mt,yt)=>[Ut[0]*mt+Ut[2]*yt,Ut[1]*mt+Ut[3]*yt];let It,gt,nt=!1,it=!1;switch(r){case"topLeft":nt=!0,It=(mt,yt)=>[0,0],gt=(mt,yt)=>[mt,yt];break;case"topMiddle":It=(mt,yt)=>[mt/2,0],gt=(mt,yt)=>[mt/2,yt];break;case"topRight":nt=!0,It=(mt,yt)=>[mt,0],gt=(mt,yt)=>[0,yt];break;case"middleRight":it=!0,It=(mt,yt)=>[mt,yt/2],gt=(mt,yt)=>[0,yt/2];break;case"bottomRight":nt=!0,It=(mt,yt)=>[mt,yt],gt=(mt,yt)=>[0,0];break;case"bottomMiddle":It=(mt,yt)=>[mt/2,yt],gt=(mt,yt)=>[mt/2,0];break;case"bottomLeft":nt=!0,It=(mt,yt)=>[0,yt],gt=(mt,yt)=>[mt,0];break;case"middleLeft":it=!0,It=(mt,yt)=>[0,yt/2],gt=(mt,yt)=>[mt,yt/2];break}const ft=It(tt,et),Tt=gt(tt,et);let Pt=Ft(...Tt);const Ht=At(R+Pt[0]),Vt=At(W+Pt[1]);let jt=1,Gt=1,[$t,zt]=this.screenToPageTranslation(c.movementX,c.movementY);if([$t,zt]=Et($t/u,zt/v),nt){const mt=Math.hypot(tt,et);jt=Gt=Math.max(Math.min(Math.hypot(Tt[0]-ft[0]-$t,Tt[1]-ft[1]-zt)/mt,1/tt,1/et),ot/tt,dt/et)}else it?jt=Math.max(ot,Math.min(1,Math.abs(Tt[0]-ft[0]-$t)))/tt:Gt=Math.max(dt,Math.min(1,Math.abs(Tt[1]-ft[1]-zt)))/et;const vt=At(tt*jt),ct=At(et*Gt);Pt=Ft(...gt(vt,ct));const J=Ht-Pt[0],q=Vt-Pt[1];this.width=vt,this.height=ct,this.x=J,this.y=q,this.setDims(u*vt,v*ct),this.fixAndSetPosition()},pt=new WeakSet,ze=async function(){var u;const r=n(this,g);if(!r)return;if(!n(this,_)&&!n(this,m)){r.classList.remove("done"),(u=n(this,N))==null||u.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(v=>{r.setAttribute("aria-label",v)});let c=n(this,N);if(!c){st(this,N,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const v=c.id=`alt-text-tooltip-${this.id}`;r.setAttribute("aria-describedby",v);const R=100;r.addEventListener("mouseenter",()=>{st(this,B,setTimeout(()=>{st(this,B,null),n(this,N).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},R))}),r.addEventListener("mouseleave",()=>{var W;clearTimeout(n(this,B)),st(this,B,null),(W=n(this,N))==null||W.classList.remove("show")})}r.classList.add("done"),c.innerText=n(this,m)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):n(this,_),c.parentNode||r.append(c)},St=new WeakSet,En=function(r){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let u,v;c&&(u={passive:!0,capture:!0},v=W=>{const[tt,et]=this.screenToPageTranslation(W.movementX,W.movementY);this._uiManager.dragSelectedEditors(tt,et)},window.addEventListener("pointermove",v,u));const R=()=>{if(window.removeEventListener("pointerup",R),window.removeEventListener("blur",R),c&&window.removeEventListener("pointermove",v,u),st(this,A,!1),!this._uiManager.endDragSession()){const{isMac:W}=d.FeatureTest.platform;r.ctrlKey&&!W||r.shiftKey||r.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",R),window.addEventListener("blur",R)},j(T,D),ee(T,"_borderLineWidth",-1),ee(T,"_colorManager",new e.ColorManager),ee(T,"_zIndex",1),ee(T,"SMALL_EDITOR_SIZE",0),t.AnnotationEditor=T;class V extends T{constructor(r){super(r),this.annotationElementId=r.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(L,t,o)=>{var I,P,b,p,A,Ve,k,h,f,O,y,Cn,w,z,$,M,K,rt,lt,G,ht,pt,wt,St,C,i,a,r,c,u,v,R,W,tt,et,ot,dt,At,ut,Ft,Ut,Et,It,gt,nt,it,ft,Tn,Pt,Ge,Vt,Xe,Gt,Ce,zt,$e,ct,qe,q,re,yt,me,te,Pn,Ct,kn,kt,Ye,Bt,_e,bt,Ke;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=E,t.opacityToHex=T;var e=o(1),d=o(6);function E(U,s,S){for(const H of S)s.addEventListener(H,U[H].bind(U))}function T(U){return Math.round(Math.min(255,Math.max(1,255*U))).toString(16).padStart(2,"0")}class V{constructor(){j(this,I,0)}getId(){return`${e.AnnotationEditorPrefix}${ge(this,I)._++}`}}I=new WeakMap;const F=class{constructor(){j(this,A);j(this,P,(0,e.getUuid)());j(this,b,0);j(this,p,null)}static get _isSVGFittingCanvas(){const s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',H=new OffscreenCanvas(1,3).getContext("2d"),X=new Image;X.src=s;const Q=X.decode().then(()=>(H.drawImage(X,0,0,1,1,0,0,1,3),new Uint32Array(H.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",Q)}async getFromFile(s){const{lastModified:S,name:H,size:X,type:Q}=s;return Y(this,A,Ve).call(this,`${S}_${H}_${X}_${Q}`,s)}async getFromUrl(s){return Y(this,A,Ve).call(this,s,s)}async getFromId(s){n(this,p)||st(this,p,new Map);const S=n(this,p).get(s);return S?S.bitmap?(S.refCounter+=1,S):S.file?this.getFromFile(S.file):this.getFromUrl(S.url):null}getSvgUrl(s){const S=n(this,p).get(s);return S!=null&&S.isSvg?S.svgUrl:null}deleteId(s){n(this,p)||st(this,p,new Map);const S=n(this,p).get(s);S&&(S.refCounter-=1,S.refCounter===0&&(S.bitmap=null))}isValidId(s){return s.startsWith(`image_${n(this,P)}_`)}};let _=F;P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakSet,Ve=async function(s,S){n(this,p)||st(this,p,new Map);let H=n(this,p).get(s);if(H===null)return null;if(H!=null&&H.bitmap)return H.refCounter+=1,H;try{H||(H={bitmap:null,id:`image_${n(this,P)}_${ge(this,b)._++}`,refCounter:0,isSvg:!1});let X;if(typeof S=="string"){H.url=S;const Q=await fetch(S);if(!Q.ok)throw new Error(Q.statusText);X=await Q.blob()}else X=H.file=S;if(X.type==="image/svg+xml"){const Q=F._isSVGFittingCanvas,at=new FileReader,_t=new Image,Mt=new Promise((xt,Xt)=>{_t.onload=()=>{H.bitmap=_t,H.isSvg=!0,xt()},at.onload=async()=>{const Rt=H.svgUrl=at.result;_t.src=await Q?`${Rt}#svgView(preserveAspectRatio(none))`:Rt},_t.onerror=at.onerror=Xt});at.readAsDataURL(X),await Mt}else H.bitmap=await createImageBitmap(X);H.refCounter=1}catch(X){console.error(X),H=null}return n(this,p).set(s,H),H&&n(this,p).set(H.id,H),H};class m{constructor(s=128){j(this,k,[]);j(this,h,!1);j(this,f,void 0);j(this,O,-1);st(this,f,s)}add({cmd:s,undo:S,mustExec:H,type:X=NaN,overwriteIfSameType:Q=!1,keepUndo:at=!1}){if(H&&s(),n(this,h))return;const _t={cmd:s,undo:S,type:X};if(n(this,O)===-1){n(this,k).length>0&&(n(this,k).length=0),st(this,O,0),n(this,k).push(_t);return}if(Q&&n(this,k)[n(this,O)].type===X){at&&(_t.undo=n(this,k)[n(this,O)].undo),n(this,k)[n(this,O)]=_t;return}const Mt=n(this,O)+1;Mt===n(this,f)?n(this,k).splice(0,1):(st(this,O,Mt),Mt<n(this,k).length&&n(this,k).splice(Mt)),n(this,k).push(_t)}undo(){n(this,O)!==-1&&(st(this,h,!0),n(this,k)[n(this,O)].undo(),st(this,h,!1),st(this,O,n(this,O)-1))}redo(){n(this,O)<n(this,k).length-1&&(st(this,O,n(this,O)+1),st(this,h,!0),n(this,k)[n(this,O)].cmd(),st(this,h,!1))}hasSomethingToUndo(){return n(this,O)!==-1}hasSomethingToRedo(){return n(this,O)<n(this,k).length-1}destroy(){st(this,k,null)}}k=new WeakMap,h=new WeakMap,f=new WeakMap,O=new WeakMap,t.CommandManager=m;class g{constructor(s){j(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:S}=e.FeatureTest.platform;for(const[H,X,Q={}]of s)for(const at of H){const _t=at.startsWith("mac+");S&&_t?(this.callbacks.set(at.slice(4),{callback:X,options:Q}),this.allKeys.add(at.split("+").at(-1))):!S&&!_t&&(this.callbacks.set(at,{callback:X,options:Q}),this.allKeys.add(at.split("+").at(-1)))}}exec(s,S){if(!this.allKeys.has(S.key))return;const H=this.callbacks.get(Y(this,y,Cn).call(this,S));if(!H)return;const{callback:X,options:{bubbles:Q=!1,args:at=[],checker:_t=null}}=H;_t&&!_t(s,S)||(X.bind(s,...at)(),Q||(S.stopPropagation(),S.preventDefault()))}}y=new WeakSet,Cn=function(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const S=this.buffer.join("+");return this.buffer.length=0,S},t.KeyboardManager=g;const D=class{get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,d.getColorValues)(s),(0,e.shadow)(this,"_colors",s)}convert(s){const S=(0,d.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return S;for(const[H,X]of this._colors)if(X.every((Q,at)=>Q===S[at]))return D._colorsMapping.get(H);return S}getHexCode(s){const S=this._colors.get(s);return S?e.Util.makeHexColor(...S):s}};let N=D;ee(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=N;const Nt=class{constructor(s,S,H,X,Q,at){j(this,ft);j(this,Pt);j(this,Vt);j(this,Gt);j(this,zt);j(this,ct);j(this,q);j(this,yt);j(this,te);j(this,Ct);j(this,kt);j(this,Bt);j(this,bt);j(this,w,null);j(this,z,new Map);j(this,$,new Map);j(this,M,null);j(this,K,null);j(this,rt,new m);j(this,lt,0);j(this,G,new Set);j(this,ht,null);j(this,pt,null);j(this,wt,new Set);j(this,St,null);j(this,C,new V);j(this,i,!1);j(this,a,!1);j(this,r,null);j(this,c,e.AnnotationEditorType.NONE);j(this,u,new Set);j(this,v,null);j(this,R,this.blur.bind(this));j(this,W,this.focus.bind(this));j(this,tt,this.copy.bind(this));j(this,et,this.cut.bind(this));j(this,ot,this.paste.bind(this));j(this,dt,this.keydown.bind(this));j(this,At,this.onEditingAction.bind(this));j(this,ut,this.onPageChanging.bind(this));j(this,Ft,this.onScaleChanging.bind(this));j(this,Ut,this.onRotationChanging.bind(this));j(this,Et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});j(this,It,[0,0]);j(this,gt,null);j(this,nt,null);j(this,it,null);st(this,nt,s),st(this,it,S),st(this,M,H),this._eventBus=X,this._eventBus._on("editingaction",n(this,At)),this._eventBus._on("pagechanging",n(this,ut)),this._eventBus._on("scalechanging",n(this,Ft)),this._eventBus._on("rotationchanging",n(this,Ut)),st(this,K,Q.annotationStorage),st(this,St,Q.filterFactory),st(this,v,at),this.viewParameters={realScale:d.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const s=Nt.prototype,S=Q=>{const{activeElement:at}=document;return at&&n(Q,nt).contains(at)&&Q.hasSomethingToControl()},H=this.TRANSLATE_SMALL,X=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],s.selectAll],[["ctrl+z","mac+meta+z"],s.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],s.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],s.delete],[["Escape","mac+Escape"],s.unselectAll],[["ArrowLeft","mac+ArrowLeft"],s.translateSelectedEditors,{args:[-H,0],checker:S}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s.translateSelectedEditors,{args:[-X,0],checker:S}],[["ArrowRight","mac+ArrowRight"],s.translateSelectedEditors,{args:[H,0],checker:S}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s.translateSelectedEditors,{args:[X,0],checker:S}],[["ArrowUp","mac+ArrowUp"],s.translateSelectedEditors,{args:[0,-H],checker:S}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s.translateSelectedEditors,{args:[0,-X],checker:S}],[["ArrowDown","mac+ArrowDown"],s.translateSelectedEditors,{args:[0,H],checker:S}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s.translateSelectedEditors,{args:[0,X],checker:S}]]))}destroy(){Y(this,Gt,Ce).call(this),Y(this,Pt,Ge).call(this),this._eventBus._off("editingaction",n(this,At)),this._eventBus._off("pagechanging",n(this,ut)),this._eventBus._off("scalechanging",n(this,Ft)),this._eventBus._off("rotationchanging",n(this,Ut));for(const s of n(this,$).values())s.destroy();n(this,$).clear(),n(this,z).clear(),n(this,wt).clear(),st(this,w,null),n(this,u).clear(),n(this,rt).destroy(),n(this,M).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",n(this,v)?n(this,St).addHCMFilter(n(this,v).foreground,n(this,v).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(n(this,nt)).direction)}editAltText(s){var S;(S=n(this,M))==null||S.editAltText(this,s)}onPageChanging({pageNumber:s}){st(this,lt,s-1)}focusMainContainer(){n(this,nt).focus()}findParent(s,S){for(const H of n(this,$).values()){const{x:X,y:Q,width:at,height:_t}=H.div.getBoundingClientRect();if(s>=X&&s<=X+at&&S>=Q&&S<=Q+_t)return H}return null}disableUserSelect(s=!1){n(this,it).classList.toggle("noUserSelect",s)}addShouldRescale(s){n(this,wt).add(s)}removeShouldRescale(s){n(this,wt).delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*d.PixelsPerInch.PDF_TO_CSS_UNITS;for(const S of n(this,wt))S.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&n(this,K)&&!n(this,K).has(s.id)&&n(this,K).setValue(s.id,s)}blur(){if(!this.hasSelection)return;const{activeElement:s}=document;for(const S of n(this,u))if(S.div.contains(s)){st(this,r,[S,s]),S._focusEventsAllowed=!1;break}}focus(){if(!n(this,r))return;const[s,S]=n(this,r);st(this,r,null),S.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),S.focus()}addEditListeners(){Y(this,Vt,Xe).call(this),Y(this,zt,$e).call(this)}removeEditListeners(){Y(this,Gt,Ce).call(this),Y(this,ct,qe).call(this)}copy(s){var H;if(s.preventDefault(),(H=n(this,w))==null||H.commitOrRemove(),!this.hasSelection)return;const S=[];for(const X of n(this,u)){const Q=X.serialize(!0);Q&&S.push(Q)}S.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(S))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();const{clipboardData:S}=s;for(const Q of S.items)for(const at of n(this,pt))if(at.isHandlingMimeForPasting(Q.type)){at.paste(Q,this.currentLayer);return}let H=S.getData("application/pdfjs");if(!H)return;try{H=JSON.parse(H)}catch(Q){(0,e.warn)(`paste: "${Q.message}".`);return}if(!Array.isArray(H))return;this.unselectAll();const X=this.currentLayer;try{const Q=[];for(const Mt of H){const xt=X.deserialize(Mt);if(!xt)return;Q.push(xt)}const at=()=>{for(const Mt of Q)Y(this,kt,Ye).call(this,Mt);Y(this,bt,Ke).call(this,Q)},_t=()=>{for(const Mt of Q)Mt.remove()};this.addCommands({cmd:at,undo:_t,mustExec:!0})}catch(Q){(0,e.warn)(`paste: "${Q.message}".`)}}keydown(s){var S;(S=this.getActive())!=null&&S.shouldGetKeyboardEvents()||Nt._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}setEditingState(s){s?(Y(this,ft,Tn).call(this),Y(this,Vt,Xe).call(this),Y(this,zt,$e).call(this),Y(this,q,re).call(this,{isEditing:n(this,c)!==e.AnnotationEditorType.NONE,isEmpty:Y(this,Bt,_e).call(this),hasSomethingToUndo:n(this,rt).hasSomethingToUndo(),hasSomethingToRedo:n(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Y(this,Pt,Ge).call(this),Y(this,Gt,Ce).call(this),Y(this,ct,qe).call(this),Y(this,q,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(s){if(!n(this,pt)){st(this,pt,s);for(const S of n(this,pt))Y(this,yt,me).call(this,S.defaultPropertiesToUpdate)}}getId(){return n(this,C).getId()}get currentLayer(){return n(this,$).get(n(this,lt))}getLayer(s){return n(this,$).get(s)}get currentPageIndex(){return n(this,lt)}addLayer(s){n(this,$).set(s.pageIndex,s),n(this,i)?s.enable():s.disable()}removeLayer(s){n(this,$).delete(s.pageIndex)}updateMode(s,S=null){if(n(this,c)!==s){if(st(this,c,s),s===e.AnnotationEditorType.NONE){this.setEditingState(!1),Y(this,Ct,kn).call(this);return}this.setEditingState(!0),Y(this,te,Pn).call(this),this.unselectAll();for(const H of n(this,$).values())H.updateMode(s);if(S){for(const H of n(this,z).values())if(H.annotationElementId===S){this.setSelected(H),H.enterInEditMode();break}}}}updateToolbar(s){s!==n(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,S){if(n(this,pt)){if(s===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(s);return}for(const H of n(this,u))H.updateParams(s,S);for(const H of n(this,pt))H.updateDefaultParams(s,S)}}enableWaiting(s=!1){if(n(this,a)!==s){st(this,a,s);for(const S of n(this,$).values())s?S.disableClick():S.enableClick(),S.div.classList.toggle("waiting",s)}}getEditors(s){const S=[];for(const H of n(this,z).values())H.pageIndex===s&&S.push(H);return S}getEditor(s){return n(this,z).get(s)}addEditor(s){n(this,z).set(s.id,s)}removeEditor(s){var S;n(this,z).delete(s.id),this.unselect(s),(!s.annotationElementId||!n(this,G).has(s.annotationElementId))&&((S=n(this,K))==null||S.remove(s.id))}addDeletedAnnotationElement(s){n(this,G).add(s.annotationElementId),s.deleted=!0}isDeletedAnnotationElement(s){return n(this,G).has(s)}removeDeletedAnnotationElement(s){n(this,G).delete(s.annotationElementId),s.deleted=!1}setActiveEditor(s){n(this,w)!==s&&(st(this,w,s),s&&Y(this,yt,me).call(this,s.propertiesToUpdate))}toggleSelected(s){if(n(this,u).has(s)){n(this,u).delete(s),s.unselect(),Y(this,q,re).call(this,{hasSelectedEditor:this.hasSelection});return}n(this,u).add(s),s.select(),Y(this,yt,me).call(this,s.propertiesToUpdate),Y(this,q,re).call(this,{hasSelectedEditor:!0})}setSelected(s){for(const S of n(this,u))S!==s&&S.unselect();n(this,u).clear(),n(this,u).add(s),s.select(),Y(this,yt,me).call(this,s.propertiesToUpdate),Y(this,q,re).call(this,{hasSelectedEditor:!0})}isSelected(s){return n(this,u).has(s)}unselect(s){s.unselect(),n(this,u).delete(s),Y(this,q,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return n(this,u).size!==0}undo(){n(this,rt).undo(),Y(this,q,re).call(this,{hasSomethingToUndo:n(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Y(this,Bt,_e).call(this)})}redo(){n(this,rt).redo(),Y(this,q,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:n(this,rt).hasSomethingToRedo(),isEmpty:Y(this,Bt,_e).call(this)})}addCommands(s){n(this,rt).add(s),Y(this,q,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Y(this,Bt,_e).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...n(this,u)],S=()=>{for(const X of s)X.remove()},H=()=>{for(const X of s)Y(this,kt,Ye).call(this,X)};this.addCommands({cmd:S,undo:H,mustExec:!0})}commitOrRemove(){var s;(s=n(this,w))==null||s.commitOrRemove()}hasSomethingToControl(){return n(this,w)||this.hasSelection}selectAll(){for(const s of n(this,u))s.commit();Y(this,bt,Ke).call(this,n(this,z).values())}unselectAll(){if(n(this,w)){n(this,w).commitOrRemove();return}if(this.hasSelection){for(const s of n(this,u))s.unselect();n(this,u).clear(),Y(this,q,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(s,S,H=!1){if(H||this.commitOrRemove(),!this.hasSelection)return;n(this,It)[0]+=s,n(this,It)[1]+=S;const[X,Q]=n(this,It),at=[...n(this,u)],_t=1e3;n(this,gt)&&clearTimeout(n(this,gt)),st(this,gt,setTimeout(()=>{st(this,gt,null),n(this,It)[0]=n(this,It)[1]=0,this.addCommands({cmd:()=>{for(const Mt of at)n(this,z).has(Mt.id)&&Mt.translateInPage(X,Q)},undo:()=>{for(const Mt of at)n(this,z).has(Mt.id)&&Mt.translateInPage(-X,-Q)},mustExec:!1})},_t));for(const Mt of at)Mt.translateInPage(s,S)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),st(this,ht,new Map);for(const s of n(this,u))n(this,ht).set(s,{savedX:s.x,savedY:s.y,savedPageIndex:s.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!n(this,ht))return!1;this.disableUserSelect(!1);const s=n(this,ht);st(this,ht,null);let S=!1;for(const[{x:X,y:Q,pageIndex:at},_t]of s)_t.newX=X,_t.newY=Q,_t.newPageIndex=at,S||(S=X!==_t.savedX||Q!==_t.savedY||at!==_t.savedPageIndex);if(!S)return!1;const H=(X,Q,at,_t)=>{if(n(this,z).has(X.id)){const Mt=n(this,$).get(_t);Mt?X._setParentAndPosition(Mt,Q,at):(X.pageIndex=_t,X.x=Q,X.y=at)}};return this.addCommands({cmd:()=>{for(const[X,{newX:Q,newY:at,newPageIndex:_t}]of s)H(X,Q,at,_t)},undo:()=>{for(const[X,{savedX:Q,savedY:at,savedPageIndex:_t}]of s)H(X,Q,at,_t)},mustExec:!0}),!0}dragSelectedEditors(s,S){if(n(this,ht))for(const H of n(this,ht).keys())H.drag(s,S)}rebuild(s){if(s.parent===null){const S=this.getLayer(s.pageIndex);S?(S.changeParent(s),S.addOrRebuild(s)):(this.addEditor(s),this.addToAnnotationStorage(s),s.rebuild())}else s.parent.addOrRebuild(s)}isActive(s){return n(this,w)===s}getActive(){return n(this,w)}getMode(){return n(this,c)}get imageManager(){return(0,e.shadow)(this,"imageManager",new _)}};let B=Nt;w=new WeakMap,z=new WeakMap,$=new WeakMap,M=new WeakMap,K=new WeakMap,rt=new WeakMap,lt=new WeakMap,G=new WeakMap,ht=new WeakMap,pt=new WeakMap,wt=new WeakMap,St=new WeakMap,C=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap,c=new WeakMap,u=new WeakMap,v=new WeakMap,R=new WeakMap,W=new WeakMap,tt=new WeakMap,et=new WeakMap,ot=new WeakMap,dt=new WeakMap,At=new WeakMap,ut=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,Et=new WeakMap,It=new WeakMap,gt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakSet,Tn=function(){window.addEventListener("focus",n(this,W)),window.addEventListener("blur",n(this,R))},Pt=new WeakSet,Ge=function(){window.removeEventListener("focus",n(this,W)),window.removeEventListener("blur",n(this,R))},Vt=new WeakSet,Xe=function(){window.addEventListener("keydown",n(this,dt),{capture:!0})},Gt=new WeakSet,Ce=function(){window.removeEventListener("keydown",n(this,dt),{capture:!0})},zt=new WeakSet,$e=function(){document.addEventListener("copy",n(this,tt)),document.addEventListener("cut",n(this,et)),document.addEventListener("paste",n(this,ot))},ct=new WeakSet,qe=function(){document.removeEventListener("copy",n(this,tt)),document.removeEventListener("cut",n(this,et)),document.removeEventListener("paste",n(this,ot))},q=new WeakSet,re=function(s){Object.entries(s).some(([H,X])=>n(this,Et)[H]!==X)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(n(this,Et),s)})},yt=new WeakSet,me=function(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})},te=new WeakSet,Pn=function(){if(!n(this,i)){st(this,i,!0);for(const s of n(this,$).values())s.enable()}},Ct=new WeakSet,kn=function(){if(this.unselectAll(),n(this,i)){st(this,i,!1);for(const s of n(this,$).values())s.disable()}},kt=new WeakSet,Ye=function(s){const S=n(this,$).get(s.pageIndex);S?S.addOrRebuild(s):this.addEditor(s)},Bt=new WeakSet,_e=function(){if(n(this,z).size===0)return!0;if(n(this,z).size===1)for(const s of n(this,z).values())return s.isEmpty();return!1},bt=new WeakSet,Ke=function(s){n(this,u).clear();for(const S of s)S.isEmpty()||(n(this,u).add(S),S.select());Y(this,q,re).call(this,{hasSelectedEditor:!0})},ee(B,"TRANSLATE_SMALL",1),ee(B,"TRANSLATE_BIG",10),t.AnnotationEditorUIManager=B},(L,t,o)=>{var lt,G,ht,pt,wt,St,C,i,a,r,c,u,de,R,ue,tt,Je,ot,Te,At,Pe,Ft,be,Et,Ae;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=O,t.getColorValues=z,t.getCurrentTransform=$,t.getCurrentTransformInverse=M,t.getFilenameFromUrl=A,t.getPdfFilenameFromUrl=x,t.getRGB=w,t.getXfaPageViewport=D,t.isDataScheme=b,t.isPdfFile=p,t.isValidFetchUrl=k,t.loadScript=f,t.noContextMenu=h,t.setLayerDimensions=K;var e=o(7),d=o(1);const E="http://www.w3.org/2000/svg",rt=class{};let T=rt;ee(T,"CSS",96),ee(T,"PDF",72),ee(T,"PDF_TO_CSS_UNITS",rt.CSS/rt.PDF),t.PixelsPerInch=T;class V extends e.BaseFilterFactory{constructor({docId:it,ownerDocument:ft=globalThis.document}={}){super();j(this,u);j(this,R);j(this,tt);j(this,ot);j(this,At);j(this,Ft);j(this,Et);j(this,lt,void 0);j(this,G,void 0);j(this,ht,void 0);j(this,pt,void 0);j(this,wt,void 0);j(this,St,void 0);j(this,C,void 0);j(this,i,void 0);j(this,a,void 0);j(this,r,void 0);j(this,c,0);st(this,ht,it),st(this,pt,ft)}addFilter(it){if(!it)return"none";let ft=n(this,u,de).get(it);if(ft)return ft;let Tt,Pt,Ht,Vt;if(it.length===1){const zt=it[0],vt=new Array(256);for(let ct=0;ct<256;ct++)vt[ct]=zt[ct]/255;Vt=Tt=Pt=Ht=vt.join(",")}else{const[zt,vt,ct]=it,J=new Array(256),q=new Array(256),mt=new Array(256);for(let yt=0;yt<256;yt++)J[yt]=zt[yt]/255,q[yt]=vt[yt]/255,mt[yt]=ct[yt]/255;Tt=J.join(","),Pt=q.join(","),Ht=mt.join(","),Vt=`${Tt}${Pt}${Ht}`}if(ft=n(this,u,de).get(Vt),ft)return n(this,u,de).set(it,ft),ft;const jt=`g_${n(this,ht)}_transfer_map_${ge(this,c)._++}`,Gt=`url(#${jt})`;n(this,u,de).set(it,Gt),n(this,u,de).set(Vt,Gt);const $t=Y(this,ot,Te).call(this,jt);return Y(this,Ft,be).call(this,Tt,Pt,Ht,$t),Gt}addHCMFilter(it,ft){var vt;const Tt=`${it}-${ft}`;if(n(this,St)===Tt)return n(this,C);if(st(this,St,Tt),st(this,C,"none"),(vt=n(this,wt))==null||vt.remove(),!it||!ft)return n(this,C);const Pt=Y(this,Et,Ae).call(this,it);it=d.Util.makeHexColor(...Pt);const Ht=Y(this,Et,Ae).call(this,ft);if(ft=d.Util.makeHexColor(...Ht),n(this,R,ue).style.color="",it==="#000000"&&ft==="#ffffff"||it===ft)return n(this,C);const Vt=new Array(256);for(let ct=0;ct<=255;ct++){const J=ct/255;Vt[ct]=J<=.03928?J/12.92:((J+.055)/1.055)**2.4}const jt=Vt.join(","),Gt=`g_${n(this,ht)}_hcm_filter`,$t=st(this,i,Y(this,ot,Te).call(this,Gt));Y(this,Ft,be).call(this,jt,jt,jt,$t),Y(this,tt,Je).call(this,$t);const zt=(ct,J)=>{const q=Pt[ct]/255,mt=Ht[ct]/255,yt=new Array(J+1);for(let Zt=0;Zt<=J;Zt++)yt[Zt]=q+Zt/J*(mt-q);return yt.join(",")};return Y(this,Ft,be).call(this,zt(0,5),zt(1,5),zt(2,5),$t),st(this,C,`url(#${Gt})`),n(this,C)}addHighlightHCMFilter(it,ft,Tt,Pt){var mt;const Ht=`${it}-${ft}-${Tt}-${Pt}`;if(n(this,a)===Ht)return n(this,r);if(st(this,a,Ht),st(this,r,"none"),(mt=n(this,i))==null||mt.remove(),!it||!ft)return n(this,r);const[Vt,jt]=[it,ft].map(Y(this,Et,Ae).bind(this));let Gt=Math.round(.2126*Vt[0]+.7152*Vt[1]+.0722*Vt[2]),$t=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),[zt,vt]=[Tt,Pt].map(Y(this,Et,Ae).bind(this));$t<Gt&&([Gt,$t,zt,vt]=[$t,Gt,vt,zt]),n(this,R,ue).style.color="";const ct=(yt,Zt,te)=>{const Z=new Array(256),Ct=($t-Gt)/te,Lt=yt/255,kt=(Zt-yt)/(255*te);let Ot=0;for(let Bt=0;Bt<=te;Bt++){const Jt=Math.round(Gt+Bt*Ct),bt=Lt+Bt*kt;for(let Yt=Ot;Yt<=Jt;Yt++)Z[Yt]=bt;Ot=Jt+1}for(let Bt=Ot;Bt<256;Bt++)Z[Bt]=Z[Ot-1];return Z.join(",")},J=`g_${n(this,ht)}_hcm_highlight_filter`,q=st(this,i,Y(this,ot,Te).call(this,J));return Y(this,tt,Je).call(this,q),Y(this,Ft,be).call(this,ct(zt[0],vt[0],5),ct(zt[1],vt[1],5),ct(zt[2],vt[2],5),q),st(this,r,`url(#${J})`),n(this,r)}destroy(it=!1){it&&(n(this,C)||n(this,r))||(n(this,G)&&(n(this,G).parentNode.parentNode.remove(),st(this,G,null)),n(this,lt)&&(n(this,lt).clear(),st(this,lt,null)),st(this,c,0))}}lt=new WeakMap,G=new WeakMap,ht=new WeakMap,pt=new WeakMap,wt=new WeakMap,St=new WeakMap,C=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap,c=new WeakMap,u=new WeakSet,de=function(){return n(this,lt)||st(this,lt,new Map)},R=new WeakSet,ue=function(){if(!n(this,G)){const it=n(this,pt).createElement("div"),{style:ft}=it;ft.visibility="hidden",ft.contain="strict",ft.width=ft.height=0,ft.position="absolute",ft.top=ft.left=0,ft.zIndex=-1;const Tt=n(this,pt).createElementNS(E,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),st(this,G,n(this,pt).createElementNS(E,"defs")),it.append(Tt),Tt.append(n(this,G)),n(this,pt).body.append(it)}return n(this,G)},tt=new WeakSet,Je=function(it){const ft=n(this,pt).createElementNS(E,"feColorMatrix");ft.setAttribute("type","matrix"),ft.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),it.append(ft)},ot=new WeakSet,Te=function(it){const ft=n(this,pt).createElementNS(E,"filter");return ft.setAttribute("color-interpolation-filters","sRGB"),ft.setAttribute("id",it),n(this,R,ue).append(ft),ft},At=new WeakSet,Pe=function(it,ft,Tt){const Pt=n(this,pt).createElementNS(E,ft);Pt.setAttribute("type","discrete"),Pt.setAttribute("tableValues",Tt),it.append(Pt)},Ft=new WeakSet,be=function(it,ft,Tt,Pt){const Ht=n(this,pt).createElementNS(E,"feComponentTransfer");Pt.append(Ht),Y(this,At,Pe).call(this,Ht,"feFuncR",it),Y(this,At,Pe).call(this,Ht,"feFuncG",ft),Y(this,At,Pe).call(this,Ht,"feFuncB",Tt)},Et=new WeakSet,Ae=function(it){return n(this,R,ue).style.color=it,w(getComputedStyle(n(this,R,ue)).getPropertyValue("color"))},t.DOMFilterFactory=V;class _ extends e.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,it){const ft=this._document.createElement("canvas");return ft.width=nt,ft.height=it,ft}}t.DOMCanvasFactory=_;async function m(gt,nt=!1){if(k(gt,document.baseURI)){const it=await fetch(gt);if(!it.ok)throw new Error(it.statusText);return nt?new Uint8Array(await it.arrayBuffer()):(0,d.stringToBytes)(await it.text())}return new Promise((it,ft)=>{const Tt=new XMLHttpRequest;Tt.open("GET",gt,!0),nt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let Pt;if(nt&&Tt.response?Pt=new Uint8Array(Tt.response):!nt&&Tt.responseText&&(Pt=(0,d.stringToBytes)(Tt.responseText)),Pt){it(Pt);return}}ft(new Error(Tt.statusText))}},Tt.send(null)})}class g extends e.BaseCMapReaderFactory{_fetchData(nt,it){return m(nt,this.isCompressed).then(ft=>({cMapData:ft,compressionType:it}))}}t.DOMCMapReaderFactory=g;class N extends e.BaseStandardFontDataFactory{_fetchData(nt){return m(nt,!0)}}t.DOMStandardFontDataFactory=N;class B extends e.BaseSVGFactory{_createSVG(nt){return document.createElementNS(E,nt)}}t.DOMSVGFactory=B;class I{constructor({viewBox:nt,scale:it,rotation:ft,offsetX:Tt=0,offsetY:Pt=0,dontFlip:Ht=!1}){this.viewBox=nt,this.scale=it,this.rotation=ft,this.offsetX=Tt,this.offsetY=Pt;const Vt=(nt[2]+nt[0])/2,jt=(nt[3]+nt[1])/2;let Gt,$t,zt,vt;switch(ft%=360,ft<0&&(ft+=360),ft){case 180:Gt=-1,$t=0,zt=0,vt=1;break;case 90:Gt=0,$t=1,zt=1,vt=0;break;case 270:Gt=0,$t=-1,zt=-1,vt=0;break;case 0:Gt=1,$t=0,zt=0,vt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ht&&(zt=-zt,vt=-vt);let ct,J,q,mt;Gt===0?(ct=Math.abs(jt-nt[1])*it+Tt,J=Math.abs(Vt-nt[0])*it+Pt,q=(nt[3]-nt[1])*it,mt=(nt[2]-nt[0])*it):(ct=Math.abs(Vt-nt[0])*it+Tt,J=Math.abs(jt-nt[1])*it+Pt,q=(nt[2]-nt[0])*it,mt=(nt[3]-nt[1])*it),this.transform=[Gt*it,$t*it,zt*it,vt*it,ct-Gt*it*Vt-zt*it*jt,J-$t*it*Vt-vt*it*jt],this.width=q,this.height=mt}get rawDims(){const{viewBox:nt}=this;return(0,d.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:it=this.rotation,offsetX:ft=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Pt=!1}={}){return new I({viewBox:this.viewBox.slice(),scale:nt,rotation:it,offsetX:ft,offsetY:Tt,dontFlip:Pt})}convertToViewportPoint(nt,it){return d.Util.applyTransform([nt,it],this.transform)}convertToViewportRectangle(nt){const it=d.Util.applyTransform([nt[0],nt[1]],this.transform),ft=d.Util.applyTransform([nt[2],nt[3]],this.transform);return[it[0],it[1],ft[0],ft[1]]}convertToPdfPoint(nt,it){return d.Util.applyInverseTransform([nt,it],this.transform)}}t.PageViewport=I;class P extends d.BaseException{constructor(nt,it=0){super(nt,"RenderingCancelledException"),this.extraDelay=it}}t.RenderingCancelledException=P;function b(gt){const nt=gt.length;let it=0;for(;it<nt&&gt[it].trim()==="";)it++;return gt.substring(it,it+5).toLowerCase()==="data:"}function p(gt){return typeof gt=="string"&&/\.pdf$/i.test(gt)}function A(gt,nt=!1){return nt||([gt]=gt.split(/[#?]/,1)),gt.substring(gt.lastIndexOf("/")+1)}function x(gt,nt="document.pdf"){if(typeof gt!="string")return nt;if(b(gt))return(0,d.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const it=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ft=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=it.exec(gt);let Pt=ft.exec(Tt[1])||ft.exec(Tt[2])||ft.exec(Tt[3]);if(Pt&&(Pt=Pt[0],Pt.includes("%")))try{Pt=ft.exec(decodeURIComponent(Pt))[0]}catch{}return Pt||nt}class F{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(nt){nt in this.started&&(0,d.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,d.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let it=0;for(const{name:ft}of this.times)it=Math.max(ft.length,it);for(const{name:ft,start:Tt,end:Pt}of this.times)nt.push(`${ft.padEnd(it)} ${Pt-Tt}ms
`);return nt.join("")}}t.StatTimer=F;function k(gt,nt){try{const{protocol:it}=nt?new URL(gt,nt):new URL(gt);return it==="http:"||it==="https:"}catch{return!1}}function h(gt){gt.preventDefault()}function f(gt,nt=!1){return new Promise((it,ft)=>{const Tt=document.createElement("script");Tt.src=gt,Tt.onload=function(Pt){nt&&Tt.remove(),it(Pt)},Tt.onerror=function(){ft(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function O(gt){console.log("Deprecated API usage: "+gt)}let y;class l{static toDateObject(nt){if(!nt||typeof nt!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const it=y.exec(nt);if(!it)return null;const ft=parseInt(it[1],10);let Tt=parseInt(it[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Pt=parseInt(it[3],10);Pt=Pt>=1&&Pt<=31?Pt:1;let Ht=parseInt(it[4],10);Ht=Ht>=0&&Ht<=23?Ht:0;let Vt=parseInt(it[5],10);Vt=Vt>=0&&Vt<=59?Vt:0;let jt=parseInt(it[6],10);jt=jt>=0&&jt<=59?jt:0;const Gt=it[7]||"Z";let $t=parseInt(it[8],10);$t=$t>=0&&$t<=23?$t:0;let zt=parseInt(it[9],10)||0;return zt=zt>=0&&zt<=59?zt:0,Gt==="-"?(Ht+=$t,Vt+=zt):Gt==="+"&&(Ht-=$t,Vt-=zt),new Date(Date.UTC(ft,Tt,Pt,Ht,Vt,jt))}}t.PDFDateString=l;function D(gt,{scale:nt=1,rotation:it=0}){const{width:ft,height:Tt}=gt.attributes.style,Pt=[0,0,parseInt(ft),parseInt(Tt)];return new I({viewBox:Pt,scale:nt,rotation:it})}function w(gt){if(gt.startsWith("#")){const nt=parseInt(gt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return gt.startsWith("rgb(")?gt.slice(4,-1).split(",").map(nt=>parseInt(nt)):gt.startsWith("rgba(")?gt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,d.warn)(`Not a valid color format: "${gt}"`),[0,0,0])}function z(gt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const it of gt.keys()){nt.style.color=it;const ft=window.getComputedStyle(nt).color;gt.set(it,w(ft))}nt.remove()}function $(gt){const{a:nt,b:it,c:ft,d:Tt,e:Pt,f:Ht}=gt.getTransform();return[nt,it,ft,Tt,Pt,Ht]}function M(gt){const{a:nt,b:it,c:ft,d:Tt,e:Pt,f:Ht}=gt.getTransform().invertSelf();return[nt,it,ft,Tt,Pt,Ht]}function K(gt,nt,it=!1,ft=!0){if(nt instanceof I){const{pageWidth:Tt,pageHeight:Pt}=nt.rawDims,{style:Ht}=gt,Vt=d.FeatureTest.isCSSRoundSupported,jt=`var(--scale-factor) * ${Tt}px`,Gt=`var(--scale-factor) * ${Pt}px`,$t=Vt?`round(${jt}, 1px)`:`calc(${jt})`,zt=Vt?`round(${Gt}, 1px)`:`calc(${Gt})`;!it||nt.rotation%180===0?(Ht.width=$t,Ht.height=zt):(Ht.width=zt,Ht.height=$t)}ft&&gt.setAttribute("data-main-rotation",nt.rotation)}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=o(1);class d{constructor(){this.constructor===d&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,N){return"none"}addHighlightHCMFilter(g,N,B,I){return"none"}destroy(g=!1){}}t.BaseFilterFactory=d;class E{constructor(){this.constructor===E&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,N){if(g<=0||N<=0)throw new Error("Invalid canvas size");const B=this._createCanvas(g,N);return{canvas:B,context:B.getContext("2d")}}reset(g,N,B){if(!g.canvas)throw new Error("Canvas is not specified");if(N<=0||B<=0)throw new Error("Invalid canvas size");g.canvas.width=N,g.canvas.height=B}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,N){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=E;class T{constructor({baseUrl:g=null,isCompressed:N=!0}){this.constructor===T&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=N}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const N=this.baseUrl+g+(this.isCompressed?".bcmap":""),B=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(N,B).catch(I=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${N}`)})}_fetchData(g,N){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=T;class V{constructor({baseUrl:g=null}){this.constructor===V&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const N=`${this.baseUrl}${g}`;return this._fetchData(N).catch(B=>{throw new Error(`Unable to load font data at: ${N}`)})}_fetchData(g){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=V;class _{constructor(){this.constructor===_&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,N,B=!1){if(g<=0||N<=0)throw new Error("Invalid SVG dimensions");const I=this._createSVG("svg:svg");return I.setAttribute("version","1.1"),B||(I.setAttribute("width",`${g}px`),I.setAttribute("height",`${N}px`)),I.setAttribute("preserveAspectRatio","none"),I.setAttribute("viewBox",`0 0 ${g} ${N}`),I}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=_},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=o(1);const d=3285377520,E=4294901760,T=65535;class V{constructor(m){this.h1=m?m&4294967295:d,this.h2=m?m&4294967295:d}update(m){let g,N;if(typeof m=="string"){g=new Uint8Array(m.length*2),N=0;for(let O=0,y=m.length;O<y;O++){const l=m.charCodeAt(O);l<=255?g[N++]=l:(g[N++]=l>>>8,g[N++]=l&255)}}else if((0,e.isArrayBuffer)(m))g=m.slice(),N=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const B=N>>2,I=N-B*4,P=new Uint32Array(g.buffer,0,B);let b=0,p=0,A=this.h1,x=this.h2;const F=3432918353,k=461845907,h=F&T,f=k&T;for(let O=0;O<B;O++)O&1?(b=P[O],b=b*F&E|b*h&T,b=b<<15|b>>>17,b=b*k&E|b*f&T,A^=b,A=A<<13|A>>>19,A=A*5+3864292196):(p=P[O],p=p*F&E|p*h&T,p=p<<15|p>>>17,p=p*k&E|p*f&T,x^=p,x=x<<13|x>>>19,x=x*5+3864292196);switch(b=0,I){case 3:b^=g[B*4+2]<<16;case 2:b^=g[B*4+1]<<8;case 1:b^=g[B*4],b=b*F&E|b*h&T,b=b<<15|b>>>17,b=b*k&E|b*f&T,B&1?A^=b:x^=b}this.h1=A,this.h2=x}hexdigest(){let m=this.h1,g=this.h2;return m^=g>>>1,m=m*3981806797&E|m*36045&T,g=g*4283543511&E|((g<<16|m>>>16)*2950163797&E)>>>16,m^=g>>>1,m=m*444984403&E|m*60499&T,g=g*3301882366&E|((g<<16|m>>>16)*3120437893&E)>>>16,m^=g>>>1,(m>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=V},(L,t,o)=>{var T;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=o(1);class d{constructor({ownerDocument:_=globalThis.document,styleElement:m=null}){j(this,T,new Set);this._document=_,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(_){this.nativeFontFaces.add(_),this._document.fonts.add(_)}removeNativeFontFace(_){this.nativeFontFaces.delete(_),this._document.fonts.delete(_)}insertRule(_){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(_,m.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.clear(),n(this,T).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(_){if(!(!_||n(this,T).has(_.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:g,style:N}=_,B=new FontFace(m,g,N);this.addNativeFontFace(B);try{await B.load(),n(this,T).add(m)}catch{(0,e.warn)(`Cannot load system font: ${_.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(B)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(_){if(_.attached||_.missingFile&&!_.systemFontInfo)return;if(_.attached=!0,_.systemFontInfo){await this.loadSystemFont(_.systemFontInfo);return}if(this.isFontLoadingAPISupported){const g=_.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(N){throw(0,e.warn)(`Failed to load font '${g.family}': '${N}'.`),_.disableFontFace=!0,N}}return}const m=_.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const N=this._queueLoadingCallback(g);this._prepareFontLoadEvent(_,N)})}}get isFontLoadingAPISupported(){var m;const _=!!((m=this._document)!=null&&m.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){let _=!1;return(e.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(_=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function m(){for((0,e.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;g.length>0&&g[0].done;){const B=g.shift();setTimeout(B.callback,0)}}const{loadingRequests:g}=this,N={done:!1,complete:m,callback:_};return g.push(N),N}get _loadTestFont(){const _=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",_)}_prepareFontLoadEvent(_,m){function g(w,z){return w.charCodeAt(z)<<24|w.charCodeAt(z+1)<<16|w.charCodeAt(z+2)<<8|w.charCodeAt(z+3)&255}function N(w,z,$,M){const K=w.substring(0,z),rt=w.substring(z+$);return K+M+rt}let B,I;const P=this._document.createElement("canvas");P.width=1,P.height=1;const b=P.getContext("2d");let p=0;function A(w,z){if(++p>30){(0,e.warn)("Load test font never loaded."),z();return}if(b.font="30px "+w,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(A.bind(null,w,z))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=N(F,976,x.length,x);const h=16,f=1482184792;let O=g(F,h);for(B=0,I=x.length-3;B<I;B+=4)O=O-f+g(x,B)|0;B<x.length&&(O=O-f+g(x+"XXX",B)|0),F=N(F,h,4,(0,e.string32)(O));const y=`url(data:font/opentype;base64,${btoa(F)});`,l=`@font-face {font-family:"${x}";src:${y}}`;this.insertRule(l);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const w of[_.loadedName,x]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=w,D.append(z)}this._document.body.append(D),A(x,()=>{D.remove(),m.complete()})}}T=new WeakMap,t.FontLoader=d;class E{constructor(_,{isEvalSupported:m=!0,disableFontFace:g=!1,ignoreErrors:N=!1,inspectFont:B=null}){this.compiledGlyphs=Object.create(null);for(const I in _)this[I]=_[I];this.isEvalSupported=m!==!1,this.disableFontFace=g===!0,this.ignoreErrors=N===!0,this._inspectFont=B}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return(m=this._inspectFont)==null||m.call(this,this),_}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const _=(0,e.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(_)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let B=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(B+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${B}src:${m}}`}return(N=this._inspectFont)==null||N.call(this,this,m),g}getPathGenerator(_,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let g;try{g=_.get(this.loadedName+"_path_"+m)}catch(N){if(!this.ignoreErrors)throw N;return(0,e.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[m]=function(B,I){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const N=[];for(const B of g){const I=B.args!==void 0?B.args.join(","):"";N.push("c.",B.cmd,"(",I,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",N.join(""))}return this.compiledGlyphs[m]=function(N,B){for(const I of g)I.cmd==="scale"&&(I.args=[B,-B]),N[I.cmd].apply(N,I.args)}}}t.FontFaceObject=E},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=o(7);o(1);const d=function(m){return new Promise((g,N)=>{require$$5.readFile(m,(I,P)=>{if(I||!P){N(new Error(I));return}g(new Uint8Array(P))})})};class E extends e.BaseFilterFactory{}t.NodeFilterFactory=E;class T extends e.BaseCanvasFactory{_createCanvas(g,N){return require$$5.createCanvas(g,N)}}t.NodeCanvasFactory=T;class V extends e.BaseCMapReaderFactory{_fetchData(g,N){return d(g).then(B=>({cMapData:B,compressionType:N}))}}t.NodeCMapReaderFactory=V;class _ extends e.BaseStandardFontDataFactory{_fetchData(g){return d(g)}}t.NodeStandardFontDataFactory=_},(L,t,o)=>{var G,Qe,pt,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=o(1),d=o(6),E=o(12),T=o(13);const V=16,_=100,m=4096,g=15,N=10,B=1e3,I=16;function P(C,i){if(C._removeMirroring)throw new Error("Context is already forwarding operations.");C.__originalSave=C.save,C.__originalRestore=C.restore,C.__originalRotate=C.rotate,C.__originalScale=C.scale,C.__originalTranslate=C.translate,C.__originalTransform=C.transform,C.__originalSetTransform=C.setTransform,C.__originalResetTransform=C.resetTransform,C.__originalClip=C.clip,C.__originalMoveTo=C.moveTo,C.__originalLineTo=C.lineTo,C.__originalBezierCurveTo=C.bezierCurveTo,C.__originalRect=C.rect,C.__originalClosePath=C.closePath,C.__originalBeginPath=C.beginPath,C._removeMirroring=()=>{C.save=C.__originalSave,C.restore=C.__originalRestore,C.rotate=C.__originalRotate,C.scale=C.__originalScale,C.translate=C.__originalTranslate,C.transform=C.__originalTransform,C.setTransform=C.__originalSetTransform,C.resetTransform=C.__originalResetTransform,C.clip=C.__originalClip,C.moveTo=C.__originalMoveTo,C.lineTo=C.__originalLineTo,C.bezierCurveTo=C.__originalBezierCurveTo,C.rect=C.__originalRect,C.closePath=C.__originalClosePath,C.beginPath=C.__originalBeginPath,delete C._removeMirroring},C.save=function(){i.save(),this.__originalSave()},C.restore=function(){i.restore(),this.__originalRestore()},C.translate=function(r,c){i.translate(r,c),this.__originalTranslate(r,c)},C.scale=function(r,c){i.scale(r,c),this.__originalScale(r,c)},C.transform=function(r,c,u,v,R,W){i.transform(r,c,u,v,R,W),this.__originalTransform(r,c,u,v,R,W)},C.setTransform=function(r,c,u,v,R,W){i.setTransform(r,c,u,v,R,W),this.__originalSetTransform(r,c,u,v,R,W)},C.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},C.rotate=function(r){i.rotate(r),this.__originalRotate(r)},C.clip=function(r){i.clip(r),this.__originalClip(r)},C.moveTo=function(a,r){i.moveTo(a,r),this.__originalMoveTo(a,r)},C.lineTo=function(a,r){i.lineTo(a,r),this.__originalLineTo(a,r)},C.bezierCurveTo=function(a,r,c,u,v,R){i.bezierCurveTo(a,r,c,u,v,R),this.__originalBezierCurveTo(a,r,c,u,v,R)},C.rect=function(a,r,c,u){i.rect(a,r,c,u),this.__originalRect(a,r,c,u)},C.closePath=function(){i.closePath(),this.__originalClosePath()},C.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class b{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,a,r){let c;return this.cache[i]!==void 0?(c=this.cache[i],this.canvasFactory.reset(c,a,r)):(c=this.canvasFactory.create(a,r),this.cache[i]=c),c}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const a=this.cache[i];this.canvasFactory.destroy(a),delete this.cache[i]}}}function p(C,i,a,r,c,u,v,R,W,tt){const[et,ot,dt,At,ut,Ft]=(0,d.getCurrentTransform)(C);if(ot===0&&dt===0){const It=v*et+ut,gt=Math.round(It),nt=R*At+Ft,it=Math.round(nt),ft=(v+W)*et+ut,Tt=Math.abs(Math.round(ft)-gt)||1,Pt=(R+tt)*At+Ft,Ht=Math.abs(Math.round(Pt)-it)||1;return C.setTransform(Math.sign(et),0,0,Math.sign(At),gt,it),C.drawImage(i,a,r,c,u,0,0,Tt,Ht),C.setTransform(et,ot,dt,At,ut,Ft),[Tt,Ht]}if(et===0&&At===0){const It=R*dt+ut,gt=Math.round(It),nt=v*ot+Ft,it=Math.round(nt),ft=(R+tt)*dt+ut,Tt=Math.abs(Math.round(ft)-gt)||1,Pt=(v+W)*ot+Ft,Ht=Math.abs(Math.round(Pt)-it)||1;return C.setTransform(0,Math.sign(ot),Math.sign(dt),0,gt,it),C.drawImage(i,a,r,c,u,0,0,Ht,Tt),C.setTransform(et,ot,dt,At,ut,Ft),[Ht,Tt]}C.drawImage(i,a,r,c,u,v,R,W,tt);const Ut=Math.hypot(et,ot),Et=Math.hypot(dt,At);return[Ut*W,Et*tt]}function A(C){const{width:i,height:a}=C;if(i>B||a>B)return null;const r=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=i+1;let v=new Uint8Array(u*(a+1)),R,W,tt;const et=i+7&-8;let ot=new Uint8Array(et*a),dt=0;for(const Et of C.data){let It=128;for(;It>0;)ot[dt++]=Et&It?0:255,It>>=1}let At=0;for(dt=0,ot[dt]!==0&&(v[0]=1,++At),W=1;W<i;W++)ot[dt]!==ot[dt+1]&&(v[W]=ot[dt]?2:1,++At),dt++;for(ot[dt]!==0&&(v[W]=2,++At),R=1;R<a;R++){dt=R*et,tt=R*u,ot[dt-et]!==ot[dt]&&(v[tt]=ot[dt]?1:8,++At);let Et=(ot[dt]?4:0)+(ot[dt-et]?8:0);for(W=1;W<i;W++)Et=(Et>>2)+(ot[dt+1]?4:0)+(ot[dt-et+1]?8:0),c[Et]&&(v[tt+W]=c[Et],++At),dt++;if(ot[dt-et]!==ot[dt]&&(v[tt+W]=ot[dt]?2:4,++At),At>r)return null}for(dt=et*(a-1),tt=R*u,ot[dt]!==0&&(v[tt]=8,++At),W=1;W<i;W++)ot[dt]!==ot[dt+1]&&(v[tt+W]=ot[dt]?4:8,++At),dt++;if(ot[dt]!==0&&(v[tt+W]=4,++At),At>r)return null;const ut=new Int32Array([0,u,-1,0,-u,0,0,0,1]),Ft=new Path2D;for(R=0;At&&R<=a;R++){let Et=R*u;const It=Et+i;for(;Et<It&&!v[Et];)Et++;if(Et===It)continue;Ft.moveTo(Et%u,R);const gt=Et;let nt=v[Et];do{const it=ut[nt];do Et+=it;while(!v[Et]);const ft=v[Et];ft!==5&&ft!==10?(nt=ft,v[Et]=0):(nt=ft&51*nt>>4,v[Et]&=nt>>2|nt<<2),Ft.lineTo(Et%u,Et/u|0),v[Et]||--At}while(gt!==Et);--R}return ot=null,v=null,function(Et){Et.save(),Et.scale(1/i,-1/a),Et.translate(0,-a),Et.fill(Ft),Et.beginPath(),Et.restore()}}class x{constructor(i,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,a])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,a){this.x=i,this.y=a}updatePathMinMax(i,a,r){[a,r]=e.Util.applyTransform([a,r],i),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(i,a){const r=e.Util.applyTransform(a,i),c=e.Util.applyTransform(a.slice(2),i);this.minX=Math.min(this.minX,r[0],c[0]),this.minY=Math.min(this.minY,r[1],c[1]),this.maxX=Math.max(this.maxX,r[0],c[0]),this.maxY=Math.max(this.maxY,r[1],c[1])}updateScalingPathMinMax(i,a){e.Util.scaleMinMax(i,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(i,a,r,c,u,v,R,W,tt,et){const ot=e.Util.bezierBoundingBox(a,r,c,u,v,R,W,tt);if(et){et[0]=Math.min(et[0],ot[0],ot[2]),et[1]=Math.max(et[1],ot[0],ot[2]),et[2]=Math.min(et[2],ot[1],ot[3]),et[3]=Math.max(et[3],ot[1],ot[3]);return}this.updateRectMinMax(i,ot)}getPathBoundingBox(i=E.PathType.FILL,a=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(i===E.PathType.STROKE){a||(0,e.unreachable)("Stroke bounding box must include transform.");const c=e.Util.singularValueDecompose2dScale(a),u=c[0]*this.lineWidth/2,v=c[1]*this.lineWidth/2;r[0]-=u,r[1]-=v,r[2]+=u,r[3]+=v}return r}updateClipFromPath(){const i=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=E.PathType.FILL,a=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(i,a))}}function F(C,i){if(typeof ImageData<"u"&&i instanceof ImageData){C.putImageData(i,0,0);return}const a=i.height,r=i.width,c=a%I,u=(a-c)/I,v=c===0?u:u+1,R=C.createImageData(r,I);let W=0,tt;const et=i.data,ot=R.data;let dt,At,ut,Ft;if(i.kind===e.ImageKind.GRAYSCALE_1BPP){const Ut=et.byteLength,Et=new Uint32Array(ot.buffer,0,ot.byteLength>>2),It=Et.length,gt=r+7>>3,nt=4294967295,it=e.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<v;dt++){for(ut=dt<u?I:c,tt=0,At=0;At<ut;At++){const ft=Ut-W;let Tt=0;const Pt=ft>gt?r:ft*8-7,Ht=Pt&-8;let Vt=0,jt=0;for(;Tt<Ht;Tt+=8)jt=et[W++],Et[tt++]=jt&128?nt:it,Et[tt++]=jt&64?nt:it,Et[tt++]=jt&32?nt:it,Et[tt++]=jt&16?nt:it,Et[tt++]=jt&8?nt:it,Et[tt++]=jt&4?nt:it,Et[tt++]=jt&2?nt:it,Et[tt++]=jt&1?nt:it;for(;Tt<Pt;Tt++)Vt===0&&(jt=et[W++],Vt=128),Et[tt++]=jt&Vt?nt:it,Vt>>=1}for(;tt<It;)Et[tt++]=0;C.putImageData(R,0,dt*I)}}else if(i.kind===e.ImageKind.RGBA_32BPP){for(At=0,Ft=r*I*4,dt=0;dt<u;dt++)ot.set(et.subarray(W,W+Ft)),W+=Ft,C.putImageData(R,0,At),At+=I;dt<v&&(Ft=r*c*4,ot.set(et.subarray(W,W+Ft)),C.putImageData(R,0,At))}else if(i.kind===e.ImageKind.RGB_24BPP)for(ut=I,Ft=r*ut,dt=0;dt<v;dt++){for(dt>=u&&(ut=c,Ft=r*ut),tt=0,At=Ft;At--;)ot[tt++]=et[W++],ot[tt++]=et[W++],ot[tt++]=et[W++],ot[tt++]=255;C.putImageData(R,0,dt*I)}else throw new Error(`bad image kind: ${i.kind}`)}function k(C,i){if(i.bitmap){C.drawImage(i.bitmap,0,0);return}const a=i.height,r=i.width,c=a%I,u=(a-c)/I,v=c===0?u:u+1,R=C.createImageData(r,I);let W=0;const tt=i.data,et=R.data;for(let ot=0;ot<v;ot++){const dt=ot<u?I:c;({srcPos:W}=(0,T.convertBlackAndWhiteToRGBA)({src:tt,srcPos:W,dest:et,width:r,height:dt,nonBlackColor:0})),C.putImageData(R,0,ot*I)}}function h(C,i){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of a)C[r]!==void 0&&(i[r]=C[r]);C.setLineDash!==void 0&&(i.setLineDash(C.getLineDash()),i.lineDashOffset=C.lineDashOffset)}function f(C){if(C.strokeStyle=C.fillStyle="#000000",C.fillRule="nonzero",C.globalAlpha=1,C.lineWidth=1,C.lineCap="butt",C.lineJoin="miter",C.miterLimit=10,C.globalCompositeOperation="source-over",C.font="10px sans-serif",C.setLineDash!==void 0&&(C.setLineDash([]),C.lineDashOffset=0),!e.isNodeJS){const{filter:i}=C;i!=="none"&&i!==""&&(C.filter="none")}}function O(C,i,a,r){const c=C.length;for(let u=3;u<c;u+=4){const v=C[u];if(v===0)C[u-3]=i,C[u-2]=a,C[u-1]=r;else if(v<255){const R=255-v;C[u-3]=C[u-3]*v+i*R>>8,C[u-2]=C[u-2]*v+a*R>>8,C[u-1]=C[u-1]*v+r*R>>8}}}function y(C,i,a){const r=C.length,c=1/255;for(let u=3;u<r;u+=4){const v=a?a[C[u]]:C[u];i[u]=i[u]*v*c|0}}function l(C,i,a){const r=C.length;for(let c=3;c<r;c+=4){const u=C[c-3]*77+C[c-2]*152+C[c-1]*28;i[c]=a?i[c]*a[u>>8]>>8:i[c]*u>>16}}function D(C,i,a,r,c,u,v,R,W,tt,et){const ot=!!u,dt=ot?u[0]:0,At=ot?u[1]:0,ut=ot?u[2]:0,Ft=c==="Luminosity"?l:y,Et=Math.min(r,Math.ceil(1048576/a));for(let It=0;It<r;It+=Et){const gt=Math.min(Et,r-It),nt=C.getImageData(R-tt,It+(W-et),a,gt),it=i.getImageData(R,It+W,a,gt);ot&&O(nt.data,dt,At,ut),Ft(nt.data,it.data,v),i.putImageData(it,R,It+W)}}function w(C,i,a,r){const c=r[0],u=r[1],v=r[2]-c,R=r[3]-u;v===0||R===0||(D(i.context,a,v,R,i.subtype,i.backdrop,i.transferMap,c,u,i.offsetX,i.offsetY),C.save(),C.globalAlpha=1,C.globalCompositeOperation="source-over",C.setTransform(1,0,0,1,0,0),C.drawImage(a.canvas,0,0),C.restore())}function z(C,i){const a=e.Util.singularValueDecompose2dScale(C);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*d.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:a[0]<=r||a[1]<=r}const $=["butt","round","square"],M=["miter","round","bevel"],K={},rt={},St=class{constructor(i,a,r,c,u,{optionalContentConfig:v,markedContentStack:R=null},W,tt){j(this,G);j(this,pt);this.ctx=i,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=r,this.canvasFactory=c,this.filterFactory=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=R||[],this.optionalContentConfig=v,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=tt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,a=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):a}beginDrawing({transform:i,viewport:a,transparency:r=!1,background:c=null}){const u=this.ctx.canvas.width,v=this.ctx.canvas.height,R=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,u,v),this.ctx.fillStyle=R,r){const W=this.cachedCanvases.getCanvas("transparent",u,v);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,d.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,d.getCurrentTransform)(this.ctx)}executeOperatorList(i,a,r,c){const u=i.argsArray,v=i.fnArray;let R=a||0;const W=u.length;if(W===R)return R;const tt=W-R>N&&typeof r=="function",et=tt?Date.now()+g:0;let ot=0;const dt=this.commonObjs,At=this.objs;let ut;for(;;){if(c!==void 0&&R===c.nextBreakPoint)return c.breakIt(R,r),R;if(ut=v[R],ut!==e.OPS.dependency)this[ut].apply(this,u[R]);else for(const Ft of u[R]){const Ut=Ft.startsWith("g_")?dt:At;if(!Ut.has(Ft))return Ut.get(Ft,r),R}if(R++,R===W)return R;if(tt&&++ot>N){if(Date.now()>et)return r(),R;ot=0}}}endDrawing(){Y(this,G,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const a of i.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);i.clear()}this._cachedBitmapsMap.clear(),Y(this,pt,Ze).call(this)}_scaleImage(i,a){const r=i.width,c=i.height;let u=Math.max(Math.hypot(a[0],a[1]),1),v=Math.max(Math.hypot(a[2],a[3]),1),R=r,W=c,tt="prescale1",et,ot;for(;u>2&&R>1||v>2&&W>1;){let dt=R,At=W;u>2&&R>1&&(dt=R>=16384?Math.floor(R/2)-1||1:Math.ceil(R/2),u/=R/dt),v>2&&W>1&&(At=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W)/2,v/=W/At),et=this.cachedCanvases.getCanvas(tt,dt,At),ot=et.context,ot.clearRect(0,0,dt,At),ot.drawImage(i,0,0,R,W,0,0,dt,At),i=et.canvas,R=dt,W=At,tt=tt==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:R,paintHeight:W}}_createMaskCanvas(i){const a=this.ctx,{width:r,height:c}=i,u=this.current.fillColor,v=this.current.patternFill,R=(0,d.getCurrentTransform)(a);let W,tt,et,ot;if((i.bitmap||i.data)&&i.count>1){const Tt=i.bitmap||i.data.buffer;tt=JSON.stringify(v?R:[R.slice(0,4),u]),W=this._cachedBitmapsMap.get(Tt),W||(W=new Map,this._cachedBitmapsMap.set(Tt,W));const Pt=W.get(tt);if(Pt&&!v){const Ht=Math.round(Math.min(R[0],R[2])+R[4]),Vt=Math.round(Math.min(R[1],R[3])+R[5]);return{canvas:Pt,offsetX:Ht,offsetY:Vt}}et=Pt}et||(ot=this.cachedCanvases.getCanvas("maskCanvas",r,c),k(ot.context,i));let dt=e.Util.transform(R,[1/r,0,0,-1/c,0,0]);dt=e.Util.transform(dt,[1,0,0,1,0,-c]);const At=e.Util.applyTransform([0,0],dt),ut=e.Util.applyTransform([r,c],dt),Ft=e.Util.normalizeRect([At[0],At[1],ut[0],ut[1]]),Ut=Math.round(Ft[2]-Ft[0])||1,Et=Math.round(Ft[3]-Ft[1])||1,It=this.cachedCanvases.getCanvas("fillCanvas",Ut,Et),gt=It.context,nt=Math.min(At[0],ut[0]),it=Math.min(At[1],ut[1]);gt.translate(-nt,-it),gt.transform(...dt),et||(et=this._scaleImage(ot.canvas,(0,d.getCurrentTransformInverse)(gt)),et=et.img,W&&v&&W.set(tt,et)),gt.imageSmoothingEnabled=z((0,d.getCurrentTransform)(gt),i.interpolate),p(gt,et,0,0,et.width,et.height,0,0,r,c),gt.globalCompositeOperation="source-in";const ft=e.Util.transform((0,d.getCurrentTransformInverse)(gt),[1,0,0,1,-nt,-it]);return gt.fillStyle=v?u.getPattern(a,this,ft,E.PathType.FILL):u,gt.fillRect(0,0,r,c),W&&!v&&(this.cachedCanvases.delete("fillCanvas"),W.set(tt,It.canvas)),{canvas:It.canvas,offsetX:Math.round(nt),offsetY:Math.round(it)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=$[i]}setLineJoin(i){this.ctx.lineJoin=M[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,a){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=a)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[a,r]of i)switch(a){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,a=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(r,i,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const u=this.ctx;u.setTransform(...(0,d.getCurrentTransform)(this.suspendedCtx)),h(this.suspendedCtx,u),P(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),h(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,r=this.suspendedCtx;w(r,a,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(h(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),h(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,a,r,c,u,v){this.ctx.transform(i,a,r,c,u,v),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,a,r){const c=this.ctx,u=this.current;let v=u.x,R=u.y,W,tt;const et=(0,d.getCurrentTransform)(c),ot=et[0]===0&&et[3]===0||et[1]===0&&et[2]===0,dt=ot?r.slice(0):null;for(let At=0,ut=0,Ft=i.length;At<Ft;At++)switch(i[At]|0){case e.OPS.rectangle:v=a[ut++],R=a[ut++];const Ut=a[ut++],Et=a[ut++],It=v+Ut,gt=R+Et;c.moveTo(v,R),Ut===0||Et===0?c.lineTo(It,gt):(c.lineTo(It,R),c.lineTo(It,gt),c.lineTo(v,gt)),ot||u.updateRectMinMax(et,[v,R,It,gt]),c.closePath();break;case e.OPS.moveTo:v=a[ut++],R=a[ut++],c.moveTo(v,R),ot||u.updatePathMinMax(et,v,R);break;case e.OPS.lineTo:v=a[ut++],R=a[ut++],c.lineTo(v,R),ot||u.updatePathMinMax(et,v,R);break;case e.OPS.curveTo:W=v,tt=R,v=a[ut+4],R=a[ut+5],c.bezierCurveTo(a[ut],a[ut+1],a[ut+2],a[ut+3],v,R),u.updateCurvePathMinMax(et,W,tt,a[ut],a[ut+1],a[ut+2],a[ut+3],v,R,dt),ut+=6;break;case e.OPS.curveTo2:W=v,tt=R,c.bezierCurveTo(v,R,a[ut],a[ut+1],a[ut+2],a[ut+3]),u.updateCurvePathMinMax(et,W,tt,v,R,a[ut],a[ut+1],a[ut+2],a[ut+3],dt),v=a[ut+2],R=a[ut+3],ut+=4;break;case e.OPS.curveTo3:W=v,tt=R,v=a[ut+2],R=a[ut+3],c.bezierCurveTo(a[ut],a[ut+1],v,R,v,R),u.updateCurvePathMinMax(et,W,tt,a[ut],a[ut+1],v,R,v,R,dt),ut+=4;break;case e.OPS.closePath:c.closePath();break}ot&&u.updateScalingPathMinMax(et,dt),u.setCurrentPoint(v,R)}closePath(){this.ctx.closePath()}stroke(i=!0){const a=this.ctx,r=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&(r!=null&&r.getPattern)?(a.save(),a.strokeStyle=r.getPattern(a,this,(0,d.getCurrentTransformInverse)(a),E.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const a=this.ctx,r=this.current.fillColor,c=this.current.patternFill;let u=!1;c&&(a.save(),a.fillStyle=r.getPattern(a,this,(0,d.getCurrentTransformInverse)(a),E.PathType.FILL),u=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),u&&a.restore(),i&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K}eoClip(){this.pendingClip=rt}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,a=this.ctx;if(i===void 0){a.beginPath();return}a.save(),a.beginPath();for(const r of i)a.setTransform(...r.transform),a.translate(r.x,r.y),r.addToPath(a,r.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,a){var et;const r=this.commonObjs.get(i),c=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(c.fontMatrix=r.fontMatrix||e.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+i),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=r,this.current.fontSize=a,r.isType3Font)return;const u=r.loadedName||"sans-serif",v=((et=r.systemFontInfo)==null?void 0:et.css)||`"${u}", ${r.fallbackName}`;let R="normal";r.black?R="900":r.bold&&(R="bold");const W=r.italic?"italic":"normal";let tt=a;a<V?tt=V:a>_&&(tt=_),this.current.fontSizeScale=a/tt,this.ctx.font=`${W} ${R} ${tt}px ${v}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,a){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=a}setLeadingMoveText(i,a){this.setLeading(-a),this.moveText(i,a)}setTextMatrix(i,a,r,c,u,v){this.current.textMatrix=[i,a,r,c,u,v],this.current.textMatrixScale=Math.hypot(i,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,a,r,c){const u=this.ctx,v=this.current,R=v.font,W=v.textRenderingMode,tt=v.fontSize/v.fontSizeScale,et=W&e.TextRenderingMode.FILL_STROKE_MASK,ot=!!(W&e.TextRenderingMode.ADD_TO_PATH_FLAG),dt=v.patternFill&&!R.missingFile;let At;(R.disableFontFace||ot||dt)&&(At=R.getPathGenerator(this.commonObjs,i)),R.disableFontFace||dt?(u.save(),u.translate(a,r),u.beginPath(),At(u,tt),c&&u.setTransform(...c),(et===e.TextRenderingMode.FILL||et===e.TextRenderingMode.FILL_STROKE)&&u.fill(),(et===e.TextRenderingMode.STROKE||et===e.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((et===e.TextRenderingMode.FILL||et===e.TextRenderingMode.FILL_STROKE)&&u.fillText(i,a,r),(et===e.TextRenderingMode.STROKE||et===e.TextRenderingMode.FILL_STROKE)&&u.strokeText(i,a,r)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,d.getCurrentTransform)(u),x:a,y:r,fontSize:tt,addToPath:At})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const a=i.getImageData(0,0,10,10).data;let r=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){r=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(i){const a=this.current,r=a.font;if(r.isType3Font)return this.showType3Text(i);const c=a.fontSize;if(c===0)return;const u=this.ctx,v=a.fontSizeScale,R=a.charSpacing,W=a.wordSpacing,tt=a.fontDirection,et=a.textHScale*tt,ot=i.length,dt=r.vertical,At=dt?1:-1,ut=r.defaultVMetrics,Ft=c*a.fontMatrix[0],Ut=a.textRenderingMode===e.TextRenderingMode.FILL&&!r.disableFontFace&&!a.patternFill;u.save(),u.transform(...a.textMatrix),u.translate(a.x,a.y+a.textRise),tt>0?u.scale(et,-1):u.scale(et,1);let Et;if(a.patternFill){u.save();const ft=a.fillColor.getPattern(u,this,(0,d.getCurrentTransformInverse)(u),E.PathType.FILL);Et=(0,d.getCurrentTransform)(u),u.restore(),u.fillStyle=ft}let It=a.lineWidth;const gt=a.textMatrixScale;if(gt===0||It===0){const ft=a.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(ft===e.TextRenderingMode.STROKE||ft===e.TextRenderingMode.FILL_STROKE)&&(It=this.getSinglePixelWidth())}else It/=gt;if(v!==1&&(u.scale(v,v),It/=v),u.lineWidth=It,r.isInvalidPDFjsFont){const ft=[];let Tt=0;for(const Pt of i)ft.push(Pt.unicode),Tt+=Pt.width;u.fillText(ft.join(""),0,0),a.x+=Tt*Ft*et,u.restore(),this.compose();return}let nt=0,it;for(it=0;it<ot;++it){const ft=i[it];if(typeof ft=="number"){nt+=At*ft*c/1e3;continue}let Tt=!1;const Pt=(ft.isSpace?W:0)+R,Ht=ft.fontChar,Vt=ft.accent;let jt,Gt,$t=ft.width;if(dt){const vt=ft.vmetric||ut,ct=-(ft.vmetric?vt[1]:$t*.5)*Ft,J=vt[2]*Ft;$t=vt?-vt[0]:$t,jt=ct/v,Gt=(nt+J)/v}else jt=nt/v,Gt=0;if(r.remeasure&&$t>0){const vt=u.measureText(Ht).width*1e3/c*v;if($t<vt&&this.isFontSubpixelAAEnabled){const ct=$t/vt;Tt=!0,u.save(),u.scale(ct,1),jt/=ct}else $t!==vt&&(jt+=($t-vt)/2e3*c/v)}if(this.contentVisible&&(ft.isInFont||r.missingFile)){if(Ut&&!Vt)u.fillText(Ht,jt,Gt);else if(this.paintChar(Ht,jt,Gt,Et),Vt){const vt=jt+c*Vt.offset.x/v,ct=Gt-c*Vt.offset.y/v;this.paintChar(Vt.fontChar,vt,ct,Et)}}const zt=dt?$t*Ft-Pt*tt:$t*Ft+Pt*tt;nt+=zt,Tt&&u.restore()}dt?a.y-=nt:a.x+=nt*et,u.restore(),this.compose()}showType3Text(i){const a=this.ctx,r=this.current,c=r.font,u=r.fontSize,v=r.fontDirection,R=c.vertical?1:-1,W=r.charSpacing,tt=r.wordSpacing,et=r.textHScale*v,ot=r.fontMatrix||e.FONT_IDENTITY_MATRIX,dt=i.length,At=r.textRenderingMode===e.TextRenderingMode.INVISIBLE;let ut,Ft,Ut,Et;if(!(At||u===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...r.textMatrix),a.translate(r.x,r.y),a.scale(et,v),ut=0;ut<dt;++ut){if(Ft=i[ut],typeof Ft=="number"){Et=R*Ft*u/1e3,this.ctx.translate(Et,0),r.x+=Et*et;continue}const It=(Ft.isSpace?tt:0)+W,gt=c.charProcOperatorList[Ft.operatorListId];if(!gt){(0,e.warn)(`Type3 character "${Ft.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ft,this.save(),a.scale(u,u),a.transform(...ot),this.executeOperatorList(gt),this.restore()),Ut=e.Util.applyTransform([Ft.width,0],ot)[0]*u+It,a.translate(Ut,0),r.x+=Ut*et}a.restore(),this.processingType3=null}}setCharWidth(i,a){}setCharWidthAndBounds(i,a,r,c,u,v){this.ctx.rect(r,c,u-r,v-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let a;if(i[0]==="TilingPattern"){const r=i[1],c=this.baseTransform||(0,d.getCurrentTransform)(this.ctx),u={createCanvasGraphics:v=>new St(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new E.TilingPattern(i,r,this.ctx,u,c)}else a=this._getPattern(i[1],i[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,a,r){const c=e.Util.makeHexColor(i,a,r);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(i,a,r){const c=e.Util.makeHexColor(i,a,r);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(i,a=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=(0,E.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,r)),a&&(r.matrix=a),r}shadingFill(i){if(!this.contentVisible)return;const a=this.ctx;this.save();const r=this._getPattern(i);a.fillStyle=r.getPattern(a,this,(0,d.getCurrentTransformInverse)(a),E.PathType.SHADING);const c=(0,d.getCurrentTransformInverse)(a);if(c){const{width:u,height:v}=a.canvas,[R,W,tt,et]=e.Util.getAxialAlignedBoundingBox([0,0,u,v],c);this.ctx.fillRect(R,W,tt-R,et-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,d.getCurrentTransform)(this.ctx),a)){const r=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],r,c),this.current.updateRectMinMax((0,d.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;i.isolated||(0,e.info)("TODO: Support non-isolated groups."),i.knockout&&(0,e.warn)("Knockout groups not supported.");const r=(0,d.getCurrentTransform)(a);if(i.matrix&&a.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let c=e.Util.getAxialAlignedBoundingBox(i.bbox,(0,d.getCurrentTransform)(a));const u=[0,0,a.canvas.width,a.canvas.height];c=e.Util.intersect(c,u)||[0,0,0,0];const v=Math.floor(c[0]),R=Math.floor(c[1]);let W=Math.max(Math.ceil(c[2])-v,1),tt=Math.max(Math.ceil(c[3])-R,1),et=1,ot=1;W>m&&(et=W/m,W=m),tt>m&&(ot=tt/m,tt=m),this.current.startNewPathAndClipBox([0,0,W,tt]);let dt="groupAt"+this.groupLevel;i.smask&&(dt+="_smask_"+this.smaskCounter++%2);const At=this.cachedCanvases.getCanvas(dt,W,tt),ut=At.context;ut.scale(1/et,1/ot),ut.translate(-v,-R),ut.transform(...r),i.smask?this.smaskStack.push({canvas:At.canvas,context:ut,offsetX:v,offsetY:R,scaleX:et,scaleY:ot,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(v,R),a.scale(et,ot),a.save()),h(a,ut),this.ctx=ut,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,d.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const u=e.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(i,a,r,c,u){if(Y(this,G,Qe).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const v=a[2]-a[0],R=a[3]-a[1];if(u&&this.annotationCanvasMap){r=r.slice(),r[4]-=a[0],r[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=v,a[3]=R;const[W,tt]=e.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(this.ctx)),{viewportScale:et}=this,ot=Math.ceil(v*this.outputScaleX*et),dt=Math.ceil(R*this.outputScaleY*et);this.annotationCanvas=this.canvasFactory.create(ot,dt);const{canvas:At,context:ut}=this.annotationCanvas;this.annotationCanvasMap.set(i,At),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ut,this.ctx.save(),this.ctx.setTransform(W,0,0,-tt,0,R*tt),f(this.ctx)}else f(this.ctx),this.ctx.rect(a[0],a[1],v,R),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Y(this,pt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const a=i.count;i=this.getObject(i.data,i),i.count=a;const r=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=A(i)),c.compiled)){c.compiled(r);return}const u=this._createMaskCanvas(i),v=u.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(v,u.offsetX,u.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(i,a,r=0,c=0,u,v){if(!this.contentVisible)return;i=this.getObject(i.data,i);const R=this.ctx;R.save();const W=(0,d.getCurrentTransform)(R);R.transform(a,r,c,u,0,0);const tt=this._createMaskCanvas(i);R.setTransform(1,0,0,1,tt.offsetX-W[4],tt.offsetY-W[5]);for(let et=0,ot=v.length;et<ot;et+=2){const dt=e.Util.transform(W,[a,r,c,u,v[et],v[et+1]]),[At,ut]=e.Util.applyTransform([0,0],dt);R.drawImage(tt.canvas,At,ut)}R.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const a=this.ctx,r=this.current.fillColor,c=this.current.patternFill;for(const u of i){const{data:v,width:R,height:W,transform:tt}=u,et=this.cachedCanvases.getCanvas("maskCanvas",R,W),ot=et.context;ot.save();const dt=this.getObject(v,u);k(ot,dt),ot.globalCompositeOperation="source-in",ot.fillStyle=c?r.getPattern(ot,this,(0,d.getCurrentTransformInverse)(a),E.PathType.FILL):r,ot.fillRect(0,0,R,W),ot.restore(),a.save(),a.transform(...tt),a.scale(1,-1),p(a,et.canvas,0,0,R,W,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const a=this.getObject(i);if(!a){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(i,a,r,c){if(!this.contentVisible)return;const u=this.getObject(i);if(!u){(0,e.warn)("Dependent image isn't ready yet");return}const v=u.width,R=u.height,W=[];for(let tt=0,et=c.length;tt<et;tt+=2)W.push({transform:[a,0,0,r,c[tt],c[tt+1]],x:0,y:0,w:v,h:R});this.paintInlineImageXObjectGroup(u,W)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:a,width:r,height:c}=i,u=this.cachedCanvases.getCanvas("inlineImage",r,c),v=u.context;return v.filter=this.current.transferMaps,v.drawImage(a,0,0),v.filter="none",u.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const a=i.width,r=i.height,c=this.ctx;if(this.save(),!e.isNodeJS){const{filter:R}=c;R!=="none"&&R!==""&&(c.filter="none")}c.scale(1/a,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const W=this.cachedCanvases.getCanvas("inlineImage",a,r).context;F(W,i),u=this.applyTransferMapsToCanvas(W)}const v=this._scaleImage(u,(0,d.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=z((0,d.getCurrentTransform)(c),i.interpolate),p(c,v.img,0,0,v.paintWidth,v.paintHeight,0,-r,a,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,a){if(!this.contentVisible)return;const r=this.ctx;let c;if(i.bitmap)c=i.bitmap;else{const u=i.width,v=i.height,W=this.cachedCanvases.getCanvas("inlineImage",u,v).context;F(W,i),c=this.applyTransferMapsToCanvas(W)}for(const u of a)r.save(),r.transform(...u.transform),r.scale(1,-1),p(r,c,u.x,u.y,u.w,u.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,a){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,a){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip&&(a||(this.pendingClip===rt?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,d.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const a=Math.abs(i[0]*i[3]-i[2]*i[1]),r=Math.hypot(i[0],i[2]),c=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(r,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a,b:r,c,d:u}=this.ctx.getTransform();let v,R;if(r===0&&c===0){const W=Math.abs(a),tt=Math.abs(u);if(W===tt)if(i===0)v=R=1/W;else{const et=W*i;v=R=et<1?1/et:1}else if(i===0)v=1/W,R=1/tt;else{const et=W*i,ot=tt*i;v=et<1?1/et:1,R=ot<1?1/ot:1}}else{const W=Math.abs(a*u-r*c),tt=Math.hypot(a,r),et=Math.hypot(c,u);if(i===0)v=et/W,R=tt/W;else{const ot=i*W;v=et>ot?et/ot:1,R=tt>ot?tt/ot:1}}this._cachedScaleForStroking[0]=v,this._cachedScaleForStroking[1]=R}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:a}=this,{lineWidth:r}=this.current,[c,u]=this.getScaleForStroking();if(a.lineWidth=r||1,c===1&&u===1){a.stroke();return}const v=a.getLineDash();if(i&&a.save(),a.scale(c,u),v.length>0){const R=Math.max(c,u);a.setLineDash(v.map(W=>W/R)),a.lineDashOffset/=R}a.stroke(),i&&a.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};let lt=St;G=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},pt=new WeakSet,Ze=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const a=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}},t.CanvasGraphics=lt;for(const C in e.OPS)lt.prototype[C]!==void 0&&(lt.prototype[e.OPS[C]]=lt.prototype[C])},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=I;var e=o(1),d=o(6);const E={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=E;function T(A,x){if(!x)return;const F=x[2]-x[0],k=x[3]-x[1],h=new Path2D;h.rect(x[0],x[1],F,k),A.clip(h)}class V{constructor(){this.constructor===V&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class _ extends V{constructor(x){super(),this._type=x[1],this._bbox=x[2],this._colorStops=x[3],this._p0=x[4],this._p1=x[5],this._r0=x[6],this._r1=x[7],this.matrix=null}_createGradient(x){let F;this._type==="axial"?F=x.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=x.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)F.addColorStop(k[0],k[1]);return F}getPattern(x,F,k,h){let f;if(h===E.STROKE||h===E.FILL){const O=F.current.getClippedPathBoundingBox(h,(0,d.getCurrentTransform)(x))||[0,0,0,0],y=Math.ceil(O[2]-O[0])||1,l=Math.ceil(O[3]-O[1])||1,D=F.cachedCanvases.getCanvas("pattern",y,l,!0),w=D.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-O[0],-O[1]),k=e.Util.transform(k,[1,0,0,1,O[0],O[1]]),w.transform(...F.baseTransform),this.matrix&&w.transform(...this.matrix),T(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),f=x.createPattern(D.canvas,"no-repeat");const z=new DOMMatrix(k);f.setTransform(z)}else T(x,this._bbox),f=this._createGradient(x);return f}}function m(A,x,F,k,h,f,O,y){const l=x.coords,D=x.colors,w=A.data,z=A.width*4;let $;l[F+1]>l[k+1]&&($=F,F=k,k=$,$=f,f=O,O=$),l[k+1]>l[h+1]&&($=k,k=h,h=$,$=O,O=y,y=$),l[F+1]>l[k+1]&&($=F,F=k,k=$,$=f,f=O,O=$);const M=(l[F]+x.offsetX)*x.scaleX,K=(l[F+1]+x.offsetY)*x.scaleY,rt=(l[k]+x.offsetX)*x.scaleX,lt=(l[k+1]+x.offsetY)*x.scaleY,G=(l[h]+x.offsetX)*x.scaleX,ht=(l[h+1]+x.offsetY)*x.scaleY;if(K>=ht)return;const pt=D[f],wt=D[f+1],St=D[f+2],C=D[O],i=D[O+1],a=D[O+2],r=D[y],c=D[y+1],u=D[y+2],v=Math.round(K),R=Math.round(ht);let W,tt,et,ot,dt,At,ut,Ft;for(let Ut=v;Ut<=R;Ut++){if(Ut<lt){const it=Ut<K?0:(K-Ut)/(K-lt);W=M-(M-rt)*it,tt=pt-(pt-C)*it,et=wt-(wt-i)*it,ot=St-(St-a)*it}else{let it;Ut>ht?it=1:lt===ht?it=0:it=(lt-Ut)/(lt-ht),W=rt-(rt-G)*it,tt=C-(C-r)*it,et=i-(i-c)*it,ot=a-(a-u)*it}let Et;Ut<K?Et=0:Ut>ht?Et=1:Et=(K-Ut)/(K-ht),dt=M-(M-G)*Et,At=pt-(pt-r)*Et,ut=wt-(wt-c)*Et,Ft=St-(St-u)*Et;const It=Math.round(Math.min(W,dt)),gt=Math.round(Math.max(W,dt));let nt=z*Ut+It*4;for(let it=It;it<=gt;it++)Et=(W-it)/(W-dt),Et<0?Et=0:Et>1&&(Et=1),w[nt++]=tt-(tt-At)*Et|0,w[nt++]=et-(et-ut)*Et|0,w[nt++]=ot-(ot-Ft)*Et|0,w[nt++]=255}}function g(A,x,F){const k=x.coords,h=x.colors;let f,O;switch(x.type){case"lattice":const y=x.verticesPerRow,l=Math.floor(k.length/y)-1,D=y-1;for(f=0;f<l;f++){let w=f*y;for(let z=0;z<D;z++,w++)m(A,F,k[w],k[w+1],k[w+y],h[w],h[w+1],h[w+y]),m(A,F,k[w+y+1],k[w+1],k[w+y],h[w+y+1],h[w+1],h[w+y])}break;case"triangles":for(f=0,O=k.length;f<O;f+=3)m(A,F,k[f],k[f+1],k[f+2],h[f],h[f+1],h[f+2]);break;default:throw new Error("illegal figure")}}class N extends V{constructor(x){super(),this._coords=x[2],this._colors=x[3],this._figures=x[4],this._bounds=x[5],this._bbox=x[7],this._background=x[8],this.matrix=null}_createMeshCanvas(x,F,k){const y=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-y,w=Math.ceil(this._bounds[3])-l,z=Math.min(Math.ceil(Math.abs(D*x[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(w*x[1]*1.1)),3e3),M=D/z,K=w/$,rt={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-l,scaleX:1/M,scaleY:1/K},lt=z+2*2,G=$+2*2,ht=k.getCanvas("mesh",lt,G,!1),pt=ht.context,wt=pt.createImageData(z,$);if(F){const C=wt.data;for(let i=0,a=C.length;i<a;i+=4)C[i]=F[0],C[i+1]=F[1],C[i+2]=F[2],C[i+3]=255}for(const C of this._figures)g(wt,C,rt);return pt.putImageData(wt,2,2),{canvas:ht.canvas,offsetX:y-2*M,offsetY:l-2*K,scaleX:M,scaleY:K}}getPattern(x,F,k,h){T(x,this._bbox);let f;if(h===E.SHADING)f=e.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(x));else if(f=e.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const y=e.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*y[0],f[1]*y[1]]}const O=this._createMeshCanvas(f,h===E.SHADING?null:this._background,F.cachedCanvases);return h!==E.SHADING&&(x.setTransform(...F.baseTransform),this.matrix&&x.transform(...this.matrix)),x.translate(O.offsetX,O.offsetY),x.scale(O.scaleX,O.scaleY),x.createPattern(O.canvas,"no-repeat")}}class B extends V{getPattern(){return"hotpink"}}function I(A){switch(A[0]){case"RadialAxial":return new _(A);case"Mesh":return new N(A);case"Dummy":return new B}throw new Error(`Unknown IR type: ${A[0]}`)}const P={COLORED:1,UNCOLORED:2},p=class{constructor(x,F,k,h,f){this.operatorList=x[2],this.matrix=x[3]||[1,0,0,1,0,0],this.bbox=x[4],this.xstep=x[5],this.ystep=x[6],this.paintType=x[7],this.tilingType=x[8],this.color=F,this.ctx=k,this.canvasGraphicsFactory=h,this.baseTransform=f}createPatternCanvas(x){const F=this.operatorList,k=this.bbox,h=this.xstep,f=this.ystep,O=this.paintType,y=this.tilingType,l=this.color,D=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+y);const w=k[0],z=k[1],$=k[2],M=k[3],K=e.Util.singularValueDecompose2dScale(this.matrix),rt=e.Util.singularValueDecompose2dScale(this.baseTransform),lt=[K[0]*rt[0],K[1]*rt[1]],G=this.getSizeAndScale(h,this.ctx.canvas.width,lt[0]),ht=this.getSizeAndScale(f,this.ctx.canvas.height,lt[1]),pt=x.cachedCanvases.getCanvas("pattern",G.size,ht.size,!0),wt=pt.context,St=D.createCanvasGraphics(wt);St.groupLevel=x.groupLevel,this.setFillAndStrokeStyleToContext(St,O,l);let C=w,i=z,a=$,r=M;return w<0&&(C=0,a+=Math.abs(w)),z<0&&(i=0,r+=Math.abs(z)),wt.translate(-(G.scale*C),-(ht.scale*i)),St.transform(G.scale,0,0,ht.scale,0,0),wt.save(),this.clipBbox(St,C,i,a,r),St.baseTransform=(0,d.getCurrentTransform)(St.ctx),St.executeOperatorList(F),St.endDrawing(),{canvas:pt.canvas,scaleX:G.scale,scaleY:ht.scale,offsetX:C,offsetY:i}}getSizeAndScale(x,F,k){x=Math.abs(x);const h=Math.max(p.MAX_PATTERN_SIZE,F);let f=Math.ceil(x*k);return f>=h?f=h:k=f/x,{scale:k,size:f}}clipBbox(x,F,k,h,f){const O=h-F,y=f-k;x.ctx.rect(F,k,O,y),x.current.updateRectMinMax((0,d.getCurrentTransform)(x.ctx),[F,k,h,f]),x.clip(),x.endPath()}setFillAndStrokeStyleToContext(x,F,k){const h=x.ctx,f=x.current;switch(F){case P.COLORED:const O=this.ctx;h.fillStyle=O.fillStyle,h.strokeStyle=O.strokeStyle,f.fillColor=O.fillStyle,f.strokeColor=O.strokeStyle;break;case P.UNCOLORED:const y=e.Util.makeHexColor(k[0],k[1],k[2]);h.fillStyle=y,h.strokeStyle=y,f.fillColor=y,f.strokeColor=y;break;default:throw new e.FormatError(`Unsupported paint type: ${F}`)}}getPattern(x,F,k,h){let f=k;h!==E.SHADING&&(f=e.Util.transform(f,F.baseTransform),this.matrix&&(f=e.Util.transform(f,this.matrix)));const O=this.createPatternCanvas(F);let y=new DOMMatrix(f);y=y.translate(O.offsetX,O.offsetY),y=y.scale(1/O.scaleX,1/O.scaleY);const l=x.createPattern(O.canvas,"repeat");return l.setTransform(y),l}};let b=p;ee(b,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=b},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=E,t.convertToRGBA=d,t.grayToRGBA=V;var e=o(1);function d(_){switch(_.kind){case e.ImageKind.GRAYSCALE_1BPP:return E(_);case e.ImageKind.RGB_24BPP:return T(_)}return null}function E({src:_,srcPos:m=0,dest:g,width:N,height:B,nonBlackColor:I=4294967295,inverseDecode:P=!1}){const b=e.FeatureTest.isLittleEndian?4278190080:255,[p,A]=P?[I,b]:[b,I],x=N>>3,F=N&7,k=_.length;g=new Uint32Array(g.buffer);let h=0;for(let f=0;f<B;f++){for(const y=m+x;m<y;m++){const l=m<k?_[m]:255;g[h++]=l&128?A:p,g[h++]=l&64?A:p,g[h++]=l&32?A:p,g[h++]=l&16?A:p,g[h++]=l&8?A:p,g[h++]=l&4?A:p,g[h++]=l&2?A:p,g[h++]=l&1?A:p}if(F===0)continue;const O=m<k?_[m++]:255;for(let y=0;y<F;y++)g[h++]=O&1<<7-y?A:p}return{srcPos:m,destPos:h}}function T({src:_,srcPos:m=0,dest:g,destPos:N=0,width:B,height:I}){let P=0;const b=_.length>>2,p=new Uint32Array(_.buffer,m,b);if(e.FeatureTest.isLittleEndian){for(;P<b-2;P+=3,N+=4){const A=p[P],x=p[P+1],F=p[P+2];g[N]=A|4278190080,g[N+1]=A>>>24|x<<8|4278190080,g[N+2]=x>>>16|F<<16|4278190080,g[N+3]=F>>>8|4278190080}for(let A=P*4,x=_.length;A<x;A+=3)g[N++]=_[A]|_[A+1]<<8|_[A+2]<<16|4278190080}else{for(;P<b-2;P+=3,N+=4){const A=p[P],x=p[P+1],F=p[P+2];g[N]=A|255,g[N+1]=A<<24|x>>>8|255,g[N+2]=x<<16|F>>>16|255,g[N+3]=F<<8|255}for(let A=P*4,x=_.length;A<x;A+=3)g[N++]=_[A]<<24|_[A+1]<<16|_[A+2]<<8|255}return{srcPos:m,destPos:N}}function V(_,m){if(e.FeatureTest.isLittleEndian)for(let g=0,N=_.length;g<N;g++)m[g]=_[g]*65793|4278190080;else for(let g=0,N=_.length;g<N;g++)m[g]=_[g]*16843008|255}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const o=Object.create(null);t.GlobalWorkerOptions=o,o.workerPort=null,o.workerSrc=""},(L,t,o)=>{var _,xn,g,Mn,B,ke;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=o(1);const d={UNKNOWN:0,DATA:1,ERROR:2},E={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function T(P){switch(P instanceof Error||typeof P=="object"&&P!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),P.name){case"AbortException":return new e.AbortException(P.message);case"MissingPDFException":return new e.MissingPDFException(P.message);case"PasswordException":return new e.PasswordException(P.message,P.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(P.message,P.status);case"UnknownErrorException":return new e.UnknownErrorException(P.message,P.details);default:return new e.UnknownErrorException(P.message,P.toString())}}class V{constructor(b,p,A){j(this,_);j(this,g);j(this,B);this.sourceName=b,this.targetName=p,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=x=>{const F=x.data;if(F.targetName!==this.sourceName)return;if(F.stream){Y(this,g,Mn).call(this,F);return}if(F.callback){const h=F.callbackId,f=this.callbackCapabilities[h];if(!f)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],F.callback===d.DATA)f.resolve(F.data);else if(F.callback===d.ERROR)f.reject(T(F.reason));else throw new Error("Unexpected callback case");return}const k=this.actionHandler[F.action];if(!k)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const h=this.sourceName,f=F.sourceName;new Promise(function(O){O(k(F.data))}).then(function(O){A.postMessage({sourceName:h,targetName:f,callback:d.DATA,callbackId:F.callbackId,data:O})},function(O){A.postMessage({sourceName:h,targetName:f,callback:d.ERROR,callbackId:F.callbackId,reason:T(O)})});return}if(F.streamId){Y(this,_,xn).call(this,F);return}k(F.data)},A.addEventListener("message",this._onComObjOnMessage)}on(b,p){const A=this.actionHandler;if(A[b])throw new Error(`There is already an actionName called "${b}"`);A[b]=p}send(b,p,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:p},A)}sendWithPromise(b,p,A){const x=this.callbackId++,F=new e.PromiseCapability;this.callbackCapabilities[x]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:x,data:p},A)}catch(k){F.reject(k)}return F.promise}sendWithStream(b,p,A,x){const F=this.streamId++,k=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:O=>{const y=new e.PromiseCapability;return this.streamControllers[F]={controller:O,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:k,targetName:h,action:b,streamId:F,data:p,desiredSize:O.desiredSize},x),y.promise},pull:O=>{const y=new e.PromiseCapability;return this.streamControllers[F].pullCall=y,f.postMessage({sourceName:k,targetName:h,stream:E.PULL,streamId:F,desiredSize:O.desiredSize}),y.promise},cancel:O=>{(0,e.assert)(O instanceof Error,"cancel must have a valid reason");const y=new e.PromiseCapability;return this.streamControllers[F].cancelCall=y,this.streamControllers[F].isClosed=!0,f.postMessage({sourceName:k,targetName:h,stream:E.CANCEL,streamId:F,reason:T(O)}),y.promise}},A)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}_=new WeakSet,xn=function(b){const p=b.streamId,A=this.sourceName,x=b.sourceName,F=this.comObj,k=this,h=this.actionHandler[b.action],f={enqueue(O,y=1,l){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=y,D>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),F.postMessage({sourceName:A,targetName:x,stream:E.ENQUEUE,streamId:p,chunk:O},l)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:A,targetName:x,stream:E.CLOSE,streamId:p}),delete k.streamSinks[p])},error(O){(0,e.assert)(O instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:A,targetName:x,stream:E.ERROR,streamId:p,reason:T(O)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[p]=f,new Promise(function(O){O(h(b.data,f))}).then(function(){F.postMessage({sourceName:A,targetName:x,stream:E.START_COMPLETE,streamId:p,success:!0})},function(O){F.postMessage({sourceName:A,targetName:x,stream:E.START_COMPLETE,streamId:p,reason:T(O)})})},g=new WeakSet,Mn=function(b){const p=b.streamId,A=this.sourceName,x=b.sourceName,F=this.comObj,k=this.streamControllers[p],h=this.streamSinks[p];switch(b.stream){case E.START_COMPLETE:b.success?k.startCall.resolve():k.startCall.reject(T(b.reason));break;case E.PULL_COMPLETE:b.success?k.pullCall.resolve():k.pullCall.reject(T(b.reason));break;case E.PULL:if(!h){F.postMessage({sourceName:A,targetName:x,stream:E.PULL_COMPLETE,streamId:p,success:!0});break}h.desiredSize<=0&&b.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=b.desiredSize,new Promise(function(f){var O;f((O=h.onPull)==null?void 0:O.call(h))}).then(function(){F.postMessage({sourceName:A,targetName:x,stream:E.PULL_COMPLETE,streamId:p,success:!0})},function(f){F.postMessage({sourceName:A,targetName:x,stream:E.PULL_COMPLETE,streamId:p,reason:T(f)})});break;case E.ENQUEUE:if((0,e.assert)(k,"enqueue should have stream controller"),k.isClosed)break;k.controller.enqueue(b.chunk);break;case E.CLOSE:if((0,e.assert)(k,"close should have stream controller"),k.isClosed)break;k.isClosed=!0,k.controller.close(),Y(this,B,ke).call(this,k,p);break;case E.ERROR:(0,e.assert)(k,"error should have stream controller"),k.controller.error(T(b.reason)),Y(this,B,ke).call(this,k,p);break;case E.CANCEL_COMPLETE:b.success?k.cancelCall.resolve():k.cancelCall.reject(T(b.reason)),Y(this,B,ke).call(this,k,p);break;case E.CANCEL:if(!h)break;new Promise(function(f){var O;f((O=h.onCancel)==null?void 0:O.call(h,T(b.reason)))}).then(function(){F.postMessage({sourceName:A,targetName:x,stream:E.CANCEL_COMPLETE,streamId:p,success:!0})},function(f){F.postMessage({sourceName:A,targetName:x,stream:E.CANCEL_COMPLETE,streamId:p,reason:T(f)})}),h.sinkCapability.reject(T(b.reason)),h.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},B=new WeakSet,ke=async function(b,p){var A,x,F;await Promise.allSettled([(A=b.startCall)==null?void 0:A.promise,(x=b.pullCall)==null?void 0:x.promise,(F=b.cancelCall)==null?void 0:F.promise]),delete this.streamControllers[p]},t.MessageHandler=V},(L,t,o)=>{var E,T;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=o(1);class d{constructor({parsedData:_,rawData:m}){j(this,E,void 0);j(this,T,void 0);st(this,E,_),st(this,T,m)}getRaw(){return n(this,T)}get(_){return n(this,E).get(_)??null}getAll(){return(0,e.objectFromMap)(n(this,E))}has(_){return n(this,E).has(_)}}E=new WeakMap,T=new WeakMap,t.Metadata=d},(L,t,o)=>{var _,m,g,N,B,I,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=o(1),d=o(8);const E=Symbol("INTERNAL");class T{constructor(p,A){j(this,_,!0);this.name=p,this.intent=A}get visible(){return n(this,_)}_setVisible(p,A){p!==E&&(0,e.unreachable)("Internal method `_setVisible` called."),st(this,_,A)}}_=new WeakMap;class V{constructor(p){j(this,I);j(this,m,null);j(this,g,new Map);j(this,N,null);j(this,B,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,st(this,B,p.order);for(const A of p.groups)n(this,g).set(A.id,new T(A.name,A.intent));if(p.baseState==="OFF")for(const A of n(this,g).values())A._setVisible(E,!1);for(const A of p.on)n(this,g).get(A)._setVisible(E,!0);for(const A of p.off)n(this,g).get(A)._setVisible(E,!1);st(this,N,this.getHash())}}isVisible(p){if(n(this,g).size===0)return!0;if(!p)return(0,e.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return n(this,g).has(p.id)?n(this,g).get(p.id).visible:((0,e.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return Y(this,I,tn).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const A of p.ids){if(!n(this,g).has(A))return(0,e.warn)(`Optional content group not found: ${A}`),!0;if(n(this,g).get(A).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const A of p.ids){if(!n(this,g).has(A))return(0,e.warn)(`Optional content group not found: ${A}`),!0;if(!n(this,g).get(A).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const A of p.ids){if(!n(this,g).has(A))return(0,e.warn)(`Optional content group not found: ${A}`),!0;if(!n(this,g).get(A).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const A of p.ids){if(!n(this,g).has(A))return(0,e.warn)(`Optional content group not found: ${A}`),!0;if(n(this,g).get(A).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,e.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,A=!0){if(!n(this,g).has(p)){(0,e.warn)(`Optional content group not found: ${p}`);return}n(this,g).get(p)._setVisible(E,!!A),st(this,m,null)}get hasInitialVisibility(){return n(this,N)===null||this.getHash()===n(this,N)}getOrder(){return n(this,g).size?n(this,B)?n(this,B).slice():[...n(this,g).keys()]:null}getGroups(){return n(this,g).size>0?(0,e.objectFromMap)(n(this,g)):null}getGroup(p){return n(this,g).get(p)||null}getHash(){if(n(this,m)!==null)return n(this,m);const p=new d.MurmurHash3_64;for(const[A,x]of n(this,g))p.update(`${A}:${x.visible}`);return st(this,m,p.hexdigest())}}m=new WeakMap,g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakSet,tn=function(p){const A=p.length;if(A<2)return!0;const x=p[0];for(let F=1;F<A;F++){const k=p[F];let h;if(Array.isArray(k))h=Y(this,I,tn).call(this,k);else if(n(this,g).has(k))h=n(this,g).get(k).visible;else return(0,e.warn)(`Optional content group not found: ${k}`),!0;switch(x){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return x==="And"},t.OptionalContentConfig=V},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=o(1),d=o(6);class E{constructor({length:m,initialData:g,progressiveDone:N=!1,contentDispositionFilename:B=null,disableRange:I=!1,disableStream:P=!1},b){if((0,e.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=B,(g==null?void 0:g.length)>0){const p=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!P,this._isRangeSupported=!I,this._contentLength=m,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,A)=>{this._onReceiveData({begin:p,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((p,A)=>{this._onProgress({loaded:p,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:m,chunk:g}){const N=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const B=this._rangeReaders.some(function(I){return I._begin!==m?!1:(I._enqueue(N),!0)});(0,e.assert)(B,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var g,N,B,I;m.total===void 0?(N=(g=this._rangeReaders[0])==null?void 0:g.onProgress)==null||N.call(g,{loaded:m.loaded}):(I=(B=this._fullRequestReader)==null?void 0:B.onProgress)==null||I.call(B,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const g=this._rangeReaders.indexOf(m);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new T(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,g){if(g<=this._progressiveDataLength)return null;const N=new V(this,m,g);return this._pdfDataRangeTransport.requestDataRange(m,g),this._rangeReaders.push(N),N}cancelAllRequests(m){var g;(g=this._fullRequestReader)==null||g.cancel(m);for(const N of this._rangeReaders.slice(0))N.cancel(m);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=E;class T{constructor(m,g,N=!1,B=null){this._stream=m,this._done=N||!1,this._filename=(0,d.isPdfFile)(B)?B:null,this._queuedChunks=g||[],this._loaded=0;for(const I of this._queuedChunks)this._loaded+=I.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new e.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class V{constructor(m,g,N){this._stream=m,this._begin=g,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new e.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=o(1),d=o(20);function E(N,B,I){return{method:"GET",headers:N,signal:I.signal,mode:"cors",credentials:B?"include":"same-origin",redirect:"follow"}}function T(N){const B=new Headers;for(const I in N){const P=N[I];P!==void 0&&B.append(I,P)}return B}function V(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,e.warn)(`getArrayBuffer - unexpected data format: ${N}`),new Uint8Array(N).buffer)}class _{constructor(B){this.source=B,this.isHttp=/^https?:/i.test(B.url),this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(B,I){if(I<=this._progressiveDataLength)return null;const P=new g(this,B,I);return this._rangeRequestReaders.push(P),P}cancelAllRequests(B){var I;(I=this._fullRequestReader)==null||I.cancel(B);for(const P of this._rangeRequestReaders.slice(0))P.cancel(B)}}t.PDFFetchStream=_;class m{constructor(B){this._stream=B,this._reader=null,this._loaded=0,this._filename=null;const I=B.source;this._withCredentials=I.withCredentials||!1,this._contentLength=I.length,this._headersCapability=new e.PromiseCapability,this._disableRange=I.disableRange||!1,this._rangeChunkSize=I.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!I.disableStream,this._isRangeSupported=!I.disableRange,this._headers=T(this._stream.httpHeaders);const P=I.url;fetch(P,E(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,d.validateResponseStatus)(b.status))throw(0,d.createResponseStatusError)(b.status,P);this._reader=b.body.getReader(),this._headersCapability.resolve();const p=F=>b.headers.get(F),{allowRangeRequests:A,suggestedLength:x}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=x||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;await this._headersCapability.promise;const{value:B,done:I}=await this._reader.read();return I?{value:B,done:I}:(this._loaded+=B.byteLength,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:V(B),done:!1})}cancel(B){var I;(I=this._reader)==null||I.cancel(B),this._abortController.abort()}}class g{constructor(B,I,P){this._stream=B,this._reader=null,this._loaded=0;const b=B.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=T(this._stream.httpHeaders),this._headers.append("Range",`bytes=${I}-${P-1}`);const p=b.url;fetch(p,E(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,d.validateResponseStatus)(A.status))throw(0,d.createResponseStatusError)(A.status,p);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;await this._readCapability.promise;const{value:B,done:I}=await this._reader.read();return I?{value:B,done:I}:(this._loaded+=B.byteLength,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded}),{value:V(B),done:!1})}cancel(B){var I;(I=this._reader)==null||I.cancel(B),this._abortController.abort()}}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=_,t.extractFilenameFromHeader=V,t.validateRangeRequestCapabilities=T,t.validateResponseStatus=m;var e=o(1),d=o(21),E=o(6);function T({getResponseHeader:g,isHttp:N,rangeChunkSize:B,disableRange:I}){const P={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(g("Content-Length"),10);return!Number.isInteger(b)||(P.suggestedLength=b,b<=2*B)||I||!N||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(P.allowRangeRequests=!0),P}function V(g){const N=g("Content-Disposition");if(N){let B=(0,d.getFilenameFromContentDispositionHeader)(N);if(B.includes("%"))try{B=decodeURIComponent(B)}catch{}if((0,E.isPdfFile)(B))return B}return null}function _(g,N){return g===404||g===0&&N.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+N+'".'):new e.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${N}".`,g)}function m(g){return g===200||g===206}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=d;var e=o(1);function d(E){let T=!0,V=_("filename\\*","i").exec(E);if(V){V=V[1];let b=B(V);return b=unescape(b),b=I(b),b=P(b),g(b)}if(V=N(E),V){const b=P(V);return g(b)}if(V=_("filename","i").exec(E),V){V=V[1];let b=B(V);return b=P(b),g(b)}function _(b,p){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function m(b,p){if(b){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const A=new TextDecoder(b,{fatal:!0}),x=(0,e.stringToBytes)(p);p=A.decode(x),T=!1}catch{}}return p}function g(b){return T&&/[\x80-\xff]/.test(b)&&(b=m("utf-8",b),T&&(b=m("iso-8859-1",b))),b}function N(b){const p=[];let A;const x=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=x.exec(b))!==null;){let[,k,h,f]=A;if(k=parseInt(k,10),k in p){if(k===0)break;continue}p[k]=[h,f]}const F=[];for(let k=0;k<p.length&&k in p;++k){let[h,f]=p[k];f=B(f),h&&(f=unescape(f),k===0&&(f=I(f))),F.push(f)}return F.join("")}function B(b){if(b.startsWith('"')){const p=b.slice(1).split('\\"');for(let A=0;A<p.length;++A){const x=p[A].indexOf('"');x!==-1&&(p[A]=p[A].slice(0,x),p.length=A+1),p[A]=p[A].replaceAll(/\\(.)/g,"$1")}b=p.join('"')}return b}function I(b){const p=b.indexOf("'");if(p===-1)return b;const A=b.slice(0,p),F=b.slice(p+1).replace(/^[^']*'/,"");return m(A,F)}function P(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,A,x,F){if(x==="q"||x==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,h){return String.fromCharCode(parseInt(h,16))}),m(A,F);try{F=atob(F)}catch{}return m(A,F)})}return""}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=o(1),d=o(20);const E=200,T=206;function V(B){const I=B.response;return typeof I!="string"?I:(0,e.stringToBytes)(I).buffer}class _{constructor(I,P={}){this.url=I,this.isHttp=/^https?:/i.test(I),this.httpHeaders=this.isHttp&&P.httpHeaders||Object.create(null),this.withCredentials=P.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(I,P,b){const p={begin:I,end:P};for(const A in b)p[A]=b[A];return this.request(p)}requestFull(I){return this.request(I)}request(I){const P=new XMLHttpRequest,b=this.currXhrId++,p=this.pendingRequests[b]={xhr:P};P.open("GET",this.url),P.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const x=this.httpHeaders[A];x!==void 0&&P.setRequestHeader(A,x)}return this.isHttp&&"begin"in I&&"end"in I?(P.setRequestHeader("Range",`bytes=${I.begin}-${I.end-1}`),p.expectedStatus=T):p.expectedStatus=E,P.responseType="arraybuffer",I.onError&&(P.onerror=function(A){I.onError(P.status)}),P.onreadystatechange=this.onStateChange.bind(this,b),P.onprogress=this.onProgress.bind(this,b),p.onHeadersReceived=I.onHeadersReceived,p.onDone=I.onDone,p.onError=I.onError,p.onProgress=I.onProgress,P.send(null),b}onProgress(I,P){var p;const b=this.pendingRequests[I];b&&((p=b.onProgress)==null||p.call(b,P))}onStateChange(I,P){var k,h,f;const b=this.pendingRequests[I];if(!b)return;const p=b.xhr;if(p.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),p.readyState!==4||!(I in this.pendingRequests))return;if(delete this.pendingRequests[I],p.status===0&&this.isHttp){(k=b.onError)==null||k.call(b,p.status);return}const A=p.status||E;if(!(A===E&&b.expectedStatus===T)&&A!==b.expectedStatus){(h=b.onError)==null||h.call(b,p.status);return}const F=V(p);if(A===T){const O=p.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(O);b.onDone({begin:parseInt(y[1],10),chunk:F})}else F?b.onDone({begin:0,chunk:F}):(f=b.onError)==null||f.call(b,p.status)}getRequestXhr(I){return this.pendingRequests[I].xhr}isPendingRequest(I){return I in this.pendingRequests}abortRequest(I){const P=this.pendingRequests[I].xhr;delete this.pendingRequests[I],P.abort()}}class m{constructor(I){this._source=I,this._manager=new _(I.url,{httpHeaders:I.httpHeaders,withCredentials:I.withCredentials}),this._rangeChunkSize=I.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(I){const P=this._rangeRequestReaders.indexOf(I);P>=0&&this._rangeRequestReaders.splice(P,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(I,P){const b=new N(this._manager,I,P);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(I){var P;(P=this._fullRequestReader)==null||P.cancel(I);for(const b of this._rangeRequestReaders.slice(0))b.cancel(I)}}t.PDFNetworkStream=m;class g{constructor(I,P){this._manager=I;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._fullRequestId=I.requestFull(b),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=P.disableRange||!1,this._contentLength=P.length,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const I=this._fullRequestId,P=this._manager.getRequestXhr(I),b=x=>P.getResponseHeader(x),{allowRangeRequests:p,suggestedLength:A}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(I),this._headersReceivedCapability.resolve()}_onDone(I){if(I&&(this._requests.length>0?this._requests.shift().resolve({value:I.chunk,done:!1}):this._cachedChunks.push(I.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(I){this._storedError=(0,d.createResponseStatusError)(I,this._url),this._headersReceivedCapability.reject(this._storedError);for(const P of this._requests)P.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(I){var P;(P=this.onProgress)==null||P.call(this,{loaded:I.loaded,total:I.lengthComputable?I.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const I=new e.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0,this._headersReceivedCapability.reject(I);for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(I,P,b){this._manager=I;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=I.url,this._requestId=I.requestRange(P,b,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var I;(I=this.onClosed)==null||I.call(this,this)}_onDone(I){const P=I.chunk;this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunk=P,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(I){this._storedError=(0,d.createResponseStatusError)(I,this._url);for(const P of this._requests)P.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(I){var P;this.isStreamingSupported||(P=this.onProgress)==null||P.call(this,{loaded:I.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const P=this._queuedChunk;return this._queuedChunk=null,{value:P,done:!1}}if(this._done)return{value:void 0,done:!0};const I=new e.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=o(1),d=o(20);const E=/^file:\/\/\/[a-zA-Z]:\//;function T(b){const p=require$$5,A=p.parse(b);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(b)?p.parse(`file:///${b}`):(A.host||(A.protocol="file:"),A)}class V{constructor(p){this.source=p,this.url=T(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new I(this):new N(this),this._fullRequestReader}getRangeReader(p,A){if(A<=this._progressiveDataLength)return null;const x=this.isFsUrl?new P(this,p,A):new B(this,p,A);return this._rangeRequestReaders.push(x),x}cancelAllRequests(p){var A;(A=this._fullRequestReader)==null||A.cancel(p);for(const x of this._rangeRequestReaders.slice(0))x.cancel(p)}}t.PDFNodeStream=V;class _{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const A=p.source;this._contentLength=A.length,this._loaded=0,this._filename=null,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=p.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",A=>{this._error(A)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const A=p.source;this._isStreamingSupported=!A.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=p.length,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",A=>{this._error(A)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(b,p){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:p}}class N extends _{constructor(p){super(p);const A=x=>{if(x.statusCode===404){const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(x);const F=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:k,suggestedLength:h}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=h||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(F)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(g(this._url,p.httpHeaders),A)}else{const x=require$$5;this._request=x.request(g(this._url,p.httpHeaders),A)}this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class B extends m{constructor(p,A,x){super(p),this._httpHeaders={};for(const k in p.httpHeaders){const h=p.httpHeaders[k];h!==void 0&&(this._httpHeaders[k]=h)}this._httpHeaders.Range=`bytes=${A}-${x-1}`;const F=k=>{if(k.statusCode===404){const h=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(k)};if(this._request=null,this._url.protocol==="http:"){const k=require$$5;this._request=k.request(g(this._url,this._httpHeaders),F)}else{const k=require$$5;this._request=k.request(g(this._url,this._httpHeaders),F)}this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class I extends _{constructor(p){super(p);let A=decodeURIComponent(this._url.path);E.test(this._url.href)&&(A=A.replace(/^\//,""));const x=require$$5;x.lstat(A,(F,k)=>{if(F){F.code==="ENOENT"&&(F=new e.MissingPDFException(`Missing PDF "${A}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=k.size,this._setReadableStream(x.createReadStream(A)),this._headersCapability.resolve()})}}class P extends m{constructor(p,A,x){super(p);let F=decodeURIComponent(this._url.path);E.test(this._url.href)&&(F=F.replace(/^\//,""));const k=require$$5;this._setReadableStream(k.createReadStream(F,{start:A,end:x-1}))}}},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=o(6),d=o(1);const E={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/1999/xlink",_=["butt","round","square"],m=["miter","round","bevel"],g=function(k,h="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([k],{type:h}));const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${h};base64,`;for(let l=0,D=k.length;l<D;l+=3){const w=k[l]&255,z=k[l+1]&255,$=k[l+2]&255,M=w>>2,K=(w&3)<<4|z>>4,rt=l+1<D?(z&15)<<2|$>>6:64,lt=l+2<D?$&63:64;y+=O[M]+O[K]+O[rt]+O[lt]}return y},N=function(){const k=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,f=new Int32Array(256);for(let $=0;$<256;$++){let M=$;for(let K=0;K<8;K++)M=M&1?3988292384^M>>1&2147483647:M>>1&2147483647;f[$]=M}function O($,M,K){let rt=-1;for(let lt=M;lt<K;lt++){const G=(rt^$[lt])&255,ht=f[G];rt=rt>>>8^ht}return rt^-1}function y($,M,K,rt){let lt=rt;const G=M.length;K[lt]=G>>24&255,K[lt+1]=G>>16&255,K[lt+2]=G>>8&255,K[lt+3]=G&255,lt+=4,K[lt]=$.charCodeAt(0)&255,K[lt+1]=$.charCodeAt(1)&255,K[lt+2]=$.charCodeAt(2)&255,K[lt+3]=$.charCodeAt(3)&255,lt+=4,K.set(M,lt),lt+=M.length;const ht=O(K,rt+4,lt);K[lt]=ht>>24&255,K[lt+1]=ht>>16&255,K[lt+2]=ht>>8&255,K[lt+3]=ht&255}function l($,M,K){let rt=1,lt=0;for(let G=M;G<K;++G)rt=(rt+($[G]&255))%65521,lt=(lt+rt)%65521;return lt<<16|rt}function D($){if(!d.isNodeJS)return w($);try{const M=parseInt(process.versions.node)>=8?$:Buffer.from($),K=require$$5.deflateSync(M,{level:9});return K instanceof Uint8Array?K:new Uint8Array(K)}catch(M){(0,d.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+M)}return w($)}function w($){let M=$.length;const K=65535,rt=Math.ceil(M/K),lt=new Uint8Array(2+M+rt*5+4);let G=0;lt[G++]=120,lt[G++]=156;let ht=0;for(;M>K;)lt[G++]=0,lt[G++]=255,lt[G++]=255,lt[G++]=0,lt[G++]=0,lt.set($.subarray(ht,ht+K),G),G+=K,ht+=K,M-=K;lt[G++]=1,lt[G++]=M&255,lt[G++]=M>>8&255,lt[G++]=~M&65535&255,lt[G++]=(~M&65535)>>8&255,lt.set($.subarray(ht),G),G+=$.length-ht;const pt=l($,0,$.length);return lt[G++]=pt>>24&255,lt[G++]=pt>>16&255,lt[G++]=pt>>8&255,lt[G++]=pt&255,lt}function z($,M,K,rt){const lt=$.width,G=$.height;let ht,pt,wt;const St=$.data;switch(M){case d.ImageKind.GRAYSCALE_1BPP:pt=0,ht=1,wt=lt+7>>3;break;case d.ImageKind.RGB_24BPP:pt=2,ht=8,wt=lt*3;break;case d.ImageKind.RGBA_32BPP:pt=6,ht=8,wt=lt*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+wt)*G);let i=0,a=0;for(let W=0;W<G;++W)C[i++]=0,C.set(St.subarray(a,a+wt),i),a+=wt,i+=wt;if(M===d.ImageKind.GRAYSCALE_1BPP&&rt){i=0;for(let W=0;W<G;W++){i++;for(let tt=0;tt<wt;tt++)C[i++]^=255}}const r=new Uint8Array([lt>>24&255,lt>>16&255,lt>>8&255,lt&255,G>>24&255,G>>16&255,G>>8&255,G&255,ht,pt,0,0,0]),c=D(C),u=k.length+h*3+r.length+c.length,v=new Uint8Array(u);let R=0;return v.set(k,R),R+=k.length,y("IHDR",r,v,R),R+=h+r.length,y("IDATA",c,v,R),R+=h+c.length,y("IEND",new Uint8Array(0),v,R),g(v,"image/png",K)}return function(M,K,rt){const lt=M.kind===void 0?d.ImageKind.GRAYSCALE_1BPP:M.kind;return z(M,lt,K,rt)}}();class B{constructor(){this.fontSizeScale=1,this.fontWeight=E.fontWeight,this.fontSize=0,this.textMatrix=d.IDENTITY_MATRIX,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=d.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=E.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,f){this.x=h,this.y=f}}function I(k){let h=[];const f=[];for(const O of k){if(O.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),f.push(h),h=h.at(-1).items;continue}O.fn==="restore"?h=f.pop():h.push(O)}return h}function P(k){if(Number.isInteger(k))return k.toString();const h=k.toFixed(10);let f=h.length-1;if(h[f]!=="0")return h;do f--;while(h[f]==="0");return h.substring(0,h[f]==="."?f:f+1)}function b(k){if(k[4]===0&&k[5]===0){if(k[1]===0&&k[2]===0)return k[0]===1&&k[3]===1?"":`scale(${P(k[0])} ${P(k[3])})`;if(k[0]===k[3]&&k[1]===-k[2]){const h=Math.acos(k[0])*180/Math.PI;return`rotate(${P(h)})`}}else if(k[0]===1&&k[1]===0&&k[2]===0&&k[3]===1)return`translate(${P(k[4])} ${P(k[5])})`;return`matrix(${P(k[0])} ${P(k[1])} ${P(k[2])} ${P(k[3])} ${P(k[4])} ${P(k[5])})`}let p=0,A=0,x=0;class F{constructor(h,f,O=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new B,this.transformMatrix=d.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=h,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!O,this._operatorIdMapping=[];for(const y in d.OPS)this._operatorIdMapping[d.OPS[y]]=y}getObject(h,f=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):f}save(){this.transformStack.push(this.transformMatrix);const h=this.current;this.extraStack.push(h),this.current=h.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(h){this.save(),this.executeOpTree(h),this.restore()}loadDependencies(h){const f=h.fnArray,O=h.argsArray;for(let y=0,l=f.length;y<l;y++)if(f[y]===d.OPS.dependency)for(const D of O[y]){const w=D.startsWith("g_")?this.commonObjs:this.objs,z=new Promise($=>{w.get(D,$)});this.current.dependencies.push(z)}return Promise.all(this.current.dependencies)}transform(h,f,O,y,l,D){const w=[h,f,O,y,l,D];this.transformMatrix=d.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(h,f){this.viewport=f;const O=this._initialize(f);return this.loadDependencies(h).then(()=>(this.transformMatrix=d.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(h)),O))}convertOpList(h){const f=this._operatorIdMapping,O=h.argsArray,y=h.fnArray,l=[];for(let D=0,w=y.length;D<w;D++){const z=y[D];l.push({fnId:z,fn:f[z],args:O[D]})}return I(l)}executeOpTree(h){for(const f of h){const O=f.fn,y=f.fnId,l=f.args;switch(y|0){case d.OPS.beginText:this.beginText();break;case d.OPS.dependency:break;case d.OPS.setLeading:this.setLeading(l);break;case d.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case d.OPS.setFont:this.setFont(l);break;case d.OPS.showText:this.showText(l[0]);break;case d.OPS.showSpacedText:this.showText(l[0]);break;case d.OPS.endText:this.endText();break;case d.OPS.moveText:this.moveText(l[0],l[1]);break;case d.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case d.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case d.OPS.setHScale:this.setHScale(l[0]);break;case d.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case d.OPS.setTextRise:this.setTextRise(l[0]);break;case d.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case d.OPS.setLineWidth:this.setLineWidth(l[0]);break;case d.OPS.setLineJoin:this.setLineJoin(l[0]);break;case d.OPS.setLineCap:this.setLineCap(l[0]);break;case d.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case d.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case d.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case d.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case d.OPS.setFillColorN:this.setFillColorN(l);break;case d.OPS.shadingFill:this.shadingFill(l[0]);break;case d.OPS.setDash:this.setDash(l[0],l[1]);break;case d.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case d.OPS.setFlatness:this.setFlatness(l[0]);break;case d.OPS.setGState:this.setGState(l[0]);break;case d.OPS.fill:this.fill();break;case d.OPS.eoFill:this.eoFill();break;case d.OPS.stroke:this.stroke();break;case d.OPS.fillStroke:this.fillStroke();break;case d.OPS.eoFillStroke:this.eoFillStroke();break;case d.OPS.clip:this.clip("nonzero");break;case d.OPS.eoClip:this.clip("evenodd");break;case d.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case d.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case d.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case d.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case d.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case d.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case d.OPS.closePath:this.closePath();break;case d.OPS.closeStroke:this.closeStroke();break;case d.OPS.closeFillStroke:this.closeFillStroke();break;case d.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case d.OPS.nextLine:this.nextLine();break;case d.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case d.OPS.constructPath:this.constructPath(l[0],l[1]);break;case d.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,d.warn)(`Unimplemented operator ${O}`);break}}}setWordSpacing(h){this.current.wordSpacing=h}setCharSpacing(h){this.current.charSpacing=h}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(h,f,O,y,l,D){const w=this.current;w.textMatrix=w.lineMatrix=[h,f,O,y,l,D],w.textMatrixScale=Math.hypot(h,f),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${P(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",P(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const h=this.current;h.x=h.lineX=0,h.y=h.lineY=0,h.textMatrix=d.IDENTITY_MATRIX,h.lineMatrix=d.IDENTITY_MATRIX,h.textMatrixScale=1,h.tspan=this.svgFactory.createElement("svg:tspan"),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtgrp=this.svgFactory.createElement("svg:g"),h.xcoords=[],h.ycoords=[]}moveText(h,f){const O=this.current;O.x=O.lineX+=h,O.y=O.lineY+=f,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${P(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",P(-O.y))}showText(h){const f=this.current,O=f.font,y=f.fontSize;if(y===0)return;const l=f.fontSizeScale,D=f.charSpacing,w=f.wordSpacing,z=f.fontDirection,$=f.textHScale*z,M=O.vertical,K=M?1:-1,rt=O.defaultVMetrics,lt=y*f.fontMatrix[0];let G=0;for(const wt of h){if(wt===null){G+=z*w;continue}else if(typeof wt=="number"){G+=K*wt*y/1e3;continue}const St=(wt.isSpace?w:0)+D,C=wt.fontChar;let i,a,r=wt.width;if(M){let u;const v=wt.vmetric||rt;u=wt.vmetric?v[1]:r*.5,u=-u*lt;const R=v[2]*lt;r=v?-v[0]:r,i=u/l,a=(G+R)/l}else i=G/l,a=0;(wt.isInFont||O.missingFile)&&(f.xcoords.push(f.x+i),M&&f.ycoords.push(-f.y+a),f.tspan.textContent+=C);const c=M?r*lt-St*z:r*lt+St*z;G+=c}f.tspan.setAttributeNS(null,"x",f.xcoords.map(P).join(" ")),M?f.tspan.setAttributeNS(null,"y",f.ycoords.map(P).join(" ")):f.tspan.setAttributeNS(null,"y",P(-f.y)),M?f.y-=G:f.x+=G*$,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${P(f.fontSize)}px`),f.fontStyle!==E.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==E.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const ht=f.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;if(ht===d.TextRenderingMode.FILL||ht===d.TextRenderingMode.FILL_STROKE?(f.fillColor!==E.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.textRenderingMode===d.TextRenderingMode.ADD_TO_PATH?f.tspan.setAttributeNS(null,"fill","transparent"):f.tspan.setAttributeNS(null,"fill","none"),ht===d.TextRenderingMode.STROKE||ht===d.TextRenderingMode.FILL_STROKE){const wt=1/(f.textMatrixScale||1);this._setStrokeAttributes(f.tspan,wt)}let pt=f.textMatrix;f.textRise!==0&&(pt=pt.slice(),pt[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${b(pt)} scale(${P($)}, -1)`),f.txtElement.setAttributeNS(T,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}addFontStyle(h){if(!h.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=g(h.data,h.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${h.loadedName}"; src: url(${f}); }
`}setFont(h){const f=this.current,O=this.commonObjs.get(h[0]);let y=h[1];f.font=O,this.embedFonts&&!O.missingFile&&!this.embeddedFonts[O.loadedName]&&(this.addFontStyle(O),this.embeddedFonts[O.loadedName]=O),f.fontMatrix=O.fontMatrix||d.FONT_IDENTITY_MATRIX;let l="normal";O.black?l="900":O.bold&&(l="bold");const D=O.italic?"italic":"normal";y<0?(y=-y,f.fontDirection=-1):f.fontDirection=1,f.fontSize=y,f.fontFamily=O.loadedName,f.fontWeight=l,f.fontStyle=D,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",P(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const h=this.current;h.textRenderingMode&d.TextRenderingMode.ADD_TO_PATH_FLAG&&((f=h.txtElement)!=null&&f.hasChildNodes())&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(h){h>0&&(this.current.lineWidth=h)}setLineCap(h){this.current.lineCap=_[h]}setLineJoin(h){this.current.lineJoin=m[h]}setMiterLimit(h){this.current.miterLimit=h}setStrokeAlpha(h){this.current.strokeAlpha=h}setStrokeRGBColor(h,f,O){this.current.strokeColor=d.Util.makeHexColor(h,f,O)}setFillAlpha(h){this.current.fillAlpha=h}setFillRGBColor(h,f,O){this.current.fillColor=d.Util.makeHexColor(h,f,O),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(h){this.current.strokeColor=this._makeColorN_Pattern(h)}setFillColorN(h){this.current.fillColor=this._makeColorN_Pattern(h)}shadingFill(h){const{width:f,height:O}=this.viewport,y=d.Util.inverseTransform(this.transformMatrix),[l,D,w,z]=d.Util.getAxialAlignedBoundingBox([0,0,f,O],y),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",l),$.setAttributeNS(null,"y",D),$.setAttributeNS(null,"width",w-l),$.setAttributeNS(null,"height",z-D),$.setAttributeNS(null,"fill",this._makeShadingPattern(h)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(h){return h[0]==="TilingPattern"?this._makeTilingPattern(h):this._makeShadingPattern(h)}_makeTilingPattern(h){const f=h[1],O=h[2],y=h[3]||d.IDENTITY_MATRIX,[l,D,w,z]=h[4],$=h[5],M=h[6],K=h[7],rt=`shading${x++}`,[lt,G,ht,pt]=d.Util.normalizeRect([...d.Util.applyTransform([l,D],y),...d.Util.applyTransform([w,z],y)]),[wt,St]=d.Util.singularValueDecompose2dScale(y),C=$*wt,i=M*St,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",rt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",C),a.setAttributeNS(null,"height",i),a.setAttributeNS(null,"x",`${lt}`),a.setAttributeNS(null,"y",`${G}`);const r=this.svg,c=this.transformMatrix,u=this.current.fillColor,v=this.current.strokeColor,R=this.svgFactory.create(ht-lt,pt-G);if(this.svg=R,this.transformMatrix=y,K===2){const W=d.Util.makeHexColor(...f);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(O)),this.svg=r,this.transformMatrix=c,this.current.fillColor=u,this.current.strokeColor=v,a.append(R.childNodes[0]),this.defs.append(a),`url(#${rt})`}_makeShadingPattern(h){switch(typeof h=="string"&&(h=this.objs.get(h)),h[0]){case"RadialAxial":const f=`shading${x++}`,O=h[3];let y;switch(h[1]){case"axial":const l=h[4],D=h[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",f),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",l[0]),y.setAttributeNS(null,"y1",l[1]),y.setAttributeNS(null,"x2",D[0]),y.setAttributeNS(null,"y2",D[1]);break;case"radial":const w=h[4],z=h[5],$=h[6],M=h[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",f),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",z[0]),y.setAttributeNS(null,"cy",z[1]),y.setAttributeNS(null,"r",M),y.setAttributeNS(null,"fx",w[0]),y.setAttributeNS(null,"fy",w[1]),y.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${h[1]}`)}for(const l of O){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",l[0]),D.setAttributeNS(null,"stop-color",l[1]),y.append(D)}return this.defs.append(y),`url(#${f})`;case"Mesh":return(0,d.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${h[0]}`)}}setDash(h,f){this.current.dashArray=h,this.current.dashPhase=f}constructPath(h,f){const O=this.current;let y=O.x,l=O.y,D=[],w=0;for(const z of h)switch(z|0){case d.OPS.rectangle:y=f[w++],l=f[w++];const $=f[w++],M=f[w++],K=y+$,rt=l+M;D.push("M",P(y),P(l),"L",P(K),P(l),"L",P(K),P(rt),"L",P(y),P(rt),"Z");break;case d.OPS.moveTo:y=f[w++],l=f[w++],D.push("M",P(y),P(l));break;case d.OPS.lineTo:y=f[w++],l=f[w++],D.push("L",P(y),P(l));break;case d.OPS.curveTo:y=f[w+4],l=f[w+5],D.push("C",P(f[w]),P(f[w+1]),P(f[w+2]),P(f[w+3]),P(y),P(l)),w+=6;break;case d.OPS.curveTo2:D.push("C",P(y),P(l),P(f[w]),P(f[w+1]),P(f[w+2]),P(f[w+3])),y=f[w+2],l=f[w+3],w+=4;break;case d.OPS.curveTo3:y=f[w+2],l=f[w+3],D.push("C",P(f[w]),P(f[w+1]),P(y),P(l),P(y),P(l)),w+=4;break;case d.OPS.closePath:D.push("Z");break}D=D.join(" "),O.path&&h.length>0&&h[0]!==d.OPS.rectangle&&h[0]!==d.OPS.moveTo?D=O.path.getAttributeNS(null,"d")+D:(O.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(O.path)),O.path.setAttributeNS(null,"d",D),O.path.setAttributeNS(null,"fill","none"),O.element=O.path,O.setCurrentPoint(y,l)}endPath(){const h=this.current;if(h.path=null,!this.pendingClip)return;if(!h.element){this.pendingClip=null;return}const f=`clippath${p++}`,O=this.svgFactory.createElement("svg:clipPath");O.setAttributeNS(null,"id",f),O.setAttributeNS(null,"transform",b(this.transformMatrix));const y=h.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,O.append(y),this.defs.append(O),h.activeClipUrl){h.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;O.setAttributeNS(null,"clip-path",h.activeClipUrl)}h.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(h){this.pendingClip=h}closePath(){const h=this.current;if(h.path){const f=`${h.path.getAttributeNS(null,"d")}Z`;h.path.setAttributeNS(null,"d",f)}}setLeading(h){this.current.leading=-h}setTextRise(h){this.current.textRise=h}setTextRenderingMode(h){this.current.textRenderingMode=h}setHScale(h){this.current.textHScale=h/100}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,O]of h)switch(f){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O);break;case"CA":this.setStrokeAlpha(O);break;case"ca":this.setFillAlpha(O);break;default:(0,d.warn)(`Unimplemented graphic state operator ${f}`);break}}fill(){const h=this.current;h.element&&(h.element.setAttributeNS(null,"fill",h.fillColor),h.element.setAttributeNS(null,"fill-opacity",h.fillAlpha),this.endPath())}stroke(){const h=this.current;h.element&&(this._setStrokeAttributes(h.element),h.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(h,f=1){const O=this.current;let y=O.dashArray;f!==1&&y.length>0&&(y=y.map(function(l){return f*l})),h.setAttributeNS(null,"stroke",O.strokeColor),h.setAttributeNS(null,"stroke-opacity",O.strokeAlpha),h.setAttributeNS(null,"stroke-miterlimit",P(O.miterLimit)),h.setAttributeNS(null,"stroke-linecap",O.lineCap),h.setAttributeNS(null,"stroke-linejoin",O.lineJoin),h.setAttributeNS(null,"stroke-width",P(f*O.lineWidth)+"px"),h.setAttributeNS(null,"stroke-dasharray",y.map(P).join(" ")),h.setAttributeNS(null,"stroke-dashoffset",P(f*O.dashPhase)+"px")}eoFill(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width","1px"),h.setAttributeNS(null,"height","1px"),h.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(h)}paintImageXObject(h){const f=this.getObject(h);if(!f){(0,d.warn)(`Dependent image with object ID ${h} is not ready yet`);return}this.paintInlineImageXObject(f)}paintInlineImageXObject(h,f){const O=h.width,y=h.height,l=N(h,this.forceDataSchema,!!f),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",P(O)),D.setAttributeNS(null,"height",P(y)),this.current.element=D,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(V,"xlink:href",l),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",P(-y)),w.setAttributeNS(null,"width",P(O)+"px"),w.setAttributeNS(null,"height",P(y)+"px"),w.setAttributeNS(null,"transform",`scale(${P(1/O)} ${P(-1/y)})`),f?f.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(h){const f=this.getObject(h.data,h);if(f.bitmap){(0,d.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const O=this.current,y=f.width,l=f.height,D=O.fillColor;O.maskId=`mask${A++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",O.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",P(y)),z.setAttributeNS(null,"height",P(l)),z.setAttributeNS(null,"fill",D),z.setAttributeNS(null,"mask",`url(#${O.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(f,w)}paintFormXObjectBegin(h,f){if(Array.isArray(h)&&h.length===6&&this.transform(h[0],h[1],h[2],h[3],h[4],h[5]),f){const O=f[2]-f[0],y=f[3]-f[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",f[0]),l.setAttributeNS(null,"y",f[1]),l.setAttributeNS(null,"width",P(O)),l.setAttributeNS(null,"height",P(y)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(h){const f=this.svgFactory.create(h.width,h.height),O=this.svgFactory.createElement("svg:defs");f.append(O),this.defs=O;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",b(h.transform)),f.append(y),this.svg=y,f}_ensureClipGroup(){if(!this.current.clipGroup){const h=this.svgFactory.createElement("svg:g");h.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(h),this.current.clipGroup=h}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=F},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class o{static textContent(d){const E=[],T={items:E,styles:Object.create(null)};function V(_){var N;if(!_)return;let m=null;const g=_.name;if(g==="#text")m=_.value;else if(o.shouldBuildText(g))(N=_==null?void 0:_.attributes)!=null&&N.textContent?m=_.attributes.textContent:_.value&&(m=_.value);else return;if(m!==null&&E.push({str:m}),!!_.children)for(const B of _.children)V(B)}return V(d),T}static shouldBuildText(d){return!(d==="textarea"||d==="input"||d==="option"||d==="select")}}t.XfaText=o},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=b,t.updateTextLayer=p;var e=o(1),d=o(6);const E=1e5,T=30,V=.8,_=new Map;function m(A,x){let F;if(x&&e.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=A,F=k.getContext("2d",{alpha:!1})}return F}function g(A,x){const F=_.get(A);if(F)return F;const k=m(T,x);k.font=`${T}px ${A}`;const h=k.measureText("");let f=h.fontBoundingBoxAscent,O=Math.abs(h.fontBoundingBoxDescent);if(f){const l=f/(f+O);return _.set(A,l),k.canvas.width=k.canvas.height=0,l}k.strokeStyle="red",k.clearRect(0,0,T,T),k.strokeText("g",0,0);let y=k.getImageData(0,0,T,T).data;O=0;for(let l=y.length-1-3;l>=0;l-=4)if(y[l]>0){O=Math.ceil(l/4/T);break}k.clearRect(0,0,T,T),k.strokeText("A",0,T),y=k.getImageData(0,0,T,T).data,f=0;for(let l=0,D=y.length;l<D;l+=4)if(y[l]>0){f=T-Math.floor(l/4/T);break}if(k.canvas.width=k.canvas.height=0,f){const l=f/(f+O);return _.set(A,l),l}return _.set(A,V),V}function N(A,x,F){const k=document.createElement("span"),h={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};A._textDivs.push(k);const f=e.Util.transform(A._transform,x.transform);let O=Math.atan2(f[1],f[0]);const y=F[x.fontName];y.vertical&&(O+=Math.PI/2);const l=Math.hypot(f[2],f[3]),D=l*g(y.fontFamily,A._isOffscreenCanvasSupported);let w,z;O===0?(w=f[4],z=f[5]-D):(w=f[4]+D*Math.sin(O),z=f[5]-D*Math.cos(O));const $="calc(var(--scale-factor)*",M=k.style;A._container===A._rootContainer?(M.left=`${(100*w/A._pageWidth).toFixed(2)}%`,M.top=`${(100*z/A._pageHeight).toFixed(2)}%`):(M.left=`${$}${w.toFixed(2)}px)`,M.top=`${$}${z.toFixed(2)}px)`),M.fontSize=`${$}${l.toFixed(2)}px)`,M.fontFamily=y.fontFamily,h.fontSize=l,k.setAttribute("role","presentation"),k.textContent=x.str,k.dir=x.dir,A._fontInspectorEnabled&&(k.dataset.fontName=x.fontName),O!==0&&(h.angle=O*(180/Math.PI));let K=!1;if(x.str.length>1)K=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const rt=Math.abs(x.transform[0]),lt=Math.abs(x.transform[3]);rt!==lt&&Math.max(rt,lt)/Math.min(rt,lt)>1.5&&(K=!0)}K&&(h.canvasWidth=y.vertical?x.height:x.width),A._textDivProperties.set(k,h),A._isReadableStream&&A._layoutText(k)}function B(A){const{div:x,scale:F,properties:k,ctx:h,prevFontSize:f,prevFontFamily:O}=A,{style:y}=x;let l="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:D}=y,{canvasWidth:w,fontSize:z}=k;(f!==z||O!==D)&&(h.font=`${z*F}px ${D}`,A.prevFontSize=z,A.prevFontFamily=D);const{width:$}=h.measureText(x.textContent);$>0&&(l=`scaleX(${w*F/$})`)}k.angle!==0&&(l=`rotate(${k.angle}deg) ${l}`),l.length>0&&(y.transform=l)}function I(A){if(A._canceled)return;const x=A._textDivs,F=A._capability;if(x.length>E){F.resolve();return}if(!A._isReadableStream)for(const h of x)A._layoutText(h);F.resolve()}class P{constructor({textContentSource:x,container:F,viewport:k,textDivs:h,textDivProperties:f,textContentItemsStr:O,isOffscreenCanvasSupported:y}){var $;this._textContentSource=x,this._isReadableStream=x instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=h||[],this._textContentItemsStr=O||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=f||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,y)};const{pageWidth:l,pageHeight:D,pageX:w,pageY:z}=k.rawDims;this._transform=[1,0,0,-1,-w,z+D],this._pageWidth=l,this._pageHeight=D,(0,d.setLayerDimensions)(F,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(x,F){for(const k of x){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),h.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),N(this,k,F)}}_layoutText(x){const F=this._layoutTextParams.properties=this._textDivProperties.get(x);if(this._layoutTextParams.div=x,B(this._layoutTextParams),F.hasText&&this._container.append(x),F.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const x=new e.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:h,done:f})=>{if(f){x.resolve();return}Object.assign(F,h.styles),this._processItems(h.items,F),k()},x.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:h}=this._textContentSource;this._processItems(k,h),x.resolve()}else throw new Error('No "textContentSource" parameter specified.');x.promise.then(()=>{F=null,I(this)},this._capability.reject)}}t.TextLayerRenderTask=P;function b(A){!A.textContentSource&&(A.textContent||A.textContentStream)&&((0,d.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),A.textContentSource=A.textContent||A.textContentStream);const{container:x,viewport:F}=A,k=getComputedStyle(x),h=k.getPropertyValue("visibility"),f=parseFloat(k.getPropertyValue("--scale-factor"));h==="visible"&&(!f||Math.abs(f-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const O=new P(A);return O._render(),O}function p({container:A,viewport:x,textDivs:F,textDivProperties:k,isOffscreenCanvasSupported:h,mustRotate:f=!0,mustRescale:O=!0}){if(f&&(0,d.setLayerDimensions)(A,{rotation:x.rotation}),O){const y=m(0,h),D={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const w of F)D.properties=k.get(w),D.div=w,B(D)}}},(L,t,o)=>{var g,N,B,I,P,b,p,A,x,F,k,en,f,xe,y,nn,D,sn;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=o(1),d=o(4),E=o(28),T=o(33),V=o(6),_=o(34);const z=class{constructor({uiManager:M,pageIndex:K,div:rt,accessibilityManager:lt,annotationLayer:G,viewport:ht,l10n:pt}){j(this,k);j(this,f);j(this,y);j(this,D);j(this,g,void 0);j(this,N,!1);j(this,B,null);j(this,I,this.pointerup.bind(this));j(this,P,this.pointerdown.bind(this));j(this,b,new Map);j(this,p,!1);j(this,A,!1);j(this,x,!1);j(this,F,void 0);const wt=[E.FreeTextEditor,T.InkEditor,_.StampEditor];if(!z._initialized){z._initialized=!0;for(const St of wt)St.initialize(pt)}M.registerEditorTypes(wt),st(this,F,M),this.pageIndex=K,this.div=rt,st(this,g,lt),st(this,B,G),this.viewport=ht,n(this,F).addLayer(this)}get isEmpty(){return n(this,b).size===0}updateToolbar(M){n(this,F).updateToolbar(M)}updateMode(M=n(this,F).getMode()){Y(this,D,sn).call(this),M===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),M!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",M===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",M===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",M===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(M){if(!M&&n(this,F).getMode()!==e.AnnotationEditorType.INK)return;if(!M){for(const rt of n(this,b).values())if(rt.isEmpty()){rt.setInBackground();return}}Y(this,f,xe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(M){n(this,F).setEditingState(M)}addCommands(M){n(this,F).addCommands(M)}enable(){this.div.style.pointerEvents="auto";const M=new Set;for(const rt of n(this,b).values())rt.enableEditing(),rt.annotationElementId&&M.add(rt.annotationElementId);if(!n(this,B))return;const K=n(this,B).getEditableAnnotations();for(const rt of K){if(rt.hide(),n(this,F).isDeletedAnnotationElement(rt.data.id)||M.has(rt.data.id))continue;const lt=this.deserialize(rt);lt&&(this.addOrRebuild(lt),lt.enableEditing())}}disable(){var K;st(this,x,!0),this.div.style.pointerEvents="none";const M=new Set;for(const rt of n(this,b).values()){if(rt.disableEditing(),!rt.annotationElementId||rt.serialize()!==null){M.add(rt.annotationElementId);continue}(K=this.getEditableAnnotation(rt.annotationElementId))==null||K.show(),rt.remove()}if(n(this,B)){const rt=n(this,B).getEditableAnnotations();for(const lt of rt){const{id:G}=lt.data;M.has(G)||n(this,F).isDeletedAnnotationElement(G)||lt.show()}}Y(this,D,sn).call(this),this.isEmpty&&(this.div.hidden=!0),st(this,x,!1)}getEditableAnnotation(M){var K;return((K=n(this,B))==null?void 0:K.getEditableAnnotation(M))||null}setActiveEditor(M){n(this,F).getActive()!==M&&n(this,F).setActiveEditor(M)}enableClick(){this.div.addEventListener("pointerdown",n(this,P)),this.div.addEventListener("pointerup",n(this,I))}disableClick(){this.div.removeEventListener("pointerdown",n(this,P)),this.div.removeEventListener("pointerup",n(this,I))}attach(M){n(this,b).set(M.id,M);const{annotationElementId:K}=M;K&&n(this,F).isDeletedAnnotationElement(K)&&n(this,F).removeDeletedAnnotationElement(M)}detach(M){var K;n(this,b).delete(M.id),(K=n(this,g))==null||K.removePointerInTextLayer(M.contentDiv),!n(this,x)&&M.annotationElementId&&n(this,F).addDeletedAnnotationElement(M)}remove(M){this.detach(M),n(this,F).removeEditor(M),M.div.contains(document.activeElement)&&setTimeout(()=>{n(this,F).focusMainContainer()},0),M.div.remove(),M.isAttachedToDOM=!1,n(this,A)||this.addInkEditorIfNeeded(!1)}changeParent(M){var K;M.parent!==this&&(M.annotationElementId&&(n(this,F).addDeletedAnnotationElement(M.annotationElementId),d.AnnotationEditor.deleteAnnotationElement(M),M.annotationElementId=null),this.attach(M),(K=M.parent)==null||K.detach(M),M.setParent(this),M.div&&M.isAttachedToDOM&&(M.div.remove(),this.div.append(M.div)))}add(M){if(this.changeParent(M),n(this,F).addEditor(M),this.attach(M),!M.isAttachedToDOM){const K=M.render();this.div.append(K),M.isAttachedToDOM=!0}M.fixAndSetPosition(),M.onceAdded(),n(this,F).addToAnnotationStorage(M)}moveEditorInDOM(M){var rt;if(!M.isAttachedToDOM)return;const{activeElement:K}=document;M.div.contains(K)&&(M._focusEventsAllowed=!1,setTimeout(()=>{M.div.contains(document.activeElement)?M._focusEventsAllowed=!0:(M.div.addEventListener("focusin",()=>{M._focusEventsAllowed=!0},{once:!0}),K.focus())},0)),M._structTreeParentId=(rt=n(this,g))==null?void 0:rt.moveElementInDOM(this.div,M.div,M.contentDiv,!0)}addOrRebuild(M){M.needsToBeRebuilt()?M.rebuild():this.add(M)}addUndoableEditor(M){const K=()=>M._uiManager.rebuild(M),rt=()=>{M.remove()};this.addCommands({cmd:K,undo:rt,mustExec:!1})}getNextId(){return n(this,F).getId()}pasteEditor(M,K){n(this,F).updateToolbar(M),n(this,F).updateMode(M);const{offsetX:rt,offsetY:lt}=Y(this,y,nn).call(this),G=this.getNextId(),ht=Y(this,k,en).call(this,{parent:this,id:G,x:rt,y:lt,uiManager:n(this,F),isCentered:!0,...K});ht&&this.add(ht)}deserialize(M){switch(M.annotationType??M.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return E.FreeTextEditor.deserialize(M,this,n(this,F));case e.AnnotationEditorType.INK:return T.InkEditor.deserialize(M,this,n(this,F));case e.AnnotationEditorType.STAMP:return _.StampEditor.deserialize(M,this,n(this,F))}return null}addNewEditor(){Y(this,f,xe).call(this,Y(this,y,nn).call(this),!0)}setSelected(M){n(this,F).setSelected(M)}toggleSelected(M){n(this,F).toggleSelected(M)}isSelected(M){return n(this,F).isSelected(M)}unselect(M){n(this,F).unselect(M)}pointerup(M){const{isMac:K}=e.FeatureTest.platform;if(!(M.button!==0||M.ctrlKey&&K)&&M.target===this.div&&n(this,p)){if(st(this,p,!1),!n(this,N)){st(this,N,!0);return}if(n(this,F).getMode()===e.AnnotationEditorType.STAMP){n(this,F).unselectAll();return}Y(this,f,xe).call(this,M,!1)}}pointerdown(M){if(n(this,p)){st(this,p,!1);return}const{isMac:K}=e.FeatureTest.platform;if(M.button!==0||M.ctrlKey&&K||M.target!==this.div)return;st(this,p,!0);const rt=n(this,F).getActive();st(this,N,!rt||rt.isEmpty())}findNewParent(M,K,rt){const lt=n(this,F).findParent(K,rt);return lt===null||lt===this?!1:(lt.changeParent(M),!0)}destroy(){var M,K;((M=n(this,F).getActive())==null?void 0:M.parent)===this&&(n(this,F).commitOrRemove(),n(this,F).setActiveEditor(null));for(const rt of n(this,b).values())(K=n(this,g))==null||K.removePointerInTextLayer(rt.contentDiv),rt.setParent(null),rt.isAttachedToDOM=!1,rt.div.remove();this.div=null,n(this,b).clear(),n(this,F).removeLayer(this)}render({viewport:M}){this.viewport=M,(0,V.setLayerDimensions)(this.div,M);for(const K of n(this,F).getEditors(this.pageIndex))this.add(K);this.updateMode()}update({viewport:M}){n(this,F).commitOrRemove(),this.viewport=M,(0,V.setLayerDimensions)(this.div,{rotation:M.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:M,pageHeight:K}=this.viewport.rawDims;return[M,K]}};let m=z;g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,x=new WeakMap,F=new WeakMap,k=new WeakSet,en=function(M){switch(n(this,F).getMode()){case e.AnnotationEditorType.FREETEXT:return new E.FreeTextEditor(M);case e.AnnotationEditorType.INK:return new T.InkEditor(M);case e.AnnotationEditorType.STAMP:return new _.StampEditor(M)}return null},f=new WeakSet,xe=function(M,K){const rt=this.getNextId(),lt=Y(this,k,en).call(this,{parent:this,id:rt,x:M.offsetX,y:M.offsetY,uiManager:n(this,F),isCentered:K});return lt&&this.add(lt),lt},y=new WeakSet,nn=function(){const{x:M,y:K,width:rt,height:lt}=this.div.getBoundingClientRect(),G=Math.max(0,M),ht=Math.max(0,K),pt=Math.min(window.innerWidth,M+rt),wt=Math.min(window.innerHeight,K+lt),St=(G+pt)/2-M,C=(ht+wt)/2-K,[i,a]=this.viewport.rotation%180===0?[St,C]:[C,St];return{offsetX:i,offsetY:a}},D=new WeakSet,sn=function(){st(this,A,!0);for(const M of n(this,b).values())M.isEmpty()&&M.remove();st(this,A,!1)},ee(m,"_initialized",!1),t.AnnotationEditorLayer=m},(L,t,o)=>{var _,m,g,N,B,I,P,b,p,A,Fn,F,Rn,h,Dn,O,ve,l,rn,w,In,$,an;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=o(1),d=o(5),E=o(4),T=o(29);const K=class extends E.AnnotationEditor{constructor(G){super({...G,name:"freeTextEditor"});j(this,A);j(this,F);j(this,h);j(this,O);j(this,l);j(this,w);j(this,$);j(this,_,this.editorDivBlur.bind(this));j(this,m,this.editorDivFocus.bind(this));j(this,g,this.editorDivInput.bind(this));j(this,N,this.editorDivKeydown.bind(this));j(this,B,void 0);j(this,I,"");j(this,P,`${this.id}-editor`);j(this,b,void 0);j(this,p,null);st(this,B,G.color||K._defaultColor||E.AnnotationEditor._defaultLineColor),st(this,b,G.fontSize||K._defaultFontSize)}static get _keyboardManager(){const G=K.prototype,ht=St=>St.isEmpty(),pt=d.AnnotationEditorUIManager.TRANSLATE_SMALL,wt=d.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new d.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],G.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],G.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],G._translateEmpty,{args:[-pt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G._translateEmpty,{args:[-wt,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],G._translateEmpty,{args:[pt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G._translateEmpty,{args:[wt,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],G._translateEmpty,{args:[0,-pt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G._translateEmpty,{args:[0,-wt],checker:ht}],[["ArrowDown","mac+ArrowDown"],G._translateEmpty,{args:[0,pt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G._translateEmpty,{args:[0,wt],checker:ht}]]))}static initialize(G){E.AnnotationEditor.initialize(G,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ht=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ht.getPropertyValue("--freetext-padding"))}static updateDefaultParams(G,ht){switch(G){case e.AnnotationEditorParamsType.FREETEXT_SIZE:K._defaultFontSize=ht;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:K._defaultColor=ht;break}}updateParams(G,ht){switch(G){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Y(this,A,Fn).call(this,ht);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Y(this,F,Rn).call(this,ht);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,K._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,K._defaultColor||E.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,n(this,b)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,n(this,B)]]}_translateEmpty(G,ht){this._uiManager.translateSelectedEditors(G,ht,!0)}getInitialTranslation(){const G=this.parentScale;return[-K._internalPadding*G,-(K._internalPadding+n(this,b))*G]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",n(this,N)),this.editorDiv.addEventListener("focus",n(this,m)),this.editorDiv.addEventListener("blur",n(this,_)),this.editorDiv.addEventListener("input",n(this,g)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",n(this,P)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",n(this,N)),this.editorDiv.removeEventListener("focus",n(this,m)),this.editorDiv.removeEventListener("blur",n(this,_)),this.editorDiv.removeEventListener("input",n(this,g)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(G){this._focusEventsAllowed&&(super.focusin(G),G.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var G;if(this.width){Y(this,$,an).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(G=this._initialOptions)!=null&&G.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const G=n(this,I),ht=st(this,I,Y(this,h,Dn).call(this).trimEnd());if(G===ht)return;const pt=wt=>{if(st(this,I,wt),!wt){this.remove();return}Y(this,l,rn).call(this),this._uiManager.rebuild(this),Y(this,O,ve).call(this)};this.addCommands({cmd:()=>{pt(ht)},undo:()=>{pt(G)},mustExec:!1}),Y(this,O,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(G){this.enterInEditMode()}keydown(G){G.target===this.div&&G.key==="Enter"&&(this.enterInEditMode(),G.preventDefault())}editorDivKeydown(G){K._keyboardManager.exec(this,G)}editorDivFocus(G){this.isEditing=!0}editorDivBlur(G){this.isEditing=!1}editorDivInput(G){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let G,ht;this.width&&(G=this.x,ht=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",n(this,P)),this.enableEditing(),E.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(wt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("aria-label",wt)}),E.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(wt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("default-content",wt)}),this.editorDiv.contentEditable=!0;const{style:pt}=this.editorDiv;if(pt.fontSize=`calc(${n(this,b)}px * var(--scale-factor))`,pt.color=n(this,B),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,d.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[wt,St]=this.parentDimensions;if(this.annotationElementId){const{position:C}=n(this,p);let[i,a]=this.getInitialTranslation();[i,a]=this.pageTranslationToScreen(i,a);const[r,c]=this.pageDimensions,[u,v]=this.pageTranslation;let R,W;switch(this.rotation){case 0:R=G+(C[0]-u)/r,W=ht+this.height-(C[1]-v)/c;break;case 90:R=G+(C[0]-u)/r,W=ht-(C[1]-v)/c,[i,a]=[a,-i];break;case 180:R=G-this.width+(C[0]-u)/r,W=ht-(C[1]-v)/c,[i,a]=[-i,-a];break;case 270:R=G+(C[0]-u-this.height*c)/r,W=ht+(C[1]-v-this.width*r)/c,[i,a]=[-a,i];break}this.setAt(R*wt,W*St,i,a)}else this.setAt(G*wt,ht*St,this.width*wt,this.height*St);Y(this,l,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(G,ht,pt){let wt=null;if(G instanceof T.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:C,fontColor:i},rect:a,rotation:r,id:c},textContent:u,textPosition:v,parent:{page:{pageNumber:R}}}=G;if(!u||u.length===0)return null;wt=G={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:C,value:u.join(`
`),position:v,pageIndex:R-1,rect:a,rotation:r,id:c,deleted:!1}}const St=super.deserialize(G,ht,pt);return st(St,b,G.fontSize),st(St,B,e.Util.makeHexColor(...G.color)),st(St,I,G.value),St.annotationElementId=G.id||null,st(St,p,wt),St}serialize(G=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ht=K._internalPadding*this.parentScale,pt=this.getRect(ht,ht),wt=E.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:n(this,B)),St={annotationType:e.AnnotationEditorType.FREETEXT,color:wt,fontSize:n(this,b),value:n(this,I),pageIndex:this.pageIndex,rect:pt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return G?St:this.annotationElementId&&!Y(this,w,In).call(this,St)?null:(St.id=this.annotationElementId,St)}};let V=K;_=new WeakMap,m=new WeakMap,g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakSet,Fn=function(G){const ht=wt=>{this.editorDiv.style.fontSize=`calc(${wt}px * var(--scale-factor))`,this.translate(0,-(wt-n(this,b))*this.parentScale),st(this,b,wt),Y(this,O,ve).call(this)},pt=n(this,b);this.addCommands({cmd:()=>{ht(G)},undo:()=>{ht(pt)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},F=new WeakSet,Rn=function(G){const ht=n(this,B);this.addCommands({cmd:()=>{st(this,B,this.editorDiv.style.color=G)},undo:()=>{st(this,B,this.editorDiv.style.color=ht)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Dn=function(){const G=this.editorDiv.getElementsByTagName("div");if(G.length===0)return this.editorDiv.innerText;const ht=[];for(const pt of G)ht.push(pt.innerText.replace(/\r\n?|\n/,""));return ht.join(`
`)},O=new WeakSet,ve=function(){const[G,ht]=this.parentDimensions;let pt;if(this.isAttachedToDOM)pt=this.div.getBoundingClientRect();else{const{currentLayer:wt,div:St}=this,C=St.style.display;St.style.display="hidden",wt.div.append(this.div),pt=St.getBoundingClientRect(),St.remove(),St.style.display=C}this.rotation%180===this.parentRotation%180?(this.width=pt.width/G,this.height=pt.height/ht):(this.width=pt.height/G,this.height=pt.width/ht),this.fixAndSetPosition()},l=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!n(this,I))for(const G of n(this,I).split(`
`)){const ht=document.createElement("div");ht.append(G?document.createTextNode(G):document.createElement("br")),this.editorDiv.append(ht)}},w=new WeakSet,In=function(G){const{value:ht,fontSize:pt,color:wt,rect:St,pageIndex:C}=n(this,p);return G.value!==ht||G.fontSize!==pt||G.rect.some((i,a)=>Math.abs(i-St[a])>=1)||G.color.some((i,a)=>i!==wt[a])||G.pageIndex!==C},$=new WeakSet,an=function(G=!1){if(!this.annotationElementId)return;if(Y(this,O,ve).call(this),!G&&(this.width===0||this.height===0)){setTimeout(()=>Y(this,$,an).call(this,!0),0);return}const ht=K._internalPadding*this.parentScale;n(this,p).rect=this.getRect(ht,ht)},ee(V,"_freeTextDefaultContent",""),ee(V,"_internalPadding",0),ee(V,"_defaultColor",null),ee(V,"_defaultFontSize",10),ee(V,"_type","freetext"),t.FreeTextEditor=V},(L,t,o)=>{var a,c,ce,v,Ln,W,tt,et,ot,dt,At,ut,Ft,Ut,Et,It,gt,nt,it,ft,Tt,Pt,Ht,On,jt,Me,$t,on,vt,ln,J,q,mt,yt,Zt,te,Z,cn,Lt,kt,Ot,Bt,Nn,bt,hn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var e=o(1),d=o(6),E=o(3),T=o(30),V=o(31),_=o(32);const m=1e3,g=9,N=new WeakSet;function B(Nt){return{width:Nt[2]-Nt[0],height:Nt[3]-Nt[1]}}class I{static create(U){switch(U.data.annotationType){case e.AnnotationType.LINK:return new b(U);case e.AnnotationType.TEXT:return new p(U);case e.AnnotationType.WIDGET:switch(U.data.fieldType){case"Tx":return new x(U);case"Btn":return U.data.radioButton?new h(U):U.data.checkBox?new k(U):new f(U);case"Ch":return new O(U);case"Sig":return new F(U)}return new A(U);case e.AnnotationType.POPUP:return new y(U);case e.AnnotationType.FREETEXT:return new D(U);case e.AnnotationType.LINE:return new w(U);case e.AnnotationType.SQUARE:return new z(U);case e.AnnotationType.CIRCLE:return new $(U);case e.AnnotationType.POLYLINE:return new M(U);case e.AnnotationType.CARET:return new rt(U);case e.AnnotationType.INK:return new lt(U);case e.AnnotationType.POLYGON:return new K(U);case e.AnnotationType.HIGHLIGHT:return new G(U);case e.AnnotationType.UNDERLINE:return new ht(U);case e.AnnotationType.SQUIGGLY:return new pt(U);case e.AnnotationType.STRIKEOUT:return new wt(U);case e.AnnotationType.STAMP:return new St(U);case e.AnnotationType.FILEATTACHMENT:return new C(U);default:return new P(U)}}}const r=class{constructor(U,{isRenderable:s=!1,ignoreBorder:S=!1,createQuadrilaterals:H=!1}={}){j(this,a,!1);this.isRenderable=s,this.data=U.data,this.layer=U.layer,this.linkService=U.linkService,this.downloadManager=U.downloadManager,this.imageResourcesPath=U.imageResourcesPath,this.renderForms=U.renderForms,this.svgFactory=U.svgFactory,this.annotationStorage=U.annotationStorage,this.enableScripting=U.enableScripting,this.hasJSActions=U.hasJSActions,this._fieldObjects=U.fieldObjects,this.parent=U.parent,s&&(this.container=this._createContainer(S)),H&&this._createQuadrilaterals()}static _hasPopupData({titleObj:U,contentsObj:s,richText:S}){return!!(U!=null&&U.str||s!=null&&s.str||S!=null&&S.str)}get hasPopupData(){return r._hasPopupData(this.data)}_createContainer(U){const{data:s,parent:{page:S,viewport:H}}=this,X=document.createElement("section");X.setAttribute("data-annotation-id",s.id),this instanceof A||(X.tabIndex=m),X.style.zIndex=this.parent.zIndex++,this.data.popupRef&&X.setAttribute("aria-haspopup","dialog"),s.noRotate&&X.classList.add("norotate");const{pageWidth:Q,pageHeight:at,pageX:_t,pageY:Mt}=H.rawDims;if(!s.rect||this instanceof y){const{rotation:Wt}=s;return!s.hasOwnCanvas&&Wt!==0&&this.setRotation(Wt,X),X}const{width:xt,height:Xt}=B(s.rect),Rt=e.Util.normalizeRect([s.rect[0],S.view[3]-s.rect[1]+S.view[1],s.rect[2],S.view[3]-s.rect[3]+S.view[1]]);if(!U&&s.borderStyle.width>0){X.style.borderWidth=`${s.borderStyle.width}px`;const Wt=s.borderStyle.horizontalCornerRadius,qt=s.borderStyle.verticalCornerRadius;if(Wt>0||qt>0){const Qt=`calc(${Wt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;X.style.borderRadius=Qt}else if(this instanceof h){const Qt=`calc(${xt}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;X.style.borderRadius=Qt}switch(s.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:X.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:X.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:X.style.borderBottomStyle="solid";break}const Kt=s.borderColor||null;Kt?(st(this,a,!0),X.style.borderColor=e.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):X.style.borderWidth=0}X.style.left=`${100*(Rt[0]-_t)/Q}%`,X.style.top=`${100*(Rt[1]-Mt)/at}%`;const{rotation:Dt}=s;return s.hasOwnCanvas||Dt===0?(X.style.width=`${100*xt/Q}%`,X.style.height=`${100*Xt/at}%`):this.setRotation(Dt,X),X}setRotation(U,s=this.container){if(!this.data.rect)return;const{pageWidth:S,pageHeight:H}=this.parent.viewport.rawDims,{width:X,height:Q}=B(this.data.rect);let at,_t;U%180===0?(at=100*X/S,_t=100*Q/H):(at=100*Q/S,_t=100*X/H),s.style.width=`${at}%`,s.style.height=`${_t}%`,s.setAttribute("data-main-rotation",(360-U)%360)}get _commonActions(){const U=(s,S,H)=>{const X=H.detail[s],Q=X[0],at=X.slice(1);H.target.style[S]=T.ColorConverters[`${Q}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[S]:T.ColorConverters[`${Q}_rgb`](at)})};return(0,e.shadow)(this,"_commonActions",{display:s=>{const{display:S}=s.detail,H=S%2===1;this.container.style.visibility=H?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:H,noPrint:S===1||S===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:S}=s.detail;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:S,noView:S})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{U("bgColor","backgroundColor",s)},fillColor:s=>{U("fillColor","backgroundColor",s)},fgColor:s=>{U("fgColor","color",s)},textColor:s=>{U("textColor","color",s)},borderColor:s=>{U("borderColor","borderColor",s)},strokeColor:s=>{U("strokeColor","borderColor",s)},rotation:s=>{const S=s.detail.rotation;this.setRotation(S),this.annotationStorage.setValue(this.data.id,{rotation:S})}})}_dispatchEventFromSandbox(U,s){const S=this._commonActions;for(const H of Object.keys(s.detail)){const X=U[H]||S[H];X==null||X(s)}}_setDefaultPropertiesFromJS(U){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const S=this._commonActions;for(const[H,X]of Object.entries(s)){const Q=S[H];if(Q){const at={detail:{[H]:X},target:U};Q(at),delete s[H]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:U}=this.data;if(!U)return;const[s,S,H,X]=this.data.rect;if(U.length===1){const[,{x:qt,y:Kt},{x:Qt,y:ie}]=U[0];if(H===qt&&X===Kt&&s===Qt&&S===ie)return}const{style:Q}=this.container;let at;if(n(this,a)){const{borderColor:qt,borderWidth:Kt}=Q;Q.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const _t=H-s,Mt=X-S,{svgFactory:xt}=this,Xt=xt.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Rt=xt.createElement("defs");Xt.append(Rt);const Dt=xt.createElement("clipPath"),Wt=`clippath_${this.data.id}`;Dt.setAttribute("id",Wt),Dt.setAttribute("clipPathUnits","objectBoundingBox"),Rt.append(Dt);for(const[,{x:qt,y:Kt},{x:Qt,y:ie}]of U){const ne=xt.createElement("rect"),se=(Qt-s)/_t,oe=(X-Kt)/Mt,le=(qt-Qt)/_t,An=(Kt-ie)/Mt;ne.setAttribute("x",se),ne.setAttribute("y",oe),ne.setAttribute("width",le),ne.setAttribute("height",An),Dt.append(ne),at==null||at.push(`<rect vector-effect="non-scaling-stroke" x="${se}" y="${oe}" width="${le}" height="${An}"/>`)}n(this,a)&&(at.push("</g></svg>')"),Q.backgroundImage=at.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${Wt})`}_createPopup(){const{container:U,data:s}=this;U.setAttribute("aria-haspopup","dialog");const S=new y({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]});this.parent.div.append(S.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(U,s=null){const S=[];if(this._fieldObjects){const H=this._fieldObjects[U];if(H)for(const{page:X,id:Q,exportValues:at}of H){if(X===-1||Q===s)continue;const _t=typeof at=="string"?at:null,Mt=document.querySelector(`[data-element-id="${Q}"]`);if(Mt&&!N.has(Mt)){(0,e.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}S.push({id:Q,exportValue:_t,domElement:Mt})}return S}for(const H of document.getElementsByName(U)){const{exportValue:X}=H,Q=H.getAttribute("data-element-id");Q!==s&&N.has(H)&&S.push({id:Q,exportValue:X,domElement:H})}return S}show(){var U;this.container&&(this.container.hidden=!1),(U=this.popup)==null||U.maybeShow()}hide(){var U;this.container&&(this.container.hidden=!0),(U=this.popup)==null||U.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const U=this.getElementsToTriggerPopup();if(Array.isArray(U))for(const s of U)s.classList.add("highlightArea");else U.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:U,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var S;(S=this.linkService.eventBus)==null||S.dispatch("switchannotationeditormode",{source:this,mode:U,editId:s})})}};let P=r;a=new WeakMap;class b extends P{constructor(s,S=null){super(s,{isRenderable:!0,ignoreBorder:!!(S!=null&&S.ignoreBorder),createQuadrilaterals:!0});j(this,c);j(this,v);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:S}=this,H=document.createElement("a");H.setAttribute("data-element-id",s.id);let X=!1;return s.url?(S.addLinkAttributes(H,s.url,s.newWindow),X=!0):s.action?(this._bindNamedAction(H,s.action),X=!0):s.attachment?(this._bindAttachment(H,s.attachment),X=!0):s.setOCGState?(Y(this,v,Ln).call(this,H,s.setOCGState),X=!0):s.dest?(this._bindLink(H,s.dest),X=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(H,s),X=!0),s.resetForm?(this._bindResetFormAction(H,s.resetForm),X=!0):this.isTooltipOnly&&!X&&(this._bindLink(H,""),X=!0)),this.container.classList.add("linkAnnotation"),X&&this.container.append(H),this.container}_bindLink(s,S){s.href=this.linkService.getDestinationHash(S),s.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||S==="")&&Y(this,c,ce).call(this)}_bindNamedAction(s,S){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(S),!1),Y(this,c,ce).call(this)}_bindAttachment(s,S){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>{var H;return(H=this.downloadManager)==null||H.openOrDownloadData(this.container,S.content,S.filename),!1},Y(this,c,ce).call(this)}_bindJSAction(s,S){s.href=this.linkService.getAnchorUrl("");const H=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const X of Object.keys(S.actions)){const Q=H.get(X);Q&&(s[Q]=()=>{var at;return(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:X}}),!1})}s.onclick||(s.onclick=()=>!1),Y(this,c,ce).call(this)}_bindResetFormAction(s,S){const H=s.onclick;if(H||(s.href=this.linkService.getAnchorUrl("")),Y(this,c,ce).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),H||(s.onclick=()=>!1);return}s.onclick=()=>{var Xt;H==null||H();const{fields:X,refs:Q,include:at}=S,_t=[];if(X.length!==0||Q.length!==0){const Rt=new Set(Q);for(const Dt of X){const Wt=this._fieldObjects[Dt]||[];for(const{id:qt}of Wt)Rt.add(qt)}for(const Dt of Object.values(this._fieldObjects))for(const Wt of Dt)Rt.has(Wt.id)===at&&_t.push(Wt)}else for(const Rt of Object.values(this._fieldObjects))_t.push(...Rt);const Mt=this.annotationStorage,xt=[];for(const Rt of _t){const{id:Dt}=Rt;switch(xt.push(Dt),Rt.type){case"text":{const qt=Rt.defaultValue||"";Mt.setValue(Dt,{value:qt});break}case"checkbox":case"radiobutton":{const qt=Rt.defaultValue===Rt.exportValues;Mt.setValue(Dt,{value:qt});break}case"combobox":case"listbox":{const qt=Rt.defaultValue||"";Mt.setValue(Dt,{value:qt});break}default:continue}const Wt=document.querySelector(`[data-element-id="${Dt}"]`);if(Wt){if(!N.has(Wt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Dt}`);continue}}else continue;Wt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:xt,name:"ResetForm"}})),!1}}}c=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},v=new WeakSet,Ln=function(s,S){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(S),!1),Y(this,c,ce).call(this)};class p extends P{constructor(U){super(U,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const U=document.createElement("img");return U.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",U.alt="[{{type}} Annotation]",U.dataset.l10nId="text_annotation_type",U.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(U),this.container}}class A extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(U){var s;this.data.hasOwnCanvas&&(((s=U.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(U.previousSibling.hidden=!0),U.hidden=!1)}_getKeyModifier(U){const{isWin:s,isMac:S}=e.FeatureTest.platform;return s&&U.ctrlKey||S&&U.metaKey}_setEventListener(U,s,S,H,X){S.includes("mouse")?U.addEventListener(S,Q=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:X(Q),shift:Q.shiftKey,modifier:this._getKeyModifier(Q)}})}):U.addEventListener(S,Q=>{var at;if(S==="blur"){if(!s.focused||!Q.relatedTarget)return;s.focused=!1}else if(S==="focus"){if(s.focused)return;s.focused=!0}X&&((at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:X(Q)}}))})}_setEventListeners(U,s,S,H){var X,Q,at;for(const[_t,Mt]of S)(Mt==="Action"||(X=this.data.actions)!=null&&X[Mt])&&((Mt==="Focus"||Mt==="Blur")&&(s||(s={focused:!1})),this._setEventListener(U,s,_t,Mt,H),Mt==="Focus"&&!((Q=this.data.actions)!=null&&Q.Blur)?this._setEventListener(U,s,"blur","Blur",null):Mt==="Blur"&&!((at=this.data.actions)!=null&&at.Focus)&&this._setEventListener(U,s,"focus","Focus",null))}_setBackgroundColor(U){const s=this.data.backgroundColor||null;U.style.backgroundColor=s===null?"transparent":e.Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(U){const s=["left","center","right"],{fontColor:S}=this.data.defaultAppearanceData,H=this.data.defaultAppearanceData.fontSize||g,X=U.style;let Q;const at=2,_t=Mt=>Math.round(10*Mt)/10;if(this.data.multiLine){const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),xt=Math.round(Mt/(e.LINE_FACTOR*H))||1,Xt=Mt/xt;Q=Math.min(H,_t(Xt/e.LINE_FACTOR))}else{const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);Q=Math.min(H,_t(Mt/e.LINE_FACTOR))}X.fontSize=`calc(${Q}px * var(--scale-factor))`,X.color=e.Util.makeHexColor(S[0],S[1],S[2]),this.data.textAlignment!==null&&(X.textAlign=s[this.data.textAlignment])}_setRequired(U,s){s?U.setAttribute("required",!0):U.removeAttribute("required"),U.setAttribute("aria-required",s)}}class x extends A{constructor(U){const s=U.renderForms||!U.data.hasAppearance&&!!U.data.fieldValue;super(U,{isRenderable:s})}setPropertyOnSiblings(U,s,S,H){const X=this.annotationStorage;for(const Q of this._getElementsByName(U.name,U.id))Q.domElement&&(Q.domElement[s]=S),X.setValue(Q.id,{[H]:S})}render(){var H,X;const U=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let S=null;if(this.renderForms){const Q=U.getValue(s,{value:this.data.fieldValue});let at=Q.value||"";const _t=U.getValue(s,{charLimit:this.data.maxLen}).charLimit;_t&&at.length>_t&&(at=at.slice(0,_t));let Mt=Q.formattedValue||((H=this.data.textContent)==null?void 0:H.join(`
`))||null;Mt&&this.data.comb&&(Mt=Mt.replaceAll(/\s+/g,""));const xt={userValue:at,formattedValue:Mt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=Mt??at,this.data.doNotScroll&&(S.style.overflowY="hidden")):(S=document.createElement("input"),S.type="text",S.setAttribute("value",Mt??at),this.data.doNotScroll&&(S.style.overflowX="hidden")),this.data.hasOwnCanvas&&(S.hidden=!0),N.add(S),S.setAttribute("data-element-id",s),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=m,this._setRequired(S,this.data.required),_t&&(S.maxLength=_t),S.addEventListener("input",Rt=>{U.setValue(s,{value:Rt.target.value}),this.setPropertyOnSiblings(S,"value",Rt.target.value,"value"),xt.formattedValue=null}),S.addEventListener("resetform",Rt=>{const Dt=this.data.defaultFieldValue??"";S.value=xt.userValue=Dt,xt.formattedValue=null});let Xt=Rt=>{const{formattedValue:Dt}=xt;Dt!=null&&(Rt.target.value=Dt),Rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",Dt=>{if(xt.focused)return;const{target:Wt}=Dt;xt.userValue&&(Wt.value=xt.userValue),xt.lastCommittedValue=Wt.value,xt.commitKey=1,xt.focused=!0}),S.addEventListener("updatefromsandbox",Dt=>{this.showElementAndHideCanvas(Dt.target);const Wt={value(qt){xt.userValue=qt.detail.value??"",U.setValue(s,{value:xt.userValue.toString()}),qt.target.value=xt.userValue},formattedValue(qt){const{formattedValue:Kt}=qt.detail;xt.formattedValue=Kt,Kt!=null&&qt.target!==document.activeElement&&(qt.target.value=Kt),U.setValue(s,{formattedValue:Kt})},selRange(qt){qt.target.setSelectionRange(...qt.detail.selRange)},charLimit:qt=>{var ne;const{charLimit:Kt}=qt.detail,{target:Qt}=qt;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let ie=xt.userValue;!ie||ie.length<=Kt||(ie=ie.slice(0,Kt),Qt.value=xt.userValue=ie,U.setValue(s,{value:ie}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Wt,Dt)}),S.addEventListener("keydown",Dt=>{var Kt;xt.commitKey=1;let Wt=-1;if(Dt.key==="Escape"?Wt=0:Dt.key==="Enter"&&!this.data.multiLine?Wt=2:Dt.key==="Tab"&&(xt.commitKey=3),Wt===-1)return;const{value:qt}=Dt.target;xt.lastCommittedValue!==qt&&(xt.lastCommittedValue=qt,xt.userValue=qt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:qt,willCommit:!0,commitKey:Wt,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}}))});const Rt=Xt;Xt=null,S.addEventListener("blur",Dt=>{var qt;if(!xt.focused||!Dt.relatedTarget)return;xt.focused=!1;const{value:Wt}=Dt.target;xt.userValue=Wt,xt.lastCommittedValue!==Wt&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Wt,willCommit:!0,commitKey:xt.commitKey,selStart:Dt.target.selectionStart,selEnd:Dt.target.selectionEnd}})),Rt(Dt)}),(X=this.data.actions)!=null&&X.Keystroke&&S.addEventListener("beforeinput",Dt=>{var oe;xt.lastCommittedValue=null;const{data:Wt,target:qt}=Dt,{value:Kt,selectionStart:Qt,selectionEnd:ie}=qt;let ne=Qt,se=ie;switch(Dt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ne-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(se+=le[0].length);break}case"deleteContentBackward":Qt===ie&&(ne-=1);break;case"deleteContentForward":Qt===ie&&(se+=1);break}Dt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Kt,change:Wt||"",willCommit:!1,selStart:ne,selEnd:se}})}),this._setEventListeners(S,xt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dt=>Dt.target.value)}if(Xt&&S.addEventListener("blur",Xt),this.data.comb){const Dt=(this.data.rect[2]-this.data.rect[0])/_t;S.classList.add("comb"),S.style.letterSpacing=`calc(${Dt}px * var(--scale-factor) - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class F extends A{constructor(U){super(U,{isRenderable:!!U.data.hasOwnCanvas})}}class k extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){const U=this.annotationStorage,s=this.data,S=s.id;let H=U.getValue(S,{value:s.exportValue===s.fieldValue}).value;typeof H=="string"&&(H=H!=="Off",U.setValue(S,{value:H})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const X=document.createElement("input");return N.add(X),X.setAttribute("data-element-id",S),X.disabled=s.readOnly,this._setRequired(X,this.data.required),X.type="checkbox",X.name=s.fieldName,H&&X.setAttribute("checked",!0),X.setAttribute("exportValue",s.exportValue),X.tabIndex=m,X.addEventListener("change",Q=>{const{name:at,checked:_t}=Q.target;for(const Mt of this._getElementsByName(at,S)){const xt=_t&&Mt.exportValue===s.exportValue;Mt.domElement&&(Mt.domElement.checked=xt),U.setValue(Mt.id,{value:xt})}U.setValue(S,{value:_t})}),X.addEventListener("resetform",Q=>{const at=s.defaultFieldValue||"Off";Q.target.checked=at===s.exportValue}),this.enableScripting&&this.hasJSActions&&(X.addEventListener("updatefromsandbox",Q=>{const at={value(_t){_t.target.checked=_t.detail.value!=="Off",U.setValue(S,{value:_t.target.checked})}};this._dispatchEventFromSandbox(at,Q)}),this._setEventListeners(X,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class h extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const U=this.annotationStorage,s=this.data,S=s.id;let H=U.getValue(S,{value:s.fieldValue===s.buttonValue}).value;typeof H=="string"&&(H=H!==s.buttonValue,U.setValue(S,{value:H}));const X=document.createElement("input");if(N.add(X),X.setAttribute("data-element-id",S),X.disabled=s.readOnly,this._setRequired(X,this.data.required),X.type="radio",X.name=s.fieldName,H&&X.setAttribute("checked",!0),X.tabIndex=m,X.addEventListener("change",Q=>{const{name:at,checked:_t}=Q.target;for(const Mt of this._getElementsByName(at,S))U.setValue(Mt.id,{value:!1});U.setValue(S,{value:_t})}),X.addEventListener("resetform",Q=>{const at=s.defaultFieldValue;Q.target.checked=at!=null&&at===s.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=s.buttonValue;X.addEventListener("updatefromsandbox",at=>{const _t={value:Mt=>{const xt=Q===Mt.detail.value;for(const Xt of this._getElementsByName(Mt.target.name)){const Rt=xt&&Xt.id===S;Xt.domElement&&(Xt.domElement.checked=Rt),U.setValue(Xt.id,{value:Rt})}}};this._dispatchEventFromSandbox(_t,at)}),this._setEventListeners(X,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class f extends b{constructor(U){super(U,{ignoreBorder:U.data.hasAppearance})}render(){const U=super.render();U.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(U.title=this.data.alternativeText);const s=U.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",S=>{this._dispatchEventFromSandbox({},S)})),U}}class O extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const U=this.annotationStorage,s=this.data.id,S=U.getValue(s,{value:this.data.fieldValue}),H=document.createElement("select");N.add(H),H.setAttribute("data-element-id",s),H.disabled=this.data.readOnly,this._setRequired(H,this.data.required),H.name=this.data.fieldName,H.tabIndex=m;let X=this.data.combo&&this.data.options.length>0;this.data.combo||(H.size=this.data.options.length,this.data.multiSelect&&(H.multiple=!0)),H.addEventListener("resetform",xt=>{const Xt=this.data.defaultFieldValue;for(const Rt of H.options)Rt.selected=Rt.value===Xt});for(const xt of this.data.options){const Xt=document.createElement("option");Xt.textContent=xt.displayValue,Xt.value=xt.exportValue,S.value.includes(xt.exportValue)&&(Xt.setAttribute("selected",!0),X=!1),H.append(Xt)}let Q=null;if(X){const xt=document.createElement("option");xt.value=" ",xt.setAttribute("hidden",!0),xt.setAttribute("selected",!0),H.prepend(xt),Q=()=>{xt.remove(),H.removeEventListener("input",Q),Q=null},H.addEventListener("input",Q)}const at=xt=>{const Xt=xt?"value":"textContent",{options:Rt,multiple:Dt}=H;return Dt?Array.prototype.filter.call(Rt,Wt=>Wt.selected).map(Wt=>Wt[Xt]):Rt.selectedIndex===-1?null:Rt[Rt.selectedIndex][Xt]};let _t=at(!1);const Mt=xt=>{const Xt=xt.target.options;return Array.prototype.map.call(Xt,Rt=>({displayValue:Rt.textContent,exportValue:Rt.value}))};return this.enableScripting&&this.hasJSActions?(H.addEventListener("updatefromsandbox",xt=>{const Xt={value(Rt){Q==null||Q();const Dt=Rt.detail.value,Wt=new Set(Array.isArray(Dt)?Dt:[Dt]);for(const qt of H.options)qt.selected=Wt.has(qt.value);U.setValue(s,{value:at(!0)}),_t=at(!1)},multipleSelection(Rt){H.multiple=!0},remove(Rt){const Dt=H.options,Wt=Rt.detail.remove;Dt[Wt].selected=!1,H.remove(Wt),Dt.length>0&&Array.prototype.findIndex.call(Dt,Kt=>Kt.selected)===-1&&(Dt[0].selected=!0),U.setValue(s,{value:at(!0),items:Mt(Rt)}),_t=at(!1)},clear(Rt){for(;H.length!==0;)H.remove(0);U.setValue(s,{value:null,items:[]}),_t=at(!1)},insert(Rt){const{index:Dt,displayValue:Wt,exportValue:qt}=Rt.detail.insert,Kt=H.children[Dt],Qt=document.createElement("option");Qt.textContent=Wt,Qt.value=qt,Kt?Kt.before(Qt):H.append(Qt),U.setValue(s,{value:at(!0),items:Mt(Rt)}),_t=at(!1)},items(Rt){const{items:Dt}=Rt.detail;for(;H.length!==0;)H.remove(0);for(const Wt of Dt){const{displayValue:qt,exportValue:Kt}=Wt,Qt=document.createElement("option");Qt.textContent=qt,Qt.value=Kt,H.append(Qt)}H.options.length>0&&(H.options[0].selected=!0),U.setValue(s,{value:at(!0),items:Mt(Rt)}),_t=at(!1)},indices(Rt){const Dt=new Set(Rt.detail.indices);for(const Wt of Rt.target.options)Wt.selected=Dt.has(Wt.index);U.setValue(s,{value:at(!0)}),_t=at(!1)},editable(Rt){Rt.target.disabled=!Rt.detail.editable}};this._dispatchEventFromSandbox(Xt,xt)}),H.addEventListener("input",xt=>{var Rt;const Xt=at(!0);U.setValue(s,{value:Xt}),xt.preventDefault(),(Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:_t,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(H,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],xt=>xt.target.value)):H.addEventListener("input",function(xt){U.setValue(s,{value:at(!0)})}),this.data.combo&&this._setTextStyle(H),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class y extends P{constructor(U){const{data:s,elements:S}=U;super(U,{isRenderable:P._hasPopupData(s)}),this.elements=S}render(){this.container.classList.add("popupAnnotation");const U=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const S of this.elements)S.popup=U,s.push(S.data.id),S.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(S=>`${e.AnnotationPrefix}${S}`).join(",")),this.container}}class l{constructor({container:U,color:s,elements:S,titleObj:H,modificationDate:X,contentsObj:Q,richText:at,parent:_t,rect:Mt,parentRect:xt,open:Xt}){j(this,Ht);j(this,jt);j(this,$t);j(this,vt);j(this,W,null);j(this,tt,Y(this,Ht,On).bind(this));j(this,et,Y(this,vt,ln).bind(this));j(this,ot,Y(this,$t,on).bind(this));j(this,dt,Y(this,jt,Me).bind(this));j(this,At,null);j(this,ut,null);j(this,Ft,null);j(this,Ut,null);j(this,Et,null);j(this,It,null);j(this,gt,!1);j(this,nt,null);j(this,it,null);j(this,ft,null);j(this,Tt,null);j(this,Pt,!1);var Dt;st(this,ut,U),st(this,Tt,H),st(this,Ft,Q),st(this,ft,at),st(this,Et,_t),st(this,At,s),st(this,it,Mt),st(this,It,xt),st(this,Ut,S);const Rt=d.PDFDateString.toDateObject(X);Rt&&st(this,W,_t.l10n.get("annotation_date_string",{date:Rt.toLocaleDateString(),time:Rt.toLocaleTimeString()})),this.trigger=S.flatMap(Wt=>Wt.getElementsToTriggerPopup());for(const Wt of this.trigger)Wt.addEventListener("click",n(this,dt)),Wt.addEventListener("mouseenter",n(this,ot)),Wt.addEventListener("mouseleave",n(this,et)),Wt.classList.add("popupTriggerArea");for(const Wt of S)(Dt=Wt.container)==null||Dt.addEventListener("keydown",n(this,tt));n(this,ut).hidden=!0,Xt&&Y(this,jt,Me).call(this)}render(){if(n(this,nt))return;const{page:{view:U},viewport:{rawDims:{pageWidth:s,pageHeight:S,pageX:H,pageY:X}}}=n(this,Et),Q=st(this,nt,document.createElement("div"));if(Q.className="popup",n(this,At)){const ne=Q.style.outlineColor=e.Util.makeHexColor(...n(this,At));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Q.style.backgroundColor=`color-mix(in srgb, ${ne} 30%, white)`:Q.style.backgroundColor=e.Util.makeHexColor(...n(this,At).map(oe=>Math.floor(.7*(255-oe)+oe)))}const at=document.createElement("span");at.className="header";const _t=document.createElement("h1");if(at.append(_t),{dir:_t.dir,str:_t.textContent}=n(this,Tt),Q.append(at),n(this,W)){const ne=document.createElement("span");ne.classList.add("popupDate"),n(this,W).then(se=>{ne.textContent=se}),at.append(ne)}const Mt=n(this,Ft),xt=n(this,ft);if(xt!=null&&xt.str&&(!(Mt!=null&&Mt.str)||Mt.str===xt.str))_.XfaLayer.render({xfaHtml:xt.html,intent:"richText",div:Q}),Q.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(Mt);Q.append(ne)}let Xt=!!n(this,It),Rt=Xt?n(this,It):n(this,it);for(const ne of n(this,Ut))if(!Rt||e.Util.intersect(ne.data.rect,Rt)!==null){Rt=ne.data.rect,Xt=!0;break}const Dt=e.Util.normalizeRect([Rt[0],U[3]-Rt[1]+U[1],Rt[2],U[3]-Rt[3]+U[1]]),Wt=5,qt=Xt?Rt[2]-Rt[0]+Wt:0,Kt=Dt[0]+qt,Qt=Dt[1],{style:ie}=n(this,ut);ie.left=`${100*(Kt-H)/s}%`,ie.top=`${100*(Qt-X)/S}%`,n(this,ut).append(Q)}_formatContents({str:U,dir:s}){const S=document.createElement("p");S.classList.add("popupContent"),S.dir=s;const H=U.split(/(?:\r\n?|\n)/);for(let X=0,Q=H.length;X<Q;++X){const at=H[X];S.append(document.createTextNode(at)),X<Q-1&&S.append(document.createElement("br"))}return S}forceHide(){st(this,Pt,this.isVisible),n(this,Pt)&&(n(this,ut).hidden=!0)}maybeShow(){n(this,Pt)&&(st(this,Pt,!1),n(this,ut).hidden=!1)}get isVisible(){return n(this,ut).hidden===!1}}W=new WeakMap,tt=new WeakMap,et=new WeakMap,ot=new WeakMap,dt=new WeakMap,At=new WeakMap,ut=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,Et=new WeakMap,It=new WeakMap,gt=new WeakMap,nt=new WeakMap,it=new WeakMap,ft=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,Ht=new WeakSet,On=function(U){U.altKey||U.shiftKey||U.ctrlKey||U.metaKey||(U.key==="Enter"||U.key==="Escape"&&n(this,gt))&&Y(this,jt,Me).call(this)},jt=new WeakSet,Me=function(){st(this,gt,!n(this,gt)),n(this,gt)?(Y(this,$t,on).call(this),n(this,ut).addEventListener("click",n(this,dt)),n(this,ut).addEventListener("keydown",n(this,tt))):(Y(this,vt,ln).call(this),n(this,ut).removeEventListener("click",n(this,dt)),n(this,ut).removeEventListener("keydown",n(this,tt)))},$t=new WeakSet,on=function(){n(this,nt)||this.render(),this.isVisible?n(this,gt)&&n(this,ut).classList.add("focused"):(n(this,ut).hidden=!1,n(this,ut).style.zIndex=parseInt(n(this,ut).style.zIndex)+1e3)},vt=new WeakSet,ln=function(){n(this,ut).classList.remove("focused"),!(n(this,gt)||!this.isVisible)&&(n(this,ut).hidden=!0,n(this,ut).style.zIndex=parseInt(n(this,ut).style.zIndex)-1e3)};class D extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0}),this.textContent=U.data.textContent,this.textPosition=U.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const U=document.createElement("div");U.classList.add("annotationTextContent"),U.setAttribute("role","comment");for(const s of this.textContent){const S=document.createElement("span");S.textContent=s,U.append(S)}this.container.append(U)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=D;class w extends P{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});j(this,J,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:S,height:H}=B(s.rect),X=this.svgFactory.create(S,H,!0),Q=st(this,J,this.svgFactory.createElement("svg:line"));return Q.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),Q.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),Q.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),Q.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),Q.setAttribute("stroke-width",s.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),X.append(Q),this.container.append(X),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,J)}addHighlightArea(){this.container.classList.add("highlightArea")}}J=new WeakMap;class z extends P{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});j(this,q,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:S,height:H}=B(s.rect),X=this.svgFactory.create(S,H,!0),Q=s.borderStyle.width,at=st(this,q,this.svgFactory.createElement("svg:rect"));return at.setAttribute("x",Q/2),at.setAttribute("y",Q/2),at.setAttribute("width",S-Q),at.setAttribute("height",H-Q),at.setAttribute("stroke-width",Q||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),X.append(at),this.container.append(X),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,q)}addHighlightArea(){this.container.classList.add("highlightArea")}}q=new WeakMap;class $ extends P{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});j(this,mt,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:S,height:H}=B(s.rect),X=this.svgFactory.create(S,H,!0),Q=s.borderStyle.width,at=st(this,mt,this.svgFactory.createElement("svg:ellipse"));return at.setAttribute("cx",S/2),at.setAttribute("cy",H/2),at.setAttribute("rx",S/2-Q/2),at.setAttribute("ry",H/2-Q/2),at.setAttribute("stroke-width",Q||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),X.append(at),this.container.append(X),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,mt)}addHighlightArea(){this.container.classList.add("highlightArea")}}mt=new WeakMap;class M extends P{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});j(this,yt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:S,height:H}=B(s.rect),X=this.svgFactory.create(S,H,!0);let Q=[];for(const _t of s.vertices){const Mt=_t.x-s.rect[0],xt=s.rect[3]-_t.y;Q.push(Mt+","+xt)}Q=Q.join(" ");const at=st(this,yt,this.svgFactory.createElement(this.svgElementName));return at.setAttribute("points",Q),at.setAttribute("stroke-width",s.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),X.append(at),this.container.append(X),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}yt=new WeakMap;class K extends M{constructor(U){super(U),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rt extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class lt extends P{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});j(this,Zt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:S,height:H}=B(s.rect),X=this.svgFactory.create(S,H,!0);for(const Q of s.inkLists){let at=[];for(const Mt of Q){const xt=Mt.x-s.rect[0],Xt=s.rect[3]-Mt.y;at.push(`${xt},${Xt}`)}at=at.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);n(this,Zt).push(_t),_t.setAttribute("points",at),_t.setAttribute("stroke-width",s.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!s.popupRef&&this.hasPopupData&&this._createPopup(),X.append(_t)}return this.container.append(X),this.container}getElementsToTriggerPopup(){return n(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,t.InkAnnotationElement=lt;class G extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class pt extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class wt extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class St extends P{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=St;class C extends P{constructor(s){var X;super(s,{isRenderable:!0});j(this,Z);j(this,te,null);const{filename:S,content:H}=this.data.file;this.filename=(0,d.getFilenameFromUrl)(S,!0),this.content=H,(X=this.linkService.eventBus)==null||X.dispatch("fileattachmentannotation",{source:this,filename:S,content:H})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:S}=this;let H;S.hasAppearance||S.fillAlpha===0?H=document.createElement("div"):(H=document.createElement("img"),H.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(S.name)?"paperclip":"pushpin"}.svg`,S.fillAlpha&&S.fillAlpha<1&&(H.style=`filter: opacity(${Math.round(S.fillAlpha*100)}%);`)),H.addEventListener("dblclick",Y(this,Z,cn).bind(this)),st(this,te,H);const{isMac:X}=e.FeatureTest.platform;return s.addEventListener("keydown",Q=>{Q.key==="Enter"&&(X?Q.metaKey:Q.ctrlKey)&&Y(this,Z,cn).call(this)}),!S.popupRef&&this.hasPopupData?this._createPopup():H.classList.add("popupTriggerArea"),s.append(H),s}getElementsToTriggerPopup(){return n(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,Z=new WeakSet,cn=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:U,accessibilityManager:s,annotationCanvasMap:S,l10n:H,page:X,viewport:Q}){j(this,Bt);j(this,bt);j(this,Lt,null);j(this,kt,null);j(this,Ot,new Map);this.div=U,st(this,Lt,s),st(this,kt,S),this.l10n=H,this.page=X,this.viewport=Q,this.zIndex=0,this.l10n||(this.l10n=V.NullL10n)}async render(U){const{annotations:s}=U,S=this.div;(0,d.setLayerDimensions)(S,this.viewport);const H=new Map,X={data:null,layer:S,linkService:U.linkService,downloadManager:U.downloadManager,imageResourcesPath:U.imageResourcesPath||"",renderForms:U.renderForms!==!1,svgFactory:new d.DOMSVGFactory,annotationStorage:U.annotationStorage||new E.AnnotationStorage,enableScripting:U.enableScripting===!0,hasJSActions:U.hasJSActions,fieldObjects:U.fieldObjects,parent:this,elements:null};for(const Q of s){if(Q.noHTML)continue;const at=Q.annotationType===e.AnnotationType.POPUP;if(at){const xt=H.get(Q.id);if(!xt)continue;X.elements=xt}else{const{width:xt,height:Xt}=B(Q.rect);if(xt<=0||Xt<=0)continue}X.data=Q;const _t=I.create(X);if(!_t.isRenderable)continue;if(!at&&Q.popupRef){const xt=H.get(Q.popupRef);xt?xt.push(_t):H.set(Q.popupRef,[_t])}_t.annotationEditorType>0&&n(this,Ot).set(_t.data.id,_t);const Mt=_t.render();Q.hidden&&(Mt.style.visibility="hidden"),Y(this,Bt,Nn).call(this,Mt,Q.id)}Y(this,bt,hn).call(this),await this.l10n.translate(S)}update({viewport:U}){const s=this.div;this.viewport=U,(0,d.setLayerDimensions)(s,{rotation:U.rotation}),Y(this,bt,hn).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(n(this,Ot).values())}getEditableAnnotation(U){return n(this,Ot).get(U)}}Lt=new WeakMap,kt=new WeakMap,Ot=new WeakMap,Bt=new WeakSet,Nn=function(U,s){var H;const S=U.firstChild||U;S.id=`${e.AnnotationPrefix}${s}`,this.div.append(U),(H=n(this,Lt))==null||H.moveElementInDOM(this.div,U,S,!1)},bt=new WeakSet,hn=function(){if(!n(this,kt))return;const U=this.div;for(const[s,S]of n(this,kt)){const H=U.querySelector(`[data-annotation-id="${s}"]`);if(!H)continue;const{firstChild:X}=H;X?X.nodeName==="CANVAS"?X.replaceWith(S):X.before(S):H.append(S)}n(this,kt).clear()},t.AnnotationLayer=i},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function o(E){return Math.floor(Math.max(0,Math.min(1,E))*255).toString(16).padStart(2,"0")}function e(E){return Math.max(0,Math.min(255,255*E))}class d{static CMYK_G([T,V,_,m]){return["G",1-Math.min(1,.3*T+.59*_+.11*V+m)]}static G_CMYK([T]){return["CMYK",0,0,0,1-T]}static G_RGB([T]){return["RGB",T,T,T]}static G_rgb([T]){return T=e(T),[T,T,T]}static G_HTML([T]){const V=o(T);return`#${V}${V}${V}`}static RGB_G([T,V,_]){return["G",.3*T+.59*V+.11*_]}static RGB_rgb(T){return T.map(e)}static RGB_HTML(T){return`#${T.map(o).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([T,V,_,m]){return["RGB",1-Math.min(1,T+m),1-Math.min(1,_+m),1-Math.min(1,V+m)]}static CMYK_rgb([T,V,_,m]){return[e(1-Math.min(1,T+m)),e(1-Math.min(1,_+m)),e(1-Math.min(1,V+m))]}static CMYK_HTML(T){const V=this.CMYK_RGB(T).slice(1);return this.RGB_HTML(V)}static RGB_CMYK([T,V,_]){const m=1-T,g=1-V,N=1-_,B=Math.min(m,g,N);return["CMYK",m,g,N,B]}}t.ColorConverters=d},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=e;const o={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};o.print_progress_percent="{{progress}}%";function e(T,V){switch(T){case"find_match_count":T=`find_match_count[${V.total===1?"one":"other"}]`;break;case"find_match_count_limit":T=`find_match_count_limit[${V.limit===1?"one":"other"}]`;break}return o[T]||""}function d(T,V){return V?T.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(_,m)=>m in V?V[m]:"{{"+m+"}}"):T}const E={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(T,V=null,_=e(T,V)){return d(_,V)},async translate(T){}};t.NullL10n=E},(L,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=o(25);class d{static setupStorage(T,V,_,m,g){const N=m.getValue(V,{value:null});switch(_.name){case"textarea":if(N.value!==null&&(T.textContent=N.value),g==="print")break;T.addEventListener("input",B=>{m.setValue(V,{value:B.target.value})});break;case"input":if(_.attributes.type==="radio"||_.attributes.type==="checkbox"){if(N.value===_.attributes.xfaOn?T.setAttribute("checked",!0):N.value===_.attributes.xfaOff&&T.removeAttribute("checked"),g==="print")break;T.addEventListener("change",B=>{m.setValue(V,{value:B.target.checked?B.target.getAttribute("xfaOn"):B.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&T.setAttribute("value",N.value),g==="print")break;T.addEventListener("input",B=>{m.setValue(V,{value:B.target.value})})}break;case"select":if(N.value!==null){T.setAttribute("value",N.value);for(const B of _.children)B.attributes.value===N.value?B.attributes.selected=!0:B.attributes.hasOwnProperty("selected")&&delete B.attributes.selected}T.addEventListener("input",B=>{const I=B.target.options,P=I.selectedIndex===-1?"":I[I.selectedIndex].value;m.setValue(V,{value:P})});break}}static setAttributes({html:T,element:V,storage:_=null,intent:m,linkService:g}){const{attributes:N}=V,B=T instanceof HTMLAnchorElement;N.type==="radio"&&(N.name=`${N.name}-${m}`);for(const[I,P]of Object.entries(N))if(P!=null)switch(I){case"class":P.length&&T.setAttribute(I,P.join(" "));break;case"dataId":break;case"id":T.setAttribute("data-element-id",P);break;case"style":Object.assign(T.style,P);break;case"textContent":T.textContent=P;break;default:(!B||I!=="href"&&I!=="newWindow")&&T.setAttribute(I,P)}B&&g.addLinkAttributes(T,N.href,N.newWindow),_&&N.dataId&&this.setupStorage(T,N.dataId,V,_)}static render(T){var b;const V=T.annotationStorage,_=T.linkService,m=T.xfaHtml,g=T.intent||"display",N=document.createElement(m.name);m.attributes&&this.setAttributes({html:N,element:m,intent:g,linkService:_});const B=[[m,-1,N]],I=T.div;if(I.append(N),T.viewport){const p=`matrix(${T.viewport.transform.join(",")})`;I.style.transform=p}g!=="richText"&&I.setAttribute("class","xfaLayer xfaFont");const P=[];for(;B.length>0;){const[p,A,x]=B.at(-1);if(A+1===p.children.length){B.pop();continue}const F=p.children[++B.at(-1)[1]];if(F===null)continue;const{name:k}=F;if(k==="#text"){const f=document.createTextNode(F.value);P.push(f),x.append(f);continue}const h=(b=F==null?void 0:F.attributes)!=null&&b.xmlns?document.createElementNS(F.attributes.xmlns,k):document.createElement(k);if(x.append(h),F.attributes&&this.setAttributes({html:h,element:F,storage:V,intent:g,linkService:_}),F.children&&F.children.length>0)B.push([F,-1,h]);else if(F.value){const f=document.createTextNode(F.value);e.XfaText.shouldBuildText(k)&&P.push(f),h.append(f)}}for(const p of I.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:P}}static update(T){const V=`matrix(${T.viewport.transform.join(",")})`;T.div.style.transform=V,T.div.hidden=!1}}t.XfaLayer=d},(L,t,o)=>{var m,g,N,B,I,P,b,p,A,x,F,k,h,f,O,Bn,l,Un,w,Hn,$,jn,K,dn,lt,Wn,ht,un,wt,zn,C,Vn,a,Gn,c,Xn,v,$n,W,ae,et,fn,dt,Fe,ut,Re,Ut,fe,It,pn,nt,De,ft,qn,Pt,gn,Vt,Yn,Gt,Kn,zt,mn,ct,Ie,q,pe;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var e=o(1),d=o(4),E=o(29),T=o(6),V=o(5);const yt=class extends d.AnnotationEditor{constructor(Z){super({...Z,name:"inkEditor"});j(this,O);j(this,l);j(this,w);j(this,$);j(this,K);j(this,lt);j(this,ht);j(this,wt);j(this,C);j(this,a);j(this,c);j(this,v);j(this,W);j(this,et);j(this,dt);j(this,ut);j(this,Ut);j(this,It);j(this,nt);j(this,Gt);j(this,zt);j(this,ct);j(this,q);j(this,m,0);j(this,g,0);j(this,N,this.canvasPointermove.bind(this));j(this,B,this.canvasPointerleave.bind(this));j(this,I,this.canvasPointerup.bind(this));j(this,P,this.canvasPointerdown.bind(this));j(this,b,new Path2D);j(this,p,!1);j(this,A,!1);j(this,x,!1);j(this,F,null);j(this,k,0);j(this,h,0);j(this,f,null);this.color=Z.color||null,this.thickness=Z.thickness||null,this.opacity=Z.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Z){d.AnnotationEditor.initialize(Z,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Z,Ct){switch(Z){case e.AnnotationEditorParamsType.INK_THICKNESS:yt._defaultThickness=Ct;break;case e.AnnotationEditorParamsType.INK_COLOR:yt._defaultColor=Ct;break;case e.AnnotationEditorParamsType.INK_OPACITY:yt._defaultOpacity=Ct/100;break}}updateParams(Z,Ct){switch(Z){case e.AnnotationEditorParamsType.INK_THICKNESS:Y(this,O,Bn).call(this,Ct);break;case e.AnnotationEditorParamsType.INK_COLOR:Y(this,l,Un).call(this,Ct);break;case e.AnnotationEditorParamsType.INK_OPACITY:Y(this,w,Hn).call(this,Ct);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,yt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,yt._defaultColor||d.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(yt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||yt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||yt._defaultColor||d.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??yt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Y(this,dt,Fe).call(this),Y(this,ut,Re).call(this)),this.isAttachedToDOM||(this.parent.add(this),Y(this,Ut,fe).call(this)),Y(this,q,pe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,n(this,F).disconnect(),st(this,F,null),super.remove())}setParent(Z){!this.parent&&Z?this._uiManager.removeShouldRescale(this):this.parent&&Z===null&&this._uiManager.addShouldRescale(this),super.setParent(Z)}onScaleChanging(){const[Z,Ct]=this.parentDimensions,Lt=this.width*Z,kt=this.height*Ct;this.setDimensions(Lt,kt)}enableEditMode(){n(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",n(this,P)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",n(this,P)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){n(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),st(this,p,!0),this.div.classList.add("disabled"),Y(this,q,pe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Z){this._focusEventsAllowed&&(super.focusin(Z),this.enableEditMode())}canvasPointerdown(Z){Z.button!==0||!this.isInEditMode()||n(this,p)||(this.setInForeground(),Z.preventDefault(),Z.type!=="mouse"&&this.div.focus(),Y(this,lt,Wn).call(this,Z.offsetX,Z.offsetY))}canvasPointermove(Z){Z.preventDefault(),Y(this,ht,un).call(this,Z.offsetX,Z.offsetY)}canvasPointerup(Z){Z.preventDefault(),Y(this,et,fn).call(this,Z)}canvasPointerleave(Z){Y(this,et,fn).call(this,Z)}get isResizable(){return!this.isEmpty()&&n(this,p)}render(){if(this.div)return this.div;let Z,Ct;this.width&&(Z=this.x,Ct=this.y),super.render(),d.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var bt;return(bt=this.div)==null?void 0:bt.setAttribute("aria-label",Jt)});const[Lt,kt,Ot,Bt]=Y(this,$,jn).call(this);if(this.setAt(Lt,kt,0,0),this.setDims(Ot,Bt),Y(this,dt,Fe).call(this),this.width){const[Jt,bt]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*bt),this.setAt(Z*Jt,Ct*bt,this.width*Jt,this.height*bt),st(this,x,!0),Y(this,Ut,fe).call(this),this.setDims(this.width*Jt,this.height*bt),Y(this,W,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Y(this,ut,Re).call(this),this.div}setDimensions(Z,Ct){const Lt=Math.round(Z),kt=Math.round(Ct);if(n(this,k)===Lt&&n(this,h)===kt)return;st(this,k,Lt),st(this,h,kt),this.canvas.style.visibility="hidden";const[Ot,Bt]=this.parentDimensions;this.width=Z/Ot,this.height=Ct/Bt,this.fixAndSetPosition(),n(this,p)&&Y(this,It,pn).call(this,Z,Ct),Y(this,Ut,fe).call(this),Y(this,W,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Z,Ct,Lt){var X,Q,at;if(Z instanceof E.InkAnnotationElement)return null;const kt=super.deserialize(Z,Ct,Lt);kt.thickness=Z.thickness,kt.color=e.Util.makeHexColor(...Z.color),kt.opacity=Z.opacity;const[Ot,Bt]=kt.pageDimensions,Jt=kt.width*Ot,bt=kt.height*Bt,Yt=kt.parentScale,Nt=Z.thickness/2;st(kt,p,!0),st(kt,k,Math.round(Jt)),st(kt,h,Math.round(bt));const{paths:U,rect:s,rotation:S}=Z;for(let{bezier:_t}of U){_t=Y(X=yt,Vt,Yn).call(X,_t,s,S);const Mt=[];kt.paths.push(Mt);let xt=Yt*(_t[0]-Nt),Xt=Yt*(_t[1]-Nt);for(let Dt=2,Wt=_t.length;Dt<Wt;Dt+=6){const qt=Yt*(_t[Dt]-Nt),Kt=Yt*(_t[Dt+1]-Nt),Qt=Yt*(_t[Dt+2]-Nt),ie=Yt*(_t[Dt+3]-Nt),ne=Yt*(_t[Dt+4]-Nt),se=Yt*(_t[Dt+5]-Nt);Mt.push([[xt,Xt],[qt,Kt],[Qt,ie],[ne,se]]),xt=ne,Xt=se}const Rt=Y(this,ft,qn).call(this,Mt);kt.bezierPath2D.push(Rt)}const H=Y(Q=kt,zt,mn).call(Q);return st(kt,g,Math.max(d.AnnotationEditor.MIN_SIZE,H[2]-H[0])),st(kt,m,Math.max(d.AnnotationEditor.MIN_SIZE,H[3]-H[1])),Y(at=kt,It,pn).call(at,Jt,bt),kt}serialize(){if(this.isEmpty())return null;const Z=this.getRect(0,0),Ct=d.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:Ct,thickness:this.thickness,opacity:this.opacity,paths:Y(this,Gt,Kn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Z),pageIndex:this.pageIndex,rect:Z,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};let _=yt;m=new WeakMap,g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,x=new WeakMap,F=new WeakMap,k=new WeakMap,h=new WeakMap,f=new WeakMap,O=new WeakSet,Bn=function(Z){const Ct=this.thickness;this.addCommands({cmd:()=>{this.thickness=Z,Y(this,q,pe).call(this)},undo:()=>{this.thickness=Ct,Y(this,q,pe).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Un=function(Z){const Ct=this.color;this.addCommands({cmd:()=>{this.color=Z,Y(this,W,ae).call(this)},undo:()=>{this.color=Ct,Y(this,W,ae).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Hn=function(Z){Z/=100;const Ct=this.opacity;this.addCommands({cmd:()=>{this.opacity=Z,Y(this,W,ae).call(this)},undo:()=>{this.opacity=Ct,Y(this,W,ae).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,jn=function(){const{parentRotation:Z,parentDimensions:[Ct,Lt]}=this;switch(Z){case 90:return[0,Lt,Lt,Ct];case 180:return[Ct,Lt,Ct,Lt];case 270:return[Ct,0,Lt,Ct];default:return[0,0,Ct,Lt]}},K=new WeakSet,dn=function(){const{ctx:Z,color:Ct,opacity:Lt,thickness:kt,parentScale:Ot,scaleFactor:Bt}=this;Z.lineWidth=kt*Ot/Bt,Z.lineCap="round",Z.lineJoin="round",Z.miterLimit=10,Z.strokeStyle=`${Ct}${(0,V.opacityToHex)(Lt)}`},lt=new WeakSet,Wn=function(Z,Ct){this.canvas.addEventListener("contextmenu",T.noContextMenu),this.canvas.addEventListener("pointerleave",n(this,B)),this.canvas.addEventListener("pointermove",n(this,N)),this.canvas.addEventListener("pointerup",n(this,I)),this.canvas.removeEventListener("pointerdown",n(this,P)),this.isEditing=!0,n(this,x)||(st(this,x,!0),Y(this,Ut,fe).call(this),this.thickness||(this.thickness=yt._defaultThickness),this.color||(this.color=yt._defaultColor||d.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=yt._defaultOpacity)),this.currentPath.push([Z,Ct]),st(this,A,!1),Y(this,K,dn).call(this),st(this,f,()=>{Y(this,a,Gn).call(this),n(this,f)&&window.requestAnimationFrame(n(this,f))}),window.requestAnimationFrame(n(this,f))},ht=new WeakSet,un=function(Z,Ct){const[Lt,kt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Z===Lt&&Ct===kt)return;const Ot=this.currentPath;let Bt=n(this,b);if(Ot.push([Z,Ct]),st(this,A,!0),Ot.length<=2){Bt.moveTo(...Ot[0]),Bt.lineTo(Z,Ct);return}Ot.length===3&&(st(this,b,Bt=new Path2D),Bt.moveTo(...Ot[0])),Y(this,c,Xn).call(this,Bt,...Ot.at(-3),...Ot.at(-2),Z,Ct)},wt=new WeakSet,zn=function(){if(this.currentPath.length===0)return;const Z=this.currentPath.at(-1);n(this,b).lineTo(...Z)},C=new WeakSet,Vn=function(Z,Ct){st(this,f,null),Z=Math.min(Math.max(Z,0),this.canvas.width),Ct=Math.min(Math.max(Ct,0),this.canvas.height),Y(this,ht,un).call(this,Z,Ct),Y(this,wt,zn).call(this);let Lt;if(this.currentPath.length!==1)Lt=Y(this,v,$n).call(this);else{const bt=[Z,Ct];Lt=[[bt,bt.slice(),bt.slice(),bt]]}const kt=n(this,b),Ot=this.currentPath;this.currentPath=[],st(this,b,new Path2D);const Bt=()=>{this.allRawPaths.push(Ot),this.paths.push(Lt),this.bezierPath2D.push(kt),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Y(this,dt,Fe).call(this),Y(this,ut,Re).call(this)),Y(this,q,pe).call(this))};this.addCommands({cmd:Bt,undo:Jt,mustExec:!0})},a=new WeakSet,Gn=function(){if(!n(this,A))return;st(this,A,!1);const Z=Math.ceil(this.thickness*this.parentScale),Ct=this.currentPath.slice(-3),Lt=Ct.map(Bt=>Bt[0]),kt=Ct.map(Bt=>Bt[1]);Math.min(...Lt)-Z,Math.max(...Lt)+Z,Math.min(...kt)-Z,Math.max(...kt)+Z;const{ctx:Ot}=this;Ot.save(),Ot.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Bt of this.bezierPath2D)Ot.stroke(Bt);Ot.stroke(n(this,b)),Ot.restore()},c=new WeakSet,Xn=function(Z,Ct,Lt,kt,Ot,Bt,Jt){const bt=(Ct+kt)/2,Yt=(Lt+Ot)/2,Nt=(kt+Bt)/2,U=(Ot+Jt)/2;Z.bezierCurveTo(bt+2*(kt-bt)/3,Yt+2*(Ot-Yt)/3,Nt+2*(kt-Nt)/3,U+2*(Ot-U)/3,Nt,U)},v=new WeakSet,$n=function(){const Z=this.currentPath;if(Z.length<=2)return[[Z[0],Z[0],Z.at(-1),Z.at(-1)]];const Ct=[];let Lt,[kt,Ot]=Z[0];for(Lt=1;Lt<Z.length-2;Lt++){const[s,S]=Z[Lt],[H,X]=Z[Lt+1],Q=(s+H)/2,at=(S+X)/2,_t=[kt+2*(s-kt)/3,Ot+2*(S-Ot)/3],Mt=[Q+2*(s-Q)/3,at+2*(S-at)/3];Ct.push([[kt,Ot],_t,Mt,[Q,at]]),[kt,Ot]=[Q,at]}const[Bt,Jt]=Z[Lt],[bt,Yt]=Z[Lt+1],Nt=[kt+2*(Bt-kt)/3,Ot+2*(Jt-Ot)/3],U=[bt+2*(Bt-bt)/3,Yt+2*(Jt-Yt)/3];return Ct.push([[kt,Ot],Nt,U,[bt,Yt]]),Ct},W=new WeakSet,ae=function(){if(this.isEmpty()){Y(this,nt,De).call(this);return}Y(this,K,dn).call(this);const{canvas:Z,ctx:Ct}=this;Ct.setTransform(1,0,0,1,0,0),Ct.clearRect(0,0,Z.width,Z.height),Y(this,nt,De).call(this);for(const Lt of this.bezierPath2D)Ct.stroke(Lt)},et=new WeakSet,fn=function(Z){this.canvas.removeEventListener("pointerleave",n(this,B)),this.canvas.removeEventListener("pointermove",n(this,N)),this.canvas.removeEventListener("pointerup",n(this,I)),this.canvas.addEventListener("pointerdown",n(this,P)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",T.noContextMenu)},10),Y(this,C,Vn).call(this,Z.offsetX,Z.offsetY),this.addToAnnotationStorage(),this.setInBackground()},dt=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",d.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Z=>{var Ct;return(Ct=this.canvas)==null?void 0:Ct.setAttribute("aria-label",Z)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ut=new WeakSet,Re=function(){st(this,F,new ResizeObserver(Z=>{const Ct=Z[0].contentRect;Ct.width&&Ct.height&&this.setDimensions(Ct.width,Ct.height)})),n(this,F).observe(this.div)},Ut=new WeakSet,fe=function(){if(!n(this,x))return;const[Z,Ct]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Z),this.canvas.height=Math.ceil(this.height*Ct),Y(this,nt,De).call(this)},It=new WeakSet,pn=function(Z,Ct){const Lt=Y(this,ct,Ie).call(this),kt=(Z-Lt)/n(this,g),Ot=(Ct-Lt)/n(this,m);this.scaleFactor=Math.min(kt,Ot)},nt=new WeakSet,De=function(){const Z=Y(this,ct,Ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Z,this.translationY*this.scaleFactor+Z)},ft=new WeakSet,qn=function(Z){const Ct=new Path2D;for(let Lt=0,kt=Z.length;Lt<kt;Lt++){const[Ot,Bt,Jt,bt]=Z[Lt];Lt===0&&Ct.moveTo(...Ot),Ct.bezierCurveTo(Bt[0],Bt[1],Jt[0],Jt[1],bt[0],bt[1])}return Ct},Pt=new WeakSet,gn=function(Z,Ct,Lt){const[kt,Ot,Bt,Jt]=Ct;switch(Lt){case 0:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2)Z[bt]+=kt,Z[bt+1]=Jt-Z[bt+1];break;case 90:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2){const Nt=Z[bt];Z[bt]=Z[bt+1]+kt,Z[bt+1]=Nt+Ot}break;case 180:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2)Z[bt]=Bt-Z[bt],Z[bt+1]+=Ot;break;case 270:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2){const Nt=Z[bt];Z[bt]=Bt-Z[bt+1],Z[bt+1]=Jt-Nt}break;default:throw new Error("Invalid rotation")}return Z},Vt=new WeakSet,Yn=function(Z,Ct,Lt){const[kt,Ot,Bt,Jt]=Ct;switch(Lt){case 0:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2)Z[bt]-=kt,Z[bt+1]=Jt-Z[bt+1];break;case 90:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2){const Nt=Z[bt];Z[bt]=Z[bt+1]-Ot,Z[bt+1]=Nt-kt}break;case 180:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2)Z[bt]=Bt-Z[bt],Z[bt+1]-=Ot;break;case 270:for(let bt=0,Yt=Z.length;bt<Yt;bt+=2){const Nt=Z[bt];Z[bt]=Jt-Z[bt+1],Z[bt+1]=Bt-Nt}break;default:throw new Error("Invalid rotation")}return Z},Gt=new WeakSet,Kn=function(Z,Ct,Lt,kt){var Yt,Nt;const Ot=[],Bt=this.thickness/2,Jt=Z*Ct+Bt,bt=Z*Lt+Bt;for(const U of this.paths){const s=[],S=[];for(let H=0,X=U.length;H<X;H++){const[Q,at,_t,Mt]=U[H],xt=Z*Q[0]+Jt,Xt=Z*Q[1]+bt,Rt=Z*at[0]+Jt,Dt=Z*at[1]+bt,Wt=Z*_t[0]+Jt,qt=Z*_t[1]+bt,Kt=Z*Mt[0]+Jt,Qt=Z*Mt[1]+bt;H===0&&(s.push(xt,Xt),S.push(xt,Xt)),s.push(Rt,Dt,Wt,qt,Kt,Qt),S.push(Rt,Dt),H===X-1&&S.push(Kt,Qt)}Ot.push({bezier:Y(Yt=yt,Pt,gn).call(Yt,s,kt,this.rotation),points:Y(Nt=yt,Pt,gn).call(Nt,S,kt,this.rotation)})}return Ot},zt=new WeakSet,mn=function(){let Z=1/0,Ct=-1/0,Lt=1/0,kt=-1/0;for(const Ot of this.paths)for(const[Bt,Jt,bt,Yt]of Ot){const Nt=e.Util.bezierBoundingBox(...Bt,...Jt,...bt,...Yt);Z=Math.min(Z,Nt[0]),Lt=Math.min(Lt,Nt[1]),Ct=Math.max(Ct,Nt[2]),kt=Math.max(kt,Nt[3])}return[Z,Lt,Ct,kt]},ct=new WeakSet,Ie=function(){return n(this,p)?Math.ceil(this.thickness*this.parentScale):0},q=new WeakSet,pe=function(Z=!1){if(this.isEmpty())return;if(!n(this,p)){Y(this,W,ae).call(this);return}const Ct=Y(this,zt,mn).call(this),Lt=Y(this,ct,Ie).call(this);st(this,g,Math.max(d.AnnotationEditor.MIN_SIZE,Ct[2]-Ct[0])),st(this,m,Math.max(d.AnnotationEditor.MIN_SIZE,Ct[3]-Ct[1]));const kt=Math.ceil(Lt+n(this,g)*this.scaleFactor),Ot=Math.ceil(Lt+n(this,m)*this.scaleFactor),[Bt,Jt]=this.parentDimensions;this.width=kt/Bt,this.height=Ot/Jt,this.setAspectRatio(kt,Ot);const bt=this.translationX,Yt=this.translationY;this.translationX=-Ct[0],this.translationY=-Ct[1],Y(this,Ut,fe).call(this),Y(this,W,ae).call(this),st(this,k,kt),st(this,h,Ot),this.setDims(kt,Ot);const Nt=Z?Lt/this.scaleFactor/2:0;this.translate(bt-this.translationX-Nt,Yt-this.translationY-Nt)},j(_,ft),j(_,Pt),j(_,Vt),ee(_,"_defaultColor",null),ee(_,"_defaultOpacity",1),ee(_,"_defaultThickness",1),ee(_,"_type","ink"),t.InkEditor=_},(L,t,o)=>{var _,m,g,N,B,I,P,b,p,A,x,ye,k,Se,f,Le,y,_n,D,Jn,z,Qn,M,bn,rt,Oe,G,Zn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var e=o(1),d=o(4),E=o(6),T=o(29);const pt=class extends d.AnnotationEditor{constructor(C){super({...C,name:"stampEditor"});j(this,x);j(this,k);j(this,f);j(this,y);j(this,D);j(this,z);j(this,M);j(this,rt);j(this,G);j(this,_,null);j(this,m,null);j(this,g,null);j(this,N,null);j(this,B,null);j(this,I,null);j(this,P,null);j(this,b,null);j(this,p,!1);j(this,A,!1);st(this,N,C.bitmapUrl),st(this,B,C.bitmapFile)}static initialize(C){d.AnnotationEditor.initialize(C)}static get supportedTypes(){const C=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",C.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(C){return this.supportedTypes.includes(C)}static paste(C,i){i.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:C.getAsFile()})}remove(){var C,i;n(this,m)&&(st(this,_,null),this._uiManager.imageManager.deleteId(n(this,m)),(C=n(this,I))==null||C.remove(),st(this,I,null),(i=n(this,P))==null||i.disconnect(),st(this,P,null)),super.remove()}rebuild(){if(!this.parent){n(this,m)&&Y(this,f,Le).call(this);return}super.rebuild(),this.div!==null&&(n(this,m)&&Y(this,f,Le).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(n(this,g)||n(this,_)||n(this,N)||n(this,B))}get isResizable(){return!0}render(){if(this.div)return this.div;let C,i;if(this.width&&(C=this.x,i=this.y),super.render(),this.div.hidden=!0,n(this,_)?Y(this,y,_n).call(this):Y(this,f,Le).call(this),this.width){const[a,r]=this.parentDimensions;this.setAt(C*a,i*r,this.width*a,this.height*r)}return this.div}static deserialize(C,i,a){if(C instanceof T.StampAnnotationElement)return null;const r=super.deserialize(C,i,a),{rect:c,bitmapUrl:u,bitmapId:v,isSvg:R,accessibilityData:W}=C;v&&a.imageManager.isValidId(v)?st(r,m,v):st(r,N,u),st(r,p,R);const[tt,et]=r.pageDimensions;return r.width=(c[2]-c[0])/tt,r.height=(c[3]-c[1])/et,W&&(r.altTextData=W),r}serialize(C=!1,i=null){if(this.isEmpty())return null;const a={annotationType:e.AnnotationEditorType.STAMP,bitmapId:n(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:n(this,p),structTreeParentId:this._structTreeParentId};if(C)return a.bitmapUrl=Y(this,rt,Oe).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:r,altText:c}=this.altTextData;if(!r&&c&&(a.accessibilityData={type:"Figure",alt:c}),i===null)return a;i.stamps||(i.stamps=new Map);const u=n(this,p)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!i.stamps.has(n(this,m)))i.stamps.set(n(this,m),{area:u,serialized:a}),a.bitmap=Y(this,rt,Oe).call(this,!1);else if(n(this,p)){const v=i.stamps.get(n(this,m));u>v.area&&(v.area=u,v.serialized.bitmap.close(),v.serialized.bitmap=Y(this,rt,Oe).call(this,!1))}return a}};let V=pt;_=new WeakMap,m=new WeakMap,g=new WeakMap,N=new WeakMap,B=new WeakMap,I=new WeakMap,P=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,x=new WeakSet,ye=function(C,i=!1){if(!C){this.remove();return}st(this,_,C.bitmap),i||(st(this,m,C.id),st(this,p,C.isSvg)),Y(this,y,_n).call(this)},k=new WeakSet,Se=function(){st(this,g,null),this._uiManager.enableWaiting(!1),n(this,I)&&this.div.focus()},f=new WeakSet,Le=function(){if(n(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(n(this,m)).then(i=>Y(this,x,ye).call(this,i,!0)).finally(()=>Y(this,k,Se).call(this));return}if(n(this,N)){const i=n(this,N);st(this,N,null),this._uiManager.enableWaiting(!0),st(this,g,this._uiManager.imageManager.getFromUrl(i).then(a=>Y(this,x,ye).call(this,a)).finally(()=>Y(this,k,Se).call(this)));return}if(n(this,B)){const i=n(this,B);st(this,B,null),this._uiManager.enableWaiting(!0),st(this,g,this._uiManager.imageManager.getFromFile(i).then(a=>Y(this,x,ye).call(this,a)).finally(()=>Y(this,k,Se).call(this)));return}const C=document.createElement("input");C.type="file",C.accept=pt.supportedTypesStr,st(this,g,new Promise(i=>{C.addEventListener("change",async()=>{if(!C.files||C.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(C.files[0]);Y(this,x,ye).call(this,a)}i()}),C.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>Y(this,k,Se).call(this))),C.click()},y=new WeakSet,_n=function(){const{div:C}=this;let{width:i,height:a}=n(this,_);const[r,c]=this.pageDimensions,u=.75;if(this.width)i=this.width*r,a=this.height*c;else if(i>u*r||a>u*c){const tt=Math.min(u*r/i,u*c/a);i*=tt,a*=tt}const[v,R]=this.parentDimensions;this.setDims(i*v/r,a*R/c),this._uiManager.enableWaiting(!1);const W=st(this,I,document.createElement("canvas"));C.append(W),C.hidden=!1,Y(this,M,bn).call(this,i,a),Y(this,G,Zn).call(this),n(this,A)||(this.parent.addUndoableEditor(this),st(this,A,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},D=new WeakSet,Jn=function(C,i){var u;const[a,r]=this.parentDimensions;this.width=C/a,this.height=i/r,this.setDims(C,i),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,n(this,b)!==null&&clearTimeout(n(this,b)),st(this,b,setTimeout(()=>{st(this,b,null),Y(this,M,bn).call(this,C,i)},200))},z=new WeakSet,Qn=function(C,i){const{width:a,height:r}=n(this,_);let c=a,u=r,v=n(this,_);for(;c>2*C||u>2*i;){const R=c,W=u;c>2*C&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const tt=new OffscreenCanvas(c,u);tt.getContext("2d").drawImage(v,0,0,R,W,0,0,c,u),v=tt.transferToImageBitmap()}return v},M=new WeakSet,bn=function(C,i){C=Math.ceil(C),i=Math.ceil(i);const a=n(this,I);if(!a||a.width===C&&a.height===i)return;a.width=C,a.height=i;const r=n(this,p)?n(this,_):Y(this,z,Qn).call(this,C,i),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(r,0,0,r.width,r.height,0,0,C,i)},rt=new WeakSet,Oe=function(C){if(C){if(n(this,p)){const r=this._uiManager.imageManager.getSvgUrl(n(this,m));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=n(this,_),i.getContext("2d").drawImage(n(this,_),0,0),i.toDataURL()}if(n(this,p)){const[i,a]=this.pageDimensions,r=Math.round(this.width*i*E.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*E.PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(r,c);return u.getContext("2d").drawImage(n(this,_),0,0,n(this,_).width,n(this,_).height,0,0,r,c),u.transferToImageBitmap()}return structuredClone(n(this,_))},G=new WeakSet,Zn=function(){st(this,P,new ResizeObserver(C=>{const i=C[0].contentRect;i.width&&i.height&&Y(this,D,Jn).call(this,i.width,i.height)})),n(this,P).observe(this.div)},ee(V,"_type","stamp"),t.StampEditor=V}],__webpack_module_cache__={};function __w_pdfjs_require__(L){var t=__webpack_module_cache__[L];if(t!==void 0)return t.exports;var o=__webpack_module_cache__[L]={exports:{}};return __webpack_modules__[L](o,o.exports,__w_pdfjs_require__),o.exports}var __webpack_exports__={};return(()=>{var L=__webpack_exports__;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(L,"AnnotationEditorLayer",{enumerable:!0,get:function(){return E.AnnotationEditorLayer}}),Object.defineProperty(L,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(L,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(L,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return T.AnnotationEditorUIManager}}),Object.defineProperty(L,"AnnotationLayer",{enumerable:!0,get:function(){return V.AnnotationLayer}}),Object.defineProperty(L,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(L,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(L,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(L,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(L,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _.GlobalWorkerOptions}}),Object.defineProperty(L,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(L,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(L,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(L,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(L,"PDFDataRangeTransport",{enumerable:!0,get:function(){return o.PDFDataRangeTransport}}),Object.defineProperty(L,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(L,"PDFWorker",{enumerable:!0,get:function(){return o.PDFWorker}}),Object.defineProperty(L,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(L,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(L,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(L,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(L,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(L,"SVGGraphics",{enumerable:!0,get:function(){return o.SVGGraphics}}),Object.defineProperty(L,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(L,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(L,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(L,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(L,"build",{enumerable:!0,get:function(){return o.build}}),Object.defineProperty(L,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(L,"getDocument",{enumerable:!0,get:function(){return o.getDocument}}),Object.defineProperty(L,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(L,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(L,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(L,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(L,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(L,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(L,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(L,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(L,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(L,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(L,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(L,"updateTextLayer",{enumerable:!0,get:function(){return d.updateTextLayer}}),Object.defineProperty(L,"version",{enumerable:!0,get:function(){return o.version}});var t=__w_pdfjs_require__(1),o=__w_pdfjs_require__(2),e=__w_pdfjs_require__(6),d=__w_pdfjs_require__(26),E=__w_pdfjs_require__(27),T=__w_pdfjs_require__(5),V=__w_pdfjs_require__(29),_=__w_pdfjs_require__(14),m=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);const onPrint=L=>{let t;t||(t=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=L},calcRT=L=>{let o=L.split(" ").length;if(o>0)return Math.ceil(o/200)},getPageText=(L,t)=>new Promise(function(o,e){t.getPage(L).then(function(d){d.getTextContent().then(function(E){for(var T=E.items,V="",_=0;_<T.length;_++){var m=T[_];V+=m.str+" "}o(V)})})}),savePDF=async({fileUrl:L,data:t,name:o="download.pdf"})=>{const e=document.createElement("a");e.download=o,e.rel="noopener",L||(L=`data:application/pdf;base64,${btoa(t)}`);let d=await fetch(L).then(T=>T.blob());(!d||!(d instanceof Blob))&&console.log("Invalid blob object passed to URL.createObjectURL()"),typeof URL.createObjectURL>"u"&&console.log("Your browser does not support URL.createObjectURL()");const E=URL.createObjectURL(d);e.href=E,e.click(),URL.revokeObjectURL(e.href)};function cubicOut(L){const t=L-1;return t*t*t+1}function scale(L,{delay:t=0,duration:o=400,easing:e=cubicOut,start:d=0,opacity:E=0}={}){const T=getComputedStyle(L),V=+T.opacity,_=T.transform==="none"?"":T.transform,m=1-d,g=V*(1-E);return{delay:t,duration:o,easing:e,css:(N,B)=>`
			transform: ${_} scale(${1-m*B});
			opacity: ${V-g*B}
		`}}class ClassBuilder{constructor(t,o){this.defaults=typeof t=="function"?t(o):t,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...t){return this}get(){return this.classes}replace(t,o=!0){return o&&t&&(this.classes=Object.keys(t).reduce((e,d)=>e.replace(new RegExp(d,"g"),t[d]),this.classes)),this}remove(t,o=!0){return o&&t&&(this.classes=t.split(" ").reduce((e,d)=>e.replace(new RegExp(d,"g"),""),this.classes)),this}add(t,o=!0,e){if(!o||!t)return this;switch(typeof t){case"string":default:return this.classes+=` ${t} `,this;case"function":return this.classes+=` ${t(e||this.classes)} `,this}}}const Tooltip_svelte_svelte_type_style_lang="",get_activator_slot_changes=L=>({}),get_activator_slot_context=L=>({});function create_if_block$2(L){let t,o,e,d,E;const T=L[8].default,V=create_slot(T,L,L[7],null);return{c(){t=element("div"),V&&V.c(),this.h()},l(_){t=claim_element(_,"DIV",{class:!0});var m=children(t);V&&V.l(m),m.forEach(detach),this.h()},h(){attr(t,"class",o=null_to_empty(L[1])+" svelte-10lk5cm")},m(_,m){insert_hydration(_,t,m),V&&V.m(t,null),E=!0},p(_,m){V&&V.p&&(!E||m&128)&&update_slot_base(V,T,_,_[7],E?get_slot_changes(T,_[7],m,null):get_all_dirty_from_scope(_[7]),null),(!E||m&2&&o!==(o=null_to_empty(_[1])+" svelte-10lk5cm"))&&attr(t,"class",o)},i(_){E||(transition_in(V,_),_&&add_render_callback(()=>{E&&(d&&d.end(1),e=create_in_transition(t,scale,{duration:150}),e.start())}),E=!0)},o(_){transition_out(V,_),e&&e.invalidate(),_&&(d=create_out_transition(t,scale,{duration:150,delay:100})),E=!1},d(_){_&&detach(t),V&&V.d(_),_&&d&&d.end()}}}function create_fragment$2(L){let t,o,e,d,E,T;const V=L[8].activator,_=create_slot(V,L,L[7],get_activator_slot_context);let m=L[0]&&create_if_block$2(L);return{c(){t=element("div"),o=element("div"),_&&_.c(),e=space(),m&&m.c(),this.h()},l(g){t=claim_element(g,"DIV",{class:!0});var N=children(t);o=claim_element(N,"DIV",{});var B=children(o);_&&_.l(B),B.forEach(detach),e=claim_space(N),m&&m.l(N),N.forEach(detach),this.h()},h(){attr(t,"class","activator svelte-10lk5cm")},m(g,N){insert_hydration(g,t,N),append_hydration(t,o),_&&_.m(o,null),append_hydration(t,e),m&&m.m(t,null),d=!0,E||(T=[listen(o,"mouseenter",debounce(L[2],100)),listen(o,"mouseleave",debounce(L[3],500)),listen(o,"mouseenter",L[9]),listen(o,"mouseleave",L[10]),listen(o,"focus",L[11]),listen(o,"blur",L[12])],E=!0)},p(g,[N]){_&&_.p&&(!d||N&128)&&update_slot_base(_,V,g,g[7],d?get_slot_changes(V,g[7],N,get_activator_slot_changes):get_all_dirty_from_scope(g[7]),get_activator_slot_context),g[0]?m?(m.p(g,N),N&1&&transition_in(m,1)):(m=create_if_block$2(g),m.c(),transition_in(m,1),m.m(t,null)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(g){d||(transition_in(_,g),transition_in(m),d=!0)},o(g){transition_out(_,g),transition_out(m),d=!1},d(g){g&&detach(t),_&&_.d(g),m&&m.d(),E=!1,run_all(T)}}}const classesDefault="tooltip";function debounce(L,t,o){let e;return function(){let d=this,E=arguments,T=function(){e=null,o||L.apply(d,E)},V=o&&!e;clearTimeout(e),e=setTimeout(T,t),V&&L.apply(d,E)}}function instance$2(L,t,o){let e,{$$slots:d={},$$scope:E}=t,{class:T=""}=t,{classes:V=classesDefault}=t,{show:_=!1}=t,{timeout:m=null}=t;const g=new ClassBuilder(V,classesDefault);function N(){_||(o(0,_=!0),m&&o(4,m=setTimeout(()=>{o(0,_=!1)},m)))}function B(){_&&(o(0,_=!1),clearTimeout(m))}function I(A){bubble.call(this,L,A)}function P(A){bubble.call(this,L,A)}function b(A){bubble.call(this,L,A)}function p(A){bubble.call(this,L,A)}return L.$$set=A=>{"class"in A&&o(5,T=A.class),"classes"in A&&o(6,V=A.classes),"show"in A&&o(0,_=A.show),"timeout"in A&&o(4,m=A.timeout),"$$scope"in A&&o(7,E=A.$$scope)},L.$$.update=()=>{L.$$.dirty&96&&o(1,e=g.flush().add(V,!0,classesDefault).add(T).get())},[_,e,N,B,m,T,V,E,d,I,P,b,p]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$2,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}const PdfViewer_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_else_block_1(L){let t,o,e;return{c(){t=element("div"),o=element("canvas"),this.h()},l(d){t=claim_element(d,"DIV",{class:!0});var E=children(t);o=claim_element(E,"CANVAS",{class:!0}),children(o).forEach(detach),E.forEach(detach),this.h()},h(){attr(o,"class","svelte-19h83wp"),attr(t,"class",e=null_to_empty(L[6]===!0?"viewer":"null")+" svelte-19h83wp")},m(d,E){insert_hydration(d,t,E),append_hydration(t,o),L[54](o)},p(d,E){E[0]&64&&e!==(e=null_to_empty(d[6]===!0?"viewer":"null")+" svelte-19h83wp")&&attr(t,"class",e)},i:noop,o:noop,d(d){d&&detach(t),L[54](null)}}}function create_if_block_1(L){let t,o,e=L[5].includes("navigation"),d,E=L[5].includes("zoom"),T,V=L[5].includes("print"),_,m=L[5].includes("rotate"),g,N=L[5].includes("download"),B,I=L[5].includes("autoflip"),P,b,p,A,x,F,k,h,f,O,y,l,D,w,z,$,M,K,rt,lt,G,ht,pt,wt,St,C=e&&create_if_block_8(L),i=E&&create_if_block_7(L),a=V&&create_if_block_6(L),r=m&&create_if_block_5(L),c=N&&create_if_block_4(L),u=I&&create_if_block_2(L);return{c(){t=element("div"),o=element("div"),C&&C.c(),d=space(),i&&i.c(),T=space(),a&&a.c(),_=space(),r&&r.c(),g=space(),c&&c.c(),B=space(),u&&u.c(),P=space(),b=element("span"),p=svg_element("svg"),A=svg_element("path"),x=space(),F=element("span"),k=text(L[10]),h=text(" min read"),O=space(),y=element("span"),l=svg_element("svg"),D=svg_element("path"),w=space(),z=element("div"),$=text(`Page :
              `),M=element("span"),K=text(`
              /
              `),rt=element("span"),G=space(),ht=element("div"),pt=element("canvas"),this.h()},l(v){t=claim_element(v,"DIV",{class:!0});var R=children(t);o=claim_element(R,"DIV",{class:!0});var W=children(o);C&&C.l(W),d=claim_space(W),i&&i.l(W),T=claim_space(W),a&&a.l(W),_=claim_space(W),r&&r.l(W),g=claim_space(W),c&&c.l(W),B=claim_space(W),u&&u.l(W),P=claim_space(W),b=claim_element(W,"SPAN",{class:!0,style:!0});var tt=children(b);p=claim_svg_element(tt,"svg",{class:!0,xmlns:!0,viewBox:!0});var et=children(p);A=claim_svg_element(et,"path",{d:!0}),children(A).forEach(detach),et.forEach(detach),x=claim_space(tt),F=claim_element(tt,"SPAN",{class:!0});var ot=children(F);k=claim_text(ot,L[10]),h=claim_text(ot," min read"),ot.forEach(detach),tt.forEach(detach),O=claim_space(W),y=claim_element(W,"SPAN",{class:!0,style:!0});var dt=children(y);l=claim_svg_element(dt,"svg",{class:!0,xmlns:!0,viewBox:!0});var At=children(l);D=claim_svg_element(At,"path",{d:!0}),children(D).forEach(detach),At.forEach(detach),w=claim_space(dt),z=claim_element(dt,"DIV",{class:!0});var ut=children(z);$=claim_text(ut,`Page :
              `),M=claim_element(ut,"SPAN",{}),children(M).forEach(detach),K=claim_text(ut,`
              /
              `),rt=claim_element(ut,"SPAN",{}),children(rt).forEach(detach),ut.forEach(detach),dt.forEach(detach),W.forEach(detach),G=claim_space(R),ht=claim_element(R,"DIV",{class:!0});var Ft=children(ht);pt=claim_element(Ft,"CANVAS",{width:!0,height:!0,class:!0}),children(pt).forEach(detach),Ft.forEach(detach),R.forEach(detach),this.h()},h(){attr(A,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59
                12l3.53-3.54z`),attr(p,"class","icon svelte-19h83wp"),attr(p,"xmlns","http://www.w3.org/2000/svg"),attr(p,"viewBox","0 0 20 20"),attr(F,"class","text svelte-19h83wp"),attr(b,"class","page-info svelte-19h83wp"),attr(b,"style",f=L[5].includes("timeInfo")?"":"display: none;"),attr(D,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(z,"class","text svelte-19h83wp"),attr(y,"class","page-info svelte-19h83wp"),attr(y,"style",lt=L[5].includes("pageInfo")?"":"display: none;"),attr(o,"class","line svelte-19h83wp"),attr(pt,"width",L[16]),attr(pt,"height",L[17]),attr(pt,"class","svelte-19h83wp"),attr(ht,"class",wt=null_to_empty(L[6]===!0?"viewer":"null")+" svelte-19h83wp"),attr(t,"class","control-start svelte-19h83wp")},m(v,R){insert_hydration(v,t,R),append_hydration(t,o),C&&C.m(o,null),append_hydration(o,d),i&&i.m(o,null),append_hydration(o,T),a&&a.m(o,null),append_hydration(o,_),r&&r.m(o,null),append_hydration(o,g),c&&c.m(o,null),append_hydration(o,B),u&&u.m(o,null),append_hydration(o,P),append_hydration(o,b),append_hydration(b,p),append_hydration(p,A),append_hydration(b,x),append_hydration(b,F),append_hydration(F,k),append_hydration(F,h),append_hydration(o,O),append_hydration(o,y),append_hydration(y,l),append_hydration(l,D),append_hydration(y,w),append_hydration(y,z),append_hydration(z,$),append_hydration(z,M),L[51](M),append_hydration(z,K),append_hydration(z,rt),L[52](rt),append_hydration(t,G),append_hydration(t,ht),append_hydration(ht,pt),L[53](pt),St=!0},p(v,R){R[0]&32&&(e=v[5].includes("navigation")),e?C?(C.p(v,R),R[0]&32&&transition_in(C,1)):(C=create_if_block_8(v),C.c(),transition_in(C,1),C.m(o,d)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros()),R[0]&32&&(E=v[5].includes("zoom")),E?i?(i.p(v,R),R[0]&32&&transition_in(i,1)):(i=create_if_block_7(v),i.c(),transition_in(i,1),i.m(o,T)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros()),R[0]&32&&(V=v[5].includes("print")),V?a?(a.p(v,R),R[0]&32&&transition_in(a,1)):(a=create_if_block_6(v),a.c(),transition_in(a,1),a.m(o,_)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros()),R[0]&32&&(m=v[5].includes("rotate")),m?r?(r.p(v,R),R[0]&32&&transition_in(r,1)):(r=create_if_block_5(v),r.c(),transition_in(r,1),r.m(o,g)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros()),R[0]&32&&(N=v[5].includes("download")),N?c?(c.p(v,R),R[0]&32&&transition_in(c,1)):(c=create_if_block_4(v),c.c(),transition_in(c,1),c.m(o,B)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros()),R[0]&32&&(I=v[5].includes("autoflip")),I?u?(u.p(v,R),R[0]&32&&transition_in(u,1)):(u=create_if_block_2(v),u.c(),transition_in(u,1),u.m(o,P)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),(!St||R[0]&1024)&&set_data(k,v[10]),(!St||R[0]&32&&f!==(f=v[5].includes("timeInfo")?"":"display: none;"))&&attr(b,"style",f),(!St||R[0]&32&&lt!==(lt=v[5].includes("pageInfo")?"":"display: none;"))&&attr(y,"style",lt),(!St||R[0]&65536)&&attr(pt,"width",v[16]),(!St||R[0]&131072)&&attr(pt,"height",v[17]),(!St||R[0]&64&&wt!==(wt=null_to_empty(v[6]===!0?"viewer":"null")+" svelte-19h83wp"))&&attr(ht,"class",wt)},i(v){St||(transition_in(C),transition_in(i),transition_in(a),transition_in(r),transition_in(c),transition_in(u),St=!0)},o(v){transition_out(C),transition_out(i),transition_out(a),transition_out(r),transition_out(c),transition_out(u),St=!1},d(v){v&&detach(t),C&&C.d(),i&&i.d(),a&&a.d(),r&&r.d(),c&&c.d(),u&&u.d(),L[51](null),L[52](null),L[53](null)}}}function create_if_block$1(L){let t,o,e="This document requires a password to open:",d,E,T,V,_,m,g,N,B="Submit",I,P;return{c(){t=element("div"),o=element("p"),o.textContent=e,d=space(),E=element("p"),T=text(L[15]),V=space(),_=element("div"),m=element("input"),g=space(),N=element("button"),N.textContent=B,this.h()},l(b){t=claim_element(b,"DIV",{class:!0});var p=children(t);o=claim_element(p,"P",{["data-svelte-h"]:!0}),get_svelte_dataset(o)!=="svelte-1d6vq7g"&&(o.textContent=e),d=claim_space(p),E=claim_element(p,"P",{class:!0});var A=children(E);T=claim_text(A,L[15]),A.forEach(detach),V=claim_space(p),_=claim_element(p,"DIV",{class:!0});var x=children(_);m=claim_element(x,"INPUT",{type:!0,class:!0}),g=claim_space(x),N=claim_element(x,"BUTTON",{class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(N)!=="svelte-pjp04f"&&(N.textContent=B),x.forEach(detach),p.forEach(detach),this.h()},h(){attr(E,"class","password-message svelte-19h83wp"),attr(m,"type","password"),attr(m,"class","password-input svelte-19h83wp"),attr(N,"class","password-button svelte-19h83wp"),attr(_,"class","password-container svelte-19h83wp"),attr(t,"class","password-viewer svelte-19h83wp")},m(b,p){insert_hydration(b,t,p),append_hydration(t,o),append_hydration(t,d),append_hydration(t,E),append_hydration(E,T),append_hydration(t,V),append_hydration(t,_),append_hydration(_,m),set_input_value(m,L[13]),append_hydration(_,g),append_hydration(_,N),I||(P=[listen(m,"input",L[41]),listen(N,"click",L[25])],I=!0)},p(b,p){p[0]&32768&&set_data(T,b[15]),p[0]&8192&&m.value!==b[13]&&set_input_value(m,b[13])},i:noop,o:noop,d(b){b&&detach(t),I=!1,run_all(P)}}}function create_if_block_8(L){let t,o,e,d;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),o=space(),create_component(e.$$.fragment)},l(E){claim_component(t.$$.fragment,E),o=claim_space(E),claim_component(e.$$.fragment,E)},m(E,T){mount_component(t,E,T),insert_hydration(E,o,T),mount_component(e,E,T),d=!0},p(E,T){const V={};T[0]&1|T[2]&64&&(V.$$scope={dirty:T,ctx:E}),t.$set(V);const _={};T[0]&5|T[2]&64&&(_.$$scope={dirty:T,ctx:E}),e.$set(_)},i(E){d||(transition_in(t.$$.fragment,E),transition_in(e.$$.fragment,E),d=!0)},o(E){transition_out(t.$$.fragment,E),transition_out(e.$$.fragment,E),d=!1},d(E){E&&detach(o),destroy_component(t,E),destroy_component(e,E)}}}function create_default_slot_8(L){let t;return{c(){t=text("Previous")},l(o){t=claim_text(o,"Previous")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_8(L){let t,o,e,d,E,T;return{c(){t=element("span"),o=svg_element("svg"),e=svg_element("polygon"),this.h()},l(V){t=claim_element(V,"SPAN",{slot:!0,class:!0});var _=children(t);o=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var m=children(o);e=claim_svg_element(m,"polygon",{points:!0}),children(e).forEach(detach),m.forEach(detach),_.forEach(detach),this.h()},h(){attr(e,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(o,"class","icon svelte-19h83wp"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",d="button-control "+(L[0]<=1?"disabled":null)+" svelte-19h83wp")},m(V,_){insert_hydration(V,t,_),append_hydration(t,o),append_hydration(o,e),E||(T=[listen(t,"click",L[42]),listen(t,"keydown",L[39])],E=!0)},p(V,_){_[0]&1&&d!==(d="button-control "+(V[0]<=1?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",d)},d(V){V&&detach(t),E=!1,run_all(T)}}}function create_default_slot_7(L){let t;return{c(){t=text("Next")},l(o){t=claim_text(o,"Next")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_7(L){let t,o,e,d,E,T;return{c(){t=element("span"),o=svg_element("svg"),e=svg_element("polygon"),this.h()},l(V){t=claim_element(V,"SPAN",{slot:!0,class:!0});var _=children(t);o=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var m=children(o);e=claim_svg_element(m,"polygon",{points:!0}),children(e).forEach(detach),m.forEach(detach),_.forEach(detach),this.h()},h(){attr(e,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(o,"class","icon svelte-19h83wp"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",d="button-control "+(L[0]>=L[2]?"disabled":null)+" svelte-19h83wp")},m(V,_){insert_hydration(V,t,_),append_hydration(t,o),append_hydration(o,e),E||(T=[listen(t,"click",L[43]),listen(t,"keydown",L[38])],E=!0)},p(V,_){_[0]&5&&d!==(d="button-control "+(V[0]>=V[2]?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",d)},d(V){V&&detach(t),E=!1,run_all(T)}}}function create_if_block_7(L){let t,o,e,d;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),o=space(),create_component(e.$$.fragment)},l(E){claim_component(t.$$.fragment,E),o=claim_space(E),claim_component(e.$$.fragment,E)},m(E,T){mount_component(t,E,T),insert_hydration(E,o,T),mount_component(e,E,T),d=!0},p(E,T){const V={};T[0]&2|T[2]&64&&(V.$$scope={dirty:T,ctx:E}),t.$set(V);const _={};T[0]&2|T[2]&64&&(_.$$scope={dirty:T,ctx:E}),e.$set(_)},i(E){d||(transition_in(t.$$.fragment,E),transition_in(e.$$.fragment,E),d=!0)},o(E){transition_out(t.$$.fragment,E),transition_out(e.$$.fragment,E),d=!1},d(E){E&&detach(o),destroy_component(t,E),destroy_component(e,E)}}}function create_default_slot_6(L){let t;return{c(){t=text("Zoom In")},l(o){t=claim_text(o,"Zoom In")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_6(L){let t,o,e,d,E,T;return{c(){t=element("span"),o=svg_element("svg"),e=svg_element("path"),this.h()},l(V){t=claim_element(V,"SPAN",{slot:!0,class:!0});var _=children(t);o=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var m=children(o);e=claim_svg_element(m,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),m.forEach(detach),_.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(o,"class","icon svelte-19h83wp"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",d="button-control "+(L[1]>=maxScale?"disabled":null)+" svelte-19h83wp")},m(V,_){insert_hydration(V,t,_),append_hydration(t,o),append_hydration(o,e),E||(T=[listen(t,"click",L[44]),listen(t,"keydown",L[37])],E=!0)},p(V,_){_[0]&2&&d!==(d="button-control "+(V[1]>=maxScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",d)},d(V){V&&detach(t),E=!1,run_all(T)}}}function create_default_slot_5(L){let t;return{c(){t=text("Zoom Out")},l(o){t=claim_text(o,"Zoom Out")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_5(L){let t,o,e,d,E,T;return{c(){t=element("span"),o=svg_element("svg"),e=svg_element("path"),this.h()},l(V){t=claim_element(V,"SPAN",{slot:!0,class:!0});var _=children(t);o=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var m=children(o);e=claim_svg_element(m,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),m.forEach(detach),_.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5
                  7h6v2H5V7z`),attr(o,"class","icon svelte-19h83wp"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",d="button-control "+(L[1]<=minScale?"disabled":null)+" svelte-19h83wp")},m(V,_){insert_hydration(V,t,_),append_hydration(t,o),append_hydration(o,e),E||(T=[listen(t,"click",L[45]),listen(t,"keydown",L[36])],E=!0)},p(V,_){_[0]&2&&d!==(d="button-control "+(V[1]<=minScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",d)},d(V){V&&detach(t),E=!1,run_all(T)}}}function create_if_block_6(L){let t,o;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p(e,d){const E={};d[0]&8|d[2]&64&&(E.$$scope={dirty:d,ctx:e}),t.$set(E)},i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function create_default_slot_4(L){let t;return{c(){t=text("Print")},l(o){t=claim_text(o,"Print")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_4(L){let t,o=`<svg class="icon svelte-19h83wp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z"></path></svg>`,e,d;return{c(){t=element("span"),t.innerHTML=o,this.h()},l(E){t=claim_element(E,"SPAN",{slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-h7svxq"&&(t.innerHTML=o),this.h()},h(){attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(E,T){insert_hydration(E,t,T),e||(d=[listen(t,"click",L[46]),listen(t,"keydown",L[35])],e=!0)},p:noop,d(E){E&&detach(t),e=!1,run_all(d)}}}function create_if_block_5(L){let t,o,e,d;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),o=space(),create_component(e.$$.fragment)},l(E){claim_component(t.$$.fragment,E),o=claim_space(E),claim_component(e.$$.fragment,E)},m(E,T){mount_component(t,E,T),insert_hydration(E,o,T),mount_component(e,E,T),d=!0},p(E,T){const V={};T[2]&64&&(V.$$scope={dirty:T,ctx:E}),t.$set(V);const _={};T[2]&64&&(_.$$scope={dirty:T,ctx:E}),e.$set(_)},i(E){d||(transition_in(t.$$.fragment,E),transition_in(e.$$.fragment,E),d=!0)},o(E){transition_out(t.$$.fragment,E),transition_out(e.$$.fragment,E),d=!1},d(E){E&&detach(o),destroy_component(t,E),destroy_component(e,E)}}}function create_default_slot_3(L){let t;return{c(){t=text("Anti-Clockwise")},l(o){t=claim_text(o,"Anti-Clockwise")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_3(L){let t,o=`<svg class="icon rot-icon svelte-19h83wp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z"></path></svg>`,e,d;return{c(){t=element("span"),t.innerHTML=o,this.h()},l(E){t=claim_element(E,"SPAN",{slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-ufimtl"&&(t.innerHTML=o),this.h()},h(){attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(E,T){insert_hydration(E,t,T),e||(d=[listen(t,"click",L[47]),listen(t,"keydown",L[34])],e=!0)},p:noop,d(E){E&&detach(t),e=!1,run_all(d)}}}function create_default_slot_2(L){let t;return{c(){t=text("Clockwise")},l(o){t=claim_text(o,"Clockwise")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_2(L){let t,o=`<svg class="icon svelte-19h83wp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z"></path></svg>`,e,d;return{c(){t=element("span"),t.innerHTML=o,this.h()},l(E){t=claim_element(E,"SPAN",{slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-1e3hovo"&&(t.innerHTML=o),this.h()},h(){attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(E,T){insert_hydration(E,t,T),e||(d=[listen(t,"click",L[48]),listen(t,"keydown",L[33])],e=!0)},p:noop,d(E){E&&detach(t),e=!1,run_all(d)}}}function create_if_block_4(L){let t,o;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p(e,d){const E={};d[0]&24|d[2]&64&&(E.$$scope={dirty:d,ctx:e}),t.$set(E)},i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function create_default_slot_1(L){let t;return{c(){t=text("Download")},l(o){t=claim_text(o,"Download")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot_1(L){let t,o='<svg class="icon svelte-19h83wp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"></path></svg>',e,d;return{c(){t=element("span"),t.innerHTML=o,this.h()},l(E){t=claim_element(E,"SPAN",{slot:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(t)!=="svelte-y9it4o"&&(t.innerHTML=o),this.h()},h(){attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(E,T){insert_hydration(E,t,T),e||(d=[listen(t,"click",L[49]),listen(t,"keydown",L[32])],e=!0)},p:noop,d(E){E&&detach(t),e=!1,run_all(d)}}}function create_if_block_2(L){let t,o;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot$1]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p(e,d){const E={};d[0]&6144|d[2]&64&&(E.$$scope={dirty:d,ctx:e}),t.$set(E)},i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function create_default_slot$1(L){let t=(L[11]===!0?L[12]:"Auto Turn Page")+"",o;return{c(){o=text(t)},l(e){o=claim_text(e,t)},m(e,d){insert_hydration(e,o,d)},p(e,d){d[0]&6144&&t!==(t=(e[11]===!0?e[12]:"Auto Turn Page")+"")&&set_data(o,t)},d(e){e&&detach(o)}}}function create_else_block$1(L){let t;return{c(){t=svg_element("path"),this.h()},l(o){t=claim_svg_element(o,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_if_block_3(L){let t;return{c(){t=svg_element("path"),this.h()},l(o){t=claim_svg_element(o,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(o,e){insert_hydration(o,t,e)},d(o){o&&detach(t)}}}function create_activator_slot(L){let t,o,e,d;function E(_,m){return _[11]===!0?create_if_block_3:create_else_block$1}let T=E(L),V=T(L);return{c(){t=element("span"),o=svg_element("svg"),V.c(),this.h()},l(_){t=claim_element(_,"SPAN",{slot:!0,class:!0});var m=children(t);o=claim_svg_element(m,"svg",{class:!0,xmlns:!0,viewBox:!0});var g=children(o);V.l(g),g.forEach(detach),m.forEach(detach),this.h()},h(){attr(o,"class","icon svelte-19h83wp"),attr(o,"xmlns","http://www.w3.org/2000/svg"),attr(o,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","page-info button-control svelte-19h83wp")},m(_,m){insert_hydration(_,t,m),append_hydration(t,o),V.m(o,null),e||(d=[listen(t,"click",L[50]),listen(t,"keydown",L[31])],e=!0)},p(_,m){T!==(T=E(_))&&(V.d(1),V=T(_),V&&(V.c(),V.m(o,null)))},d(_){_&&detach(t),V.d(),e=!1,run_all(d)}}}function create_fragment$1(L){let t,o,e,d,E,T,V,_='<svg class="icon svelte-19h83wp" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 10v8h6v-8h5l-8-8-8 8h5z"></path></svg>',m,g,N;add_render_callback(L[40]);const B=[create_if_block$1,create_if_block_1,create_else_block_1],I=[];function P(b,p){return b[14]===!0?0:b[5].length?1:2}return e=P(L),d=I[e]=B[e](L),{c(){t=element("div"),o=element("div"),d.c(),T=space(),V=element("button"),V.innerHTML=_,this.h()},l(b){t=claim_element(b,"DIV",{class:!0});var p=children(t);o=claim_element(p,"DIV",{class:!0});var A=children(o);d.l(A),A.forEach(detach),T=claim_space(p),V=claim_element(p,"BUTTON",{id:!0,class:!0,["data-svelte-h"]:!0}),get_svelte_dataset(V)!=="svelte-nsc3na"&&(V.innerHTML=_),p.forEach(detach),this.h()},h(){attr(o,"class",E=null_to_empty(L[6]===!0?"control":"null")+" svelte-19h83wp"),attr(V,"id","topBtn"),attr(V,"class","svelte-19h83wp"),attr(t,"class","parent svelte-19h83wp")},m(b,p){insert_hydration(b,t,p),append_hydration(t,o),I[e].m(o,null),append_hydration(t,T),append_hydration(t,V),m=!0,g||(N=[listen(window_1,"resize",L[40]),listen(V,"click",L[55])],g=!0)},p(b,p){let A=e;e=P(b),e===A?I[e].p(b,p):(group_outros(),transition_out(I[A],1,1,()=>{I[A]=null}),check_outros(),d=I[e],d?d.p(b,p):(d=I[e]=B[e](b),d.c()),transition_in(d,1),d.m(o,null)),(!m||p[0]&64&&E!==(E=null_to_empty(b[6]===!0?"control":"null")+" svelte-19h83wp"))&&attr(o,"class",E)},i(b){m||(transition_in(d),m=!0)},o(b){transition_out(d),m=!1},d(b){b&&detach(t),I[e].d(),g=!1,run_all(N)}}}const minScale=1,maxScale=2.3;function instance$1(L,t,o){let{url:e}=t,{data:d}=t,{scale:E=1.8}=t,{pageNum:T=1}=t,{flipTime:V=120}=t,{showButtons:_=["navigation","zoom","print","rotate","download","autoflip","timeInfo","pageInfo"]}=t,{showBorder:m=!0}=t,{totalPage:g=0}=t,{downloadFileName:N=""}=t;pdfExports.GlobalWorkerOptions.workerSrc=new URL("/Personal-Website/_app/immutable/assets/pdf.worker.e3f005b2.js",self.location);let B,I=0,P=0,b=null,p=!1,A=null,x=0,F="",k=0,h=!1,f,O,y=V,l=[],D="",w=!1,z="",$=!1;const M=vt=>{p=!0,b.getPage(vt).then(function(ct){let J=ct.getViewport({scale:E,rotation:x});const q=B.getContext("2d");o(7,B.height=J.height,B),o(7,B.width=J.width,B);let mt={canvasContext:q,viewport:J};ct.render(mt).promise.then(function(){if(p=!1,A!==null){if(T<b.totalPage)l[T]=B,o(0,T++,T),b.getPage(T).then(M);else for(let Zt=1;Zt<l.length;Zt++)B.appendChild(l[Zt]);A=null}})}),_.length&&o(8,I.textContent=vt,I)},K=vt=>{p?A=vt:M(vt)},rt=()=>{T<=1||(o(0,T--,T),K(T))},lt=()=>{T>=b.numPages||(o(0,T++,T),K(T))},G=()=>{E<=maxScale&&(o(1,E=E+.1),K(T))},ht=()=>{E>=minScale&&(o(1,E=E-.1),K(T))},pt=vt=>{onPrint(vt)},wt=()=>{x=x+90,K(T)},St=()=>{x=x-90,K(T)},C=()=>{i()},i=async()=>{pdfExports.getDocument({...e&&{url:e},...d&&{data:d},...D&&{password:D}}).promise.then(async function(ct){if(b=ct,o(14,w=!1),await tick(),_.length&&o(9,P.textContent=b.numPages,P),o(2,g=b.numPages),_.length)for(let J=1;J<=g;J++)getPageText(J,b).then(function(q){F=F.concat(q),o(10,k=calcRT(F))});o(30,$=!0)}).catch(function(ct){o(14,w=!0),o(15,z=ct.message)})};i();const a=()=>{o(11,h=!h),h===!1&&(clearInterval(f),clearInterval(O)),h===!0&&T<=g&&(O=setInterval(()=>{o(12,y=y-1)},1e3),f=setInterval(()=>{o(12,y=V),lt()},V*1e3))},r=({url:vt,data:ct})=>{let J=N||vt&&vt.substring(vt.lastIndexOf("/")+1);savePDF({fileURL:vt,data:ct,name:J})};onDestroy(()=>{clearInterval(f),clearInterval(O)});let c,u;function v(vt){bubble.call(this,L,vt)}function R(vt){bubble.call(this,L,vt)}function W(vt){bubble.call(this,L,vt)}function tt(vt){bubble.call(this,L,vt)}function et(vt){bubble.call(this,L,vt)}function ot(vt){bubble.call(this,L,vt)}function dt(vt){bubble.call(this,L,vt)}function At(vt){bubble.call(this,L,vt)}function ut(vt){bubble.call(this,L,vt)}function Ft(){o(16,c=window_1.innerWidth),o(17,u=window_1.innerHeight)}function Ut(){D=this.value,o(13,D)}const Et=()=>rt(),It=()=>lt(),gt=()=>G(),nt=()=>ht(),it=()=>pt(e),ft=()=>St(),Tt=()=>wt(),Pt=()=>r({url:e,data:d}),Ht=()=>a();function Vt(vt){binding_callbacks[vt?"unshift":"push"](()=>{I=vt,o(8,I)})}function jt(vt){binding_callbacks[vt?"unshift":"push"](()=>{P=vt,o(9,P)})}function Gt(vt){binding_callbacks[vt?"unshift":"push"](()=>{B=vt,o(7,B)})}function $t(vt){binding_callbacks[vt?"unshift":"push"](()=>{B=vt,o(7,B)})}const zt=()=>window.scrollTo(0,0);return L.$$set=vt=>{"url"in vt&&o(3,e=vt.url),"data"in vt&&o(4,d=vt.data),"scale"in vt&&o(1,E=vt.scale),"pageNum"in vt&&o(0,T=vt.pageNum),"flipTime"in vt&&o(28,V=vt.flipTime),"showButtons"in vt&&o(5,_=vt.showButtons),"showBorder"in vt&&o(6,m=vt.showBorder),"totalPage"in vt&&o(2,g=vt.totalPage),"downloadFileName"in vt&&o(29,N=vt.downloadFileName)},L.$$.update=()=>{L.$$.dirty[0]&1073741825&&$&&K(T)},[T,E,g,e,d,_,m,B,I,P,k,h,y,D,w,z,c,u,rt,lt,G,ht,pt,wt,St,C,a,r,V,N,$,v,R,W,tt,et,ot,dt,At,ut,Ft,Ut,Et,It,gt,nt,it,ft,Tt,Pt,Ht,Vt,jt,Gt,$t,zt]}class PdfViewer extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{url:3,data:4,scale:1,pageNum:0,flipTime:28,showButtons:5,showBorder:6,totalPage:2,downloadFileName:29},null,[-1,-1,-1])}}const _page_svelte_svelte_type_style_lang="";function create_else_block(L){let t,o;return t=new Chip({props:{label:"Ooops! no CV at the moment."}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p:noop,i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function create_if_block(L){let t,o;return t=new PdfViewer({props:{url:Assets.Resume,data:"",showButtons:["zoom","print","download"]}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p:noop,i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function create_default_slot(L){let t,o,e,d;const E=[create_if_block,create_else_block],T=[];function V(_,m){return _[0]?0:1}return o=V(L),e=T[o]=E[o](L),{c(){t=element("div"),e.c(),this.h()},l(_){t=claim_element(_,"DIV",{class:!0});var m=children(t);e.l(m),m.forEach(detach),this.h()},h(){attr(t,"class","resume svelte-1vvkz14")},m(_,m){insert_hydration(_,t,m),T[o].m(t,null),d=!0},p(_,m){e.p(_,m)},i(_){d||(transition_in(e),d=!0)},o(_){transition_out(e),d=!1},d(_){_&&detach(t),T[o].d()}}}function create_fragment(L){let t,o;return t=new CommonPage({props:{title:L[1],$$slots:{default:[create_default_slot]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,d){mount_component(t,e,d),o=!0},p(e,[d]){const E={};d&4&&(E.$$scope={dirty:d,ctx:e}),t.$set(E)},i(e){o||(transition_in(t.$$.fragment,e),o=!0)},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e)}}}function instance(L){const{item:t,title:o}=RESUME;return[t,o]}class Page extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}export{Page as component};
